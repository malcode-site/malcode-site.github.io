<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MalCoder</title>
  
  <subtitle>stay hungry, stay foolish</subtitle>
  <link href="https://malcode-site.github.io/atom.xml" rel="self"/>
  
  <link href="https://malcode-site.github.io/"/>
  <updated>2024-09-09T14:23:28.618Z</updated>
  <id>https://malcode-site.github.io/</id>
  
  <author>
    <name>Malred</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Using TipTap rich text editor with Next.js</title>
    <link href="https://malcode-site.github.io/2024/09/09/nextjs/nextjs-beginner-tiptap/en/"/>
    <id>https://malcode-site.github.io/2024/09/09/nextjs/nextjs-beginner-tiptap/en/</id>
    <published>2024-09-09T12:09:23.000Z</published>
    <updated>2024-09-09T14:23:28.618Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tiptap"><a href="#tiptap" class="headerlink" title="tiptap"></a>tiptap</h1><div class="tag-plugin link dis-select"><a class="link-card plain" title="Tiptap is a headless wrapper around ProseMirror – a toolkit for building rich text WYSIWYG editors, which is already in use at many well-known companies such as New York Times, The Guardian or Atlassian." href="https://tiptap.dev/docs/editor/getting-started/overview" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">Tiptap is a headless wrapper around ProseMirror – a toolkit for building rich text WYSIWYG editors, which is already in use at many well-known companies such as New York Times, The Guardian or Atlassian.</span><span class="cap link footnote">https://tiptap.dev/docs/editor/getting-started/overview</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><p>Our blog system already has the capability to read MD files, but editing MD files requires an additional editor and a<br>separate directory to store them.<br>Therefore, we have switched to using a database + TipTap rich text method to store our blog content.</p><h1 id="git-repository"><a href="#git-repository" class="headerlink" title="git repository"></a>git repository</h1><p>This chapter is part of the Next.js beginner course series. Check out the following Git repository and switch to the<br>extra2 branch to view the code for this chapter.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="Install-and-configure-TipTap"><a href="#Install-and-configure-TipTap" class="headerlink" title="Install and configure TipTap"></a>Install and configure TipTap</h1><p>Since there are many dependencies required, we will install the new dependencies by modifying the package.json file and<br>then running an install.</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-dropdown-menu&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-select&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-slot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-toggle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tailwindcss/typography&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.5.14&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-character-count&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-document&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-dropcursor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-focus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-heading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-paragraph&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-subscript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-superscript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text-align&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text-style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/pm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/starter-kit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^20&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/react-dom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;class-variance-authority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.7.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-font-family&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-highlight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-list-keymap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-cell&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-header&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-row&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-task-item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-task-list&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lowlight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^14.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next&quot;</span><span class="punctuation">:</span> <span class="string">&quot;14.2.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next-themes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react-dom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tailwind-merge&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.5.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sass&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.77.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lucide-react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.400.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>Among these dependencies, aside from TipTap, the others are for the component library.</p><h1 id="Page-for-writing-articles"><a href="#Page-for-writing-articles" class="headerlink" title="Page for writing articles"></a>Page for writing articles</h1><p>Create a page for writing articles using TipTap.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - blog</span><br><span class="line">        - [slug]</span><br><span class="line">            - write</span><br><span class="line">                - page.tsx</span><br></pre></td></tr></table></figure><p>code:</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">FormEvent</span>, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TipTap</span> <span class="keyword">from</span> <span class="string">&quot;@/components/TipTap&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Button</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@/components/ui/button&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Page</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// contents of the tiptap editor </span></span><br><span class="line">    <span class="keyword">const</span> [richText, setRichText] = <span class="title function_">useState</span>(<span class="string">`</span></span><br><span class="line"><span class="string">            descripte   ddd </span></span><br><span class="line"><span class="string">        &lt;p&gt;This is a basic example of implementing images. Drag to re-order.&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;https://placehold.co/800x400&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;https://placehold.co/800x400/6A00F5/white&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          The focus extension adds a class to the focused node only. That enables you to add a custom styling to just that node. By default, it’ll add &lt;code&gt;.has-focus&lt;/code&gt;, even to nested nodes.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">          &lt;li&gt;Nested elements (like this list item) will be focused with the default setting of &lt;code&gt;mode: all&lt;/code&gt;.&lt;/li&gt;</span></span><br><span class="line"><span class="string">          &lt;li&gt;Otherwise the whole list will get the focus class, even when just a single list item is selected.&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          That’s a boring paragraph followed by a fenced code block:</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;pre&gt;&lt;code&gt;for (var i=1; i &lt;= 20; i++)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  if (i % 15 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;FizzBuzz&quot;);</span></span><br><span class="line"><span class="string">  else if (i % 3 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;Fizz&quot;);</span></span><br><span class="line"><span class="string">  else if (i % 5 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;Buzz&quot;);</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    console.log(i);</span></span><br><span class="line"><span class="string">&#125;&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          Press Command/Ctrl + Enter to leave the fenced code block and continue typing in boring paragraphs.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">`</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">m-12</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;(e:</span> <span class="attr">FormEvent</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                e.preventDefault()</span></span><br><span class="line"><span class="language-xml">                console.log(richText)</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">font-bold</span> <span class="attr">mr-2</span> <span class="attr">text-2xl</span>&#x27;&#125;&gt;</span>&#123;props.params.slug&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/* tiptap editor */&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">TipTap</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">description</span>=<span class="string">&#123;richText&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onChange</span>=<span class="string">&#123;(text)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        setRichText(text)</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">type</span>=<span class="string">&#123;</span>&#x27;<span class="attr">submit</span>&#x27;&#125; <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">my-4</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Submit</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Page</span>;</span><br></pre></td></tr></table></figure><h1 id="tiptap-editor"><a href="#tiptap-editor" class="headerlink" title="tiptap editor"></a>tiptap editor</h1><p>Create a TipTap editor component.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - TipTap.tsx</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./styled.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">EditorContent</span>, <span class="title class_">ReactNodeViewRenderer</span>, useEditor&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StarterKit</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/starter-kit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Heading</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-heading&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BubbleToolbar</span> <span class="keyword">from</span> <span class="string">&quot;@/components/BubbleToolbar&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">CharacterCount</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-character-count&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Color</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-color&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Document</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-document&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Paragraph</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-paragraph&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Text</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TextStyle</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text-style&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Dropcursor</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-dropcursor&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Image</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-image&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useEffect, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FloatingToolbar</span> <span class="keyword">from</span> <span class="string">&quot;@/components/FloatingToolbar&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @tiptap-pro/extension-file-handler is not in the npm registry, or you have no permission to fetch it.</span></span><br><span class="line"><span class="comment">// import FileHandler from &#x27;@tiptap-pro/extension-file-handler&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Focus</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-focus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">FontFamily</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-font-family&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ListItem</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-list-item&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BulletList</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-bullet-list&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Code</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-code&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ListKeymap</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-list-keymap&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Blockquote</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-blockquote&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HardBreak</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-hard-break&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HorizontalRule</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-horizontal-rule&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Highlight</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-highlight&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;common, createLowlight&#125; <span class="keyword">from</span> <span class="string">&#x27;lowlight&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lowlight = <span class="title function_">createLowlight</span>(common)</span><br><span class="line"></span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;ts&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Table</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableCell</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-cell&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableHeader</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-header&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableRow</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-row&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskItem</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-task-item&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskList</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-task-list&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-link&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import Highlight from &#x27;@tiptap/extension-highlight&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Subscript</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-subscript&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Superscript</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-superscript&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TextAlign</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text-align&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TipTap</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                   description,</span></span><br><span class="line"><span class="params">                                   onChange</span></span><br><span class="line"><span class="params">                               &#125;: &#123;</span></span><br><span class="line"><span class="params">    description: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    onChange: (richText: <span class="built_in">string</span>) =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// Editor settings, such as which plugins to use, and what features are supported.</span></span><br><span class="line">    <span class="keyword">const</span> editor = <span class="title function_">useEditor</span>(&#123;</span><br><span class="line">        <span class="attr">extensions</span>: [</span><br><span class="line">            <span class="title class_">StarterKit</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// Disable an included extension</span></span><br><span class="line">                <span class="attr">history</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="comment">// codeBlock: false,</span></span><br><span class="line">                <span class="comment">// code: false</span></span><br><span class="line">                <span class="attr">gapcursor</span>: <span class="literal">true</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Heading</span>,</span><br><span class="line">            <span class="title class_">Document</span>,</span><br><span class="line">            <span class="title class_">Paragraph</span>,</span><br><span class="line">            <span class="title class_">Dropcursor</span>,</span><br><span class="line">            <span class="title class_">Text</span>,</span><br><span class="line">            <span class="title class_">TextStyle</span>,</span><br><span class="line">            <span class="title class_">Color</span>,</span><br><span class="line">            <span class="title class_">CharacterCount</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">mode</span>: <span class="string">&#x27;nodeSize&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Focus</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">className</span>: <span class="string">&#x27;has-focus&#x27;</span>,</span><br><span class="line">                <span class="attr">mode</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Code</span>,</span><br><span class="line">            <span class="title class_">BulletList</span>,</span><br><span class="line">            <span class="title class_">ListItem</span>,</span><br><span class="line">            <span class="title class_">FontFamily</span>,</span><br><span class="line">            <span class="title class_">ListKeymap</span>,</span><br><span class="line">            <span class="comment">// CodeBlock,</span></span><br><span class="line">            <span class="title class_">Blockquote</span>,</span><br><span class="line">            <span class="title class_">HardBreak</span>,</span><br><span class="line">            <span class="title class_">HorizontalRule</span>,</span><br><span class="line">            <span class="title class_">Highlight</span>,</span><br><span class="line">            <span class="title class_">Image</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">allowBase64</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">inline</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Table</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// resizable: true,</span></span><br><span class="line">                <span class="comment">// allowTableNodeSelection: true</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">TableRow</span>,</span><br><span class="line">            <span class="title class_">TableHeader</span>,</span><br><span class="line">            <span class="title class_">TableCell</span>,</span><br><span class="line">            <span class="title class_">Text</span>,</span><br><span class="line">            <span class="title class_">TaskList</span>,</span><br><span class="line">            <span class="title class_">TaskItem</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// nested: true,</span></span><br><span class="line">                <span class="title class_">HTMLAttributes</span>: &#123;</span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;list-none&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Link</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="title class_">HTMLAttributes</span>: &#123;</span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;underline cursor-pointer text-blue-400&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">openOnClick</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">// linkOnPaste: true,</span></span><br><span class="line">                <span class="attr">autolink</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">defaultProtocol</span>: <span class="string">&#x27;https&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Highlight</span>.<span class="title function_">configure</span>(&#123;<span class="attr">multicolor</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">            <span class="title class_">Subscript</span>,</span><br><span class="line">            <span class="title class_">Superscript</span>,</span><br><span class="line">            <span class="title class_">TextAlign</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">types</span>: [<span class="string">&#x27;heading&#x27;</span>, <span class="string">&#x27;paragraph&#x27;</span>],</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">autofocus</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">content</span>: description,</span><br><span class="line">        <span class="attr">editorProps</span>: &#123;</span><br><span class="line">            <span class="attr">attributes</span>: &#123;</span><br><span class="line">                <span class="attr">class</span>:</span><br><span class="line">                    <span class="string">&#x27;p-2 rounded-md border min-h-[150px] border-input bg-back  disabled:cursor-not-allowed disabled:opacity-50&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">onUpdate</span>(<span class="params">&#123;editor&#125;</span>) &#123;</span><br><span class="line">            <span class="title function_">onChange</span>(editor.<span class="title function_">getHTML</span>())</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(editor.<span class="title function_">getHTML</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防止编辑器未加载时操作出错</span></span><br><span class="line">    <span class="keyword">const</span> [isEditable, setIsEditable] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (editor) &#123;</span><br><span class="line">            editor.<span class="title function_">setEditable</span>(isEditable)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [isEditable, editor])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27; <span class="attr">flex</span> <span class="attr">flex-col</span> <span class="attr">justify-stretch</span> <span class="attr">min-h-</span>[<span class="attr">250px</span>] <span class="attr">min-w-</span>[<span class="attr">250px</span>]&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* bubble menu, It&#x27;s the floating toolbar that appears when you long-press and drag the mouse to select content. */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">BubbleToolbar</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* The floating toolbar that automatically appears when you press enter to start a new line. */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">FloatingToolbar</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* The toolbar at the top of the editor, which I originally didn&#x27;t want to implement, is mainly for using the table component. */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;control-group flex flex-row flex-wrap gap-2 mb-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().insertTable(&#123;rows: 3, cols: 3, withHeaderRow: true&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    Insert table</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addColumnBefore().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Add column before</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addColumnAfter().run()&#125;&gt;Add column after</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteColumn().run()&#125;&gt;Delete column</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addRowBefore().run()&#125;&gt;Add row before</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addRowAfter().run()&#125;&gt;Add row after</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteRow().run()&#125;&gt;Delete row</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteTable().run()&#125;&gt;Delete table</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().mergeCells().run()&#125;&gt;Merge cells</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().splitCell().run()&#125;&gt;Split cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderColumn().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header column</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderRow().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header row</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderCell().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().mergeOrSplit().run()&#125;&gt;Merge or split</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setCellAttribute(&#x27;colspan&#x27;, 2).run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Set cell attribute</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().fixTables().run()&#125;&gt;Fix tables</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().goToNextCell().run()&#125;&gt;Go to next cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().goToPreviousCell().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Go to previous cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            &#123;/* editor content */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">EditorContent</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            &#123;/* count of words */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">character-count</span> `&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;editor?.storage.characterCount.characters()&#125; characters</span></span><br><span class="line"><span class="language-xml">                &#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;editor?.storage.characterCount.words()&#125; words</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="menu"><a href="#menu" class="headerlink" title="menu"></a>menu</h1><h2 id="BubbleToolbar"><a href="#BubbleToolbar" class="headerlink" title="BubbleToolbar"></a>BubbleToolbar</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - BubbleToolbar.tsx</span><br></pre></td></tr></table></figure><p>BubbleToolbar, It’s the floating toolbar that appears when you long-press and drag the mouse to select content.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240909213219.png" data-fancybox="true"/></div></div><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./styled.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">BubbleMenu</span>, <span class="keyword">type</span> <span class="title class_">Editor</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Toggle</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./ui/toggle&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">Heading</span>,</span><br><span class="line">    <span class="title class_">Heading2</span>,</span><br><span class="line">    <span class="title class_">Heading3</span>, <span class="title class_">Heading4</span>,</span><br><span class="line">    <span class="title class_">Italic</span>,</span><br><span class="line">    <span class="title class_">List</span>,</span><br><span class="line">    <span class="title class_">Image</span>,</span><br><span class="line">    <span class="title class_">ListOrdered</span>,</span><br><span class="line">    <span class="title class_">LucideBold</span>,</span><br><span class="line">    <span class="title class_">Minus</span>,</span><br><span class="line">    <span class="title class_">Strikethrough</span>,</span><br><span class="line">    <span class="title class_">Superscript</span>,</span><br><span class="line">    <span class="title class_">Link2</span>,</span><br><span class="line">    <span class="title class_">Link2Off</span>,</span><br><span class="line">    <span class="title class_">Braces</span>,</span><br><span class="line">    <span class="title class_">Brackets</span>, <span class="title class_">SquareCheck</span>, <span class="title class_">Subscript</span>,</span><br><span class="line">    <span class="title class_">AlignJustify</span>, <span class="title class_">AlignLeft</span>, <span class="title class_">AlignRight</span>, <span class="title class_">AlignCenter</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;lucide-react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Select</span>, <span class="title class_">SelectContent</span>, <span class="title class_">SelectItem</span>, <span class="title class_">SelectTrigger</span>, <span class="title class_">SelectValue</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@/components/ui/select&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useCallback&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123;</span><br><span class="line">    <span class="attr">editor</span>: <span class="title class_">Editor</span> | <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BubbleToolbar</span>(<span class="params">&#123;editor&#125;: <span class="title class_">Props</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!editor)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> addImage = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&#x27;URL&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (url) &#123;</span><br><span class="line">            editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">setImage</span>(&#123;<span class="attr">src</span>: url&#125;).<span class="title function_">run</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [editor])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> setLink = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> previousUrl = editor.<span class="title function_">getAttributes</span>(<span class="string">&#x27;link&#x27;</span>).<span class="property">href</span></span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&#x27;URL&#x27;</span>, previousUrl)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// cancelled</span></span><br><span class="line">        <span class="keyword">if</span> (url === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// empty</span></span><br><span class="line">        <span class="keyword">if</span> (url === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">extendMarkRange</span>(<span class="string">&#x27;link&#x27;</span>).<span class="title function_">unsetLink</span>()</span><br><span class="line">                .<span class="title function_">run</span>()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// update link</span></span><br><span class="line">        editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">extendMarkRange</span>(<span class="string">&#x27;link&#x27;</span>).<span class="title function_">setLink</span>(&#123;<span class="attr">href</span>: url&#125;)</span><br><span class="line">            .<span class="title function_">run</span>()</span><br><span class="line">    &#125;, [editor])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">BubbleMenu</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-fit</span> <span class="attr">shadow-md</span> <span class="attr">rounded-lg</span>&#x27;&#125; <span class="attr">editor</span>=<span class="string">&#123;editor&#125;</span> <span class="attr">tippyOptions</span>=<span class="string">&#123;&#123;duration:</span> <span class="attr">100</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bubble-menu flex-wrap rounded-lg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">1</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 1&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">2</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 2&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading2</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">3</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 3&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading3</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">4</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 4&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading4</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">bold</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleBold().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">LucideBold</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">italic</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleItalic().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Italic</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">strike</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleStrike().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Strikethrough</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">bulletList</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleBulletList().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">List</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">orderedList</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleOrderedList().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ListOrdered</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            console.log(value)</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Purple&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#958DF1&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Red&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#F98181&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Orange&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#FBBC88&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Yellow&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#FAF594&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Blue&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#70CFF8&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Teal&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#94FADB&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Green&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#B9F18D&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Unset color&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetColor().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">theme</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;[</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Purple&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#958DF1&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Red&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#F98181&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Orange&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FBBC88&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Yellow&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FAF594&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Blue&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#70CFF8&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Teal&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#94FADB&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Green&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#B9F18D&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Unset color&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                            ].map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">value</span>=<span class="string">&#123;item.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">data-testid</span>=<span class="string">&#123;</span>`<span class="attr">set</span>$&#123;<span class="attr">item.name</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">color:</span> <span class="attr">item.val</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        `<span class="attr">bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:brightness-125</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                         $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">textStyle</span>&#x27;, &#123;<span class="attr">color:</span> <span class="attr">item.val</span>&#125;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    // <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setColor(item.val).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                &gt;</span></span><br><span class="line"><span class="language-xml">                                    &#123;item.name&#125;</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            ))&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            console.log(value)</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Purple&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#958DF1&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Red&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#F98181&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Orange&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#ffc078&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Yellow&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#FAF594&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Blue&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#70CFF8&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Teal&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#94FADB&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Green&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#B9F18D&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Unset color&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetHighlight().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">highlight</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;[</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Purple&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#958DF1&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Red&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#F98181&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Orange&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FBBC88&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Yellow&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FAF594&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Blue&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#70CFF8&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Teal&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#94FADB&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Green&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#B9F18D&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Unset color&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                            ].map((item, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">key</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">value</span>=<span class="string">&#123;item.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">data-testid</span>=<span class="string">&#123;</span>`<span class="attr">set</span>$&#123;<span class="attr">item.name</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">background:</span> <span class="attr">item.val</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        `<span class="attr">bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:brightness-125</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                         $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">textStyle</span>&#x27;, &#123;<span class="attr">color:</span> <span class="attr">item.val</span>&#125;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    // <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setColor(item.val).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                &gt;</span></span><br><span class="line"><span class="language-xml">                                    &#123;item.name&#125;</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            ))&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;inter&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;comic-sans&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;serif&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;serif&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;monospace&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;monospace&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;cursive&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;cursive&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;css-variable&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;var(--title-font-family)&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;comic-sans-quoted&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;&quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;unsetFontFamily&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetFontFamily().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                    &gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">font</span> <span class="attr">family</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setFontFamily(&#x27;Inter&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;Inter&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;inter&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&#123;&#x27;inter&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Inter</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;</span></span><br><span class="line"><span class="language-xml">                                    editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;Comic Sans MS, Comic Sans&#x27;&#125;)</span></span><br><span class="line"><span class="language-xml">                                        ? &#x27;is-active&#x27;</span></span><br><span class="line"><span class="language-xml">                                        : &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;comic-sans&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&#123;&quot;comic-sans&quot;&#125;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Comic Sans</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;serif&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;serif&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;serif&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;serif&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Serif</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;monospace&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;monospace&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;monospace&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;monospace&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Monospace</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;cursive&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;cursive&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;cursive&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;cursive&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Cursive</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;var(--title-font-family)&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;var(--title-font-family)&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;css-variable&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;css-variable&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                CSS variable</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;&quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;&quot;Comic Sans&quot;&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;comic-sans-quoted&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;comic-sans-quoted&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Comic Sans quoted</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetFontFamily().run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;unsetFontFamily&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;unsetFontFamily&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Unset font family</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleCodeBlock().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;`$&#123;editor.isActive(&#x27;codeBlock&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;`&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Braces</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-4</span> <span class="attr">h-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; editor.chain().focus().toggleCode().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    className=&#123;editor.isActive(&#x27;code&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">ChevronsLeftRight</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    size=&#123;&#x27;sm&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; editor.chain().focus().setCodeBlock().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    disabled=&#123;editor.isActive(&#x27;codeBlock&#x27;)&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    className=&#123;&#x27;inline&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">Braces</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-4</span> <span class="attr">h-4</span>&#x27;&#125; /&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleBlockquote().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;`$&#123;editor.isActive(&#x27;blockquote&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;`&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Brackets</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    size=&#123;&#x27;sm&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; () =&gt; editor.chain().focus().setHardBreak().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">CornerDownLeft</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setHorizontalRule().run()&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Minus</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Image</span> <span class="attr">onClick</span>=<span class="string">&#123;addImage&#125;</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">m-2</span> <span class="attr">cursor-pointer</span> <span class="attr">h-5</span> <span class="attr">w-5</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleTaskList().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;taskList&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">SquareCheck</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                &#123;/*链接*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Link2</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;setLink&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">h-5</span> <span class="attr">w-5</span> <span class="attr">m-2</span> <span class="attr">cursor-pointer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">link</span>&#x27;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().unsetLink().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    disabled=&#123;!editor.isActive(&#x27;link&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link2Off</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*上下标*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleSuperscript().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;superscript&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Superscript</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleSubscript().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;subscript&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Subscript</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*对齐*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;left&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;left&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignLeft</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;center&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;center&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignCenter</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;right&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;right&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignRight</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;justify&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;justify&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignJustify</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">BubbleMenu</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="FloatingToolbar"><a href="#FloatingToolbar" class="headerlink" title="FloatingToolbar"></a>FloatingToolbar</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - FloatingToolbar.tsx</span><br></pre></td></tr></table></figure><p>FloatingToolbar, The floating toolbar that automatically appears when you press enter to start a new line.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240909214422.png" data-fancybox="true"/></div></div><h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>visit <a href="http://localhost:3000/blog/xxx/write">http://localhost:3000/blog/xxx/write</a></p><p>Next, we will introduce Prisma to operate the database and store these rich texts in the database.</p>]]></content>
    
    
    <summary type="html">Using TipTap rich text editor with Next.js</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>nextjs使用tiptap富文本编辑器</title>
    <link href="https://malcode-site.github.io/2024/09/09/nextjs/nextjs-beginner-tiptap/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/09/09/nextjs/nextjs-beginner-tiptap/zh-cn/</id>
    <published>2024-09-09T12:09:23.000Z</published>
    <updated>2024-09-09T13:46:39.675Z</updated>
    
    <content type="html"><![CDATA[<h1 id="tiptap"><a href="#tiptap" class="headerlink" title="tiptap"></a>tiptap</h1><div class="tag-plugin link dis-select"><a class="link-card plain" title="Tiptap是ProseMirror的一个无头封装，ProseMirror是一个用于构建富文本所见即所得编辑器的工具包" href="https://tiptap.dev/docs/editor/getting-started/overview" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">Tiptap是ProseMirror的一个无头封装，ProseMirror是一个用于构建富文本所见即所得编辑器的工具包</span><span class="cap link footnote">https://tiptap.dev/docs/editor/getting-started/overview</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><p>我们的博客系统已经拥有了读取md文件的能力, 但是md文件需要额外的编辑器来编辑, 并且需要额外的目录来存放md文件,<br>所以我们改为使用数据库+tiptap富文本的方式来存储我们的博客</p><h1 id="git仓库"><a href="#git仓库" class="headerlink" title="git仓库"></a>git仓库</h1><p>本章是nextjs入门课程系列的一部分, 查看以下git仓库, 并切换到extra2分支, 可查看本章代码</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="安装配置tiptap"><a href="#安装配置tiptap" class="headerlink" title="安装配置tiptap"></a>安装配置tiptap</h1><p>因为需要的依赖比较多, 所以我们用修改package.json然后install的方式来安装新的依赖</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-dropdown-menu&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-label&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-select&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-slot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@radix-ui/react-toggle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tailwindcss/typography&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.5.14&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/core&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-character-count&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-document&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-dropcursor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-focus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-heading&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-image&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-paragraph&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-subscript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-superscript&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text-align&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-text-style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/pm&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/starter-kit&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/suggestion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.4.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/node&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^20&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@types/react-dom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;class-variance-authority&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.7.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;clsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-font-family&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-highlight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-link&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-list-keymap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-cell&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-header&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-table-row&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-task-item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.6.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;@tiptap/extension-task-list&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lowlight&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;marked&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^14.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next&quot;</span><span class="punctuation">:</span> <span class="string">&quot;14.2.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;next-themes&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.3.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;react-dom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^18&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tailwind-merge&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.5.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sass&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.77.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lucide-react&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.400.0&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>这里面除了tiptap外的依赖是组件库的依赖</p><h1 id="编写文章的页面"><a href="#编写文章的页面" class="headerlink" title="编写文章的页面"></a>编写文章的页面</h1><p>创建一个用tiptap来编写文章的页面</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - blog</span><br><span class="line">        - [slug]</span><br><span class="line">            - write</span><br><span class="line">                - page.tsx</span><br></pre></td></tr></table></figure><p>页面代码:</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123;<span class="title class_">FormEvent</span>, useState&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TipTap</span> <span class="keyword">from</span> <span class="string">&quot;@/components/TipTap&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Button</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@/components/ui/button&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Page</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// tiptap编辑器中的内容</span></span><br><span class="line">    <span class="keyword">const</span> [richText, setRichText] = <span class="title function_">useState</span>(<span class="string">`</span></span><br><span class="line"><span class="string">            descripte   ddd </span></span><br><span class="line"><span class="string">        &lt;p&gt;This is a basic example of implementing images. Drag to re-order.&lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;https://placehold.co/800x400&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;img src=&quot;https://placehold.co/800x400/6A00F5/white&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          The focus extension adds a class to the focused node only. That enables you to add a custom styling to just that node. By default, it’ll add &lt;code&gt;.has-focus&lt;/code&gt;, even to nested nodes.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;ul&gt;</span></span><br><span class="line"><span class="string">          &lt;li&gt;Nested elements (like this list item) will be focused with the default setting of &lt;code&gt;mode: all&lt;/code&gt;.&lt;/li&gt;</span></span><br><span class="line"><span class="string">          &lt;li&gt;Otherwise the whole list will get the focus class, even when just a single list item is selected.&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          That’s a boring paragraph followed by a fenced code block:</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;pre&gt;&lt;code&gt;for (var i=1; i &lt;= 20; i++)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  if (i % 15 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;FizzBuzz&quot;);</span></span><br><span class="line"><span class="string">  else if (i % 3 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;Fizz&quot;);</span></span><br><span class="line"><span class="string">  else if (i % 5 == 0)</span></span><br><span class="line"><span class="string">    console.log(&quot;Buzz&quot;);</span></span><br><span class="line"><span class="string">  else</span></span><br><span class="line"><span class="string">    console.log(i);</span></span><br><span class="line"><span class="string">&#125;&lt;/code&gt;&lt;/pre&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;</span></span><br><span class="line"><span class="string">          Press Command/Ctrl + Enter to leave the fenced code block and continue typing in boring paragraphs.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">`</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">m-12</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;(e:</span> <span class="attr">FormEvent</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                e.preventDefault()</span></span><br><span class="line"><span class="language-xml">                console.log(richText)</span></span><br><span class="line"><span class="language-xml">            &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">font-bold</span> <span class="attr">mr-2</span> <span class="attr">text-2xl</span>&#x27;&#125;&gt;</span>&#123;props.params.slug&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/* tiptap编辑器 */&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">TipTap</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">description</span>=<span class="string">&#123;richText&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onChange</span>=<span class="string">&#123;(text)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        setRichText(text)</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;/&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">type</span>=<span class="string">&#123;</span>&#x27;<span class="attr">submit</span>&#x27;&#125; <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">my-4</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Submit</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Page</span>;</span><br></pre></td></tr></table></figure><h1 id="tiptap编辑器"><a href="#tiptap编辑器" class="headerlink" title="tiptap编辑器"></a>tiptap编辑器</h1><p>创建tiptap编辑器组件</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - TipTap.tsx</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./styled.scss&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">EditorContent</span>, <span class="title class_">ReactNodeViewRenderer</span>, useEditor&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">StarterKit</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/starter-kit&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Heading</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-heading&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BubbleToolbar</span> <span class="keyword">from</span> <span class="string">&quot;@/components/BubbleToolbar&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">CharacterCount</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-character-count&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Color</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-color&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Document</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-document&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Paragraph</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-paragraph&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Text</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TextStyle</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text-style&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Dropcursor</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-dropcursor&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Image</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-image&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;useEffect, useState&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">FloatingToolbar</span> <span class="keyword">from</span> <span class="string">&quot;@/components/FloatingToolbar&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @tiptap-pro/extension-file-handler is not in the npm registry, or you have no permission to fetch it.</span></span><br><span class="line"><span class="comment">// import FileHandler from &#x27;@tiptap-pro/extension-file-handler&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Focus</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-focus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">FontFamily</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-font-family&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ListItem</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-list-item&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BulletList</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-bullet-list&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Code</span> <span class="keyword">from</span> <span class="string">&quot;@tiptap/extension-code&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ListKeymap</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-list-keymap&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Blockquote</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-blockquote&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HardBreak</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-hard-break&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HorizontalRule</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-horizontal-rule&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Highlight</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-highlight&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;common, createLowlight&#125; <span class="keyword">from</span> <span class="string">&#x27;lowlight&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> lowlight = <span class="title function_">createLowlight</span>(common)</span><br><span class="line"></span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;html&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line">lowlight.<span class="title function_">highlight</span>(<span class="string">&#x27;ts&#x27;</span>, <span class="string">&#x27;&quot;use strict&quot;;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Table</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableCell</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-cell&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableHeader</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-header&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TableRow</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-table-row&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskItem</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-task-item&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TaskList</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-task-list&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-link&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// import Highlight from &#x27;@tiptap/extension-highlight&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Subscript</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-subscript&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Superscript</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-superscript&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">TextAlign</span> <span class="keyword">from</span> <span class="string">&#x27;@tiptap/extension-text-align&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TipTap</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                   description,</span></span><br><span class="line"><span class="params">                                   onChange</span></span><br><span class="line"><span class="params">                               &#125;: &#123;</span></span><br><span class="line"><span class="params">    description: <span class="built_in">string</span></span></span><br><span class="line"><span class="params">    onChange: (richText: <span class="built_in">string</span>) =&gt; <span class="built_in">void</span></span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// 编辑器设置, 比如使用哪些插件, 支持哪些功能</span></span><br><span class="line">    <span class="keyword">const</span> editor = <span class="title function_">useEditor</span>(&#123;</span><br><span class="line">        <span class="attr">extensions</span>: [</span><br><span class="line">            <span class="title class_">StarterKit</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// Disable an included extension</span></span><br><span class="line">                <span class="attr">history</span>: <span class="literal">false</span>,</span><br><span class="line">                <span class="comment">// codeBlock: false,</span></span><br><span class="line">                <span class="comment">// code: false</span></span><br><span class="line">                <span class="attr">gapcursor</span>: <span class="literal">true</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Heading</span>,</span><br><span class="line">            <span class="title class_">Document</span>,</span><br><span class="line">            <span class="title class_">Paragraph</span>,</span><br><span class="line">            <span class="title class_">Dropcursor</span>,</span><br><span class="line">            <span class="title class_">Text</span>,</span><br><span class="line">            <span class="title class_">TextStyle</span>,</span><br><span class="line">            <span class="title class_">Color</span>,</span><br><span class="line">            <span class="title class_">CharacterCount</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">mode</span>: <span class="string">&#x27;nodeSize&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Focus</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">className</span>: <span class="string">&#x27;has-focus&#x27;</span>,</span><br><span class="line">                <span class="attr">mode</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Code</span>,</span><br><span class="line">            <span class="title class_">BulletList</span>,</span><br><span class="line">            <span class="title class_">ListItem</span>,</span><br><span class="line">            <span class="title class_">FontFamily</span>,</span><br><span class="line">            <span class="title class_">ListKeymap</span>,</span><br><span class="line">            <span class="comment">// CodeBlock,</span></span><br><span class="line">            <span class="title class_">Blockquote</span>,</span><br><span class="line">            <span class="title class_">HardBreak</span>,</span><br><span class="line">            <span class="title class_">HorizontalRule</span>,</span><br><span class="line">            <span class="title class_">Highlight</span>,</span><br><span class="line">            <span class="title class_">Image</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">allowBase64</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">inline</span>: <span class="literal">true</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Table</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// resizable: true,</span></span><br><span class="line">                <span class="comment">// allowTableNodeSelection: true</span></span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">TableRow</span>,</span><br><span class="line">            <span class="title class_">TableHeader</span>,</span><br><span class="line">            <span class="title class_">TableCell</span>,</span><br><span class="line">            <span class="title class_">Text</span>,</span><br><span class="line">            <span class="title class_">TaskList</span>,</span><br><span class="line">            <span class="title class_">TaskItem</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="comment">// nested: true,</span></span><br><span class="line">                <span class="title class_">HTMLAttributes</span>: &#123;</span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;list-none&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Link</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="title class_">HTMLAttributes</span>: &#123;</span><br><span class="line">                    <span class="attr">class</span>: <span class="string">&#x27;underline cursor-pointer text-blue-400&#x27;</span>,</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">openOnClick</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="comment">// linkOnPaste: true,</span></span><br><span class="line">                <span class="attr">autolink</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">defaultProtocol</span>: <span class="string">&#x27;https&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="title class_">Highlight</span>.<span class="title function_">configure</span>(&#123;<span class="attr">multicolor</span>: <span class="literal">true</span>&#125;),</span><br><span class="line">            <span class="title class_">Subscript</span>,</span><br><span class="line">            <span class="title class_">Superscript</span>,</span><br><span class="line">            <span class="title class_">TextAlign</span>.<span class="title function_">configure</span>(&#123;</span><br><span class="line">                <span class="attr">types</span>: [<span class="string">&#x27;heading&#x27;</span>, <span class="string">&#x27;paragraph&#x27;</span>],</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">autofocus</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">content</span>: description,</span><br><span class="line">        <span class="attr">editorProps</span>: &#123;</span><br><span class="line">            <span class="attr">attributes</span>: &#123;</span><br><span class="line">                <span class="attr">class</span>:</span><br><span class="line">                    <span class="string">&#x27;p-2 rounded-md border min-h-[150px] border-input bg-back  disabled:cursor-not-allowed disabled:opacity-50&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">onUpdate</span>(<span class="params">&#123;editor&#125;</span>) &#123;</span><br><span class="line">            <span class="title function_">onChange</span>(editor.<span class="title function_">getHTML</span>())</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(editor.<span class="title function_">getHTML</span>())</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 防止编辑器未加载时操作出错</span></span><br><span class="line">    <span class="keyword">const</span> [isEditable, setIsEditable] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (editor) &#123;</span><br><span class="line">            editor.<span class="title function_">setEditable</span>(isEditable)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [isEditable, editor])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27; <span class="attr">flex</span> <span class="attr">flex-col</span> <span class="attr">justify-stretch</span> <span class="attr">min-h-</span>[<span class="attr">250px</span>] <span class="attr">min-w-</span>[<span class="attr">250px</span>]&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* bubble menu, 就是长按拖动鼠标选中内容后会弹出的悬浮工具条 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">BubbleToolbar</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* 回车到新行时会自动出现的浮动工具条 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">FloatingToolbar</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* 编辑器顶部的工具条, 本来我是不想搞的, 这里主要是为了使用table组件 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;control-group flex flex-row flex-wrap gap-2 mb-2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().insertTable(&#123;rows: 3, cols: 3, withHeaderRow: true&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    Insert table</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addColumnBefore().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Add column before</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addColumnAfter().run()&#125;&gt;Add column after</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteColumn().run()&#125;&gt;Delete column</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addRowBefore().run()&#125;&gt;Add row before</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().addRowAfter().run()&#125;&gt;Add row after</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteRow().run()&#125;&gt;Delete row</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().deleteTable().run()&#125;&gt;Delete table</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().mergeCells().run()&#125;&gt;Merge cells</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().splitCell().run()&#125;&gt;Split cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderColumn().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header column</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderRow().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header row</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleHeaderCell().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Toggle header cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().mergeOrSplit().run()&#125;&gt;Merge or split</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setCellAttribute(&#x27;colspan&#x27;, 2).run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Set cell attribute</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().fixTables().run()&#125;&gt;Fix tables</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().goToNextCell().run()&#125;&gt;Go to next cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">p-1</span> <span class="attr">bg-blue-200</span> <span class="attr">rounded-md</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().goToPreviousCell().run()&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                    Go to previous cell</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            &#123;/* 编辑器内容 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">EditorContent</span> <span class="attr">editor</span>=<span class="string">&#123;editor&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            &#123;/* 底部字数统计 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">character-count</span> `&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;editor?.storage.characterCount.characters()&#125; characters</span></span><br><span class="line"><span class="language-xml">                &#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;editor?.storage.characterCount.words()&#125; words</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="menu"><a href="#menu" class="headerlink" title="menu"></a>menu</h1><h2 id="BubbleToolbar"><a href="#BubbleToolbar" class="headerlink" title="BubbleToolbar"></a>BubbleToolbar</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - BubbleToolbar.tsx</span><br></pre></td></tr></table></figure><p>BubbleToolbar就是长按拖动鼠标选中内容后会弹出的悬浮工具条</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240909213219.png" data-fancybox="true"/></div></div><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;use client&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./styled.scss&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">BubbleMenu</span>, <span class="keyword">type</span> <span class="title class_">Editor</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@tiptap/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Toggle</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./ui/toggle&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    <span class="title class_">Heading</span>,</span><br><span class="line">    <span class="title class_">Heading2</span>,</span><br><span class="line">    <span class="title class_">Heading3</span>, <span class="title class_">Heading4</span>,</span><br><span class="line">    <span class="title class_">Italic</span>,</span><br><span class="line">    <span class="title class_">List</span>,</span><br><span class="line">    <span class="title class_">Image</span>,</span><br><span class="line">    <span class="title class_">ListOrdered</span>,</span><br><span class="line">    <span class="title class_">LucideBold</span>,</span><br><span class="line">    <span class="title class_">Minus</span>,</span><br><span class="line">    <span class="title class_">Strikethrough</span>,</span><br><span class="line">    <span class="title class_">Superscript</span>,</span><br><span class="line">    <span class="title class_">Link2</span>,</span><br><span class="line">    <span class="title class_">Link2Off</span>,</span><br><span class="line">    <span class="title class_">Braces</span>,</span><br><span class="line">    <span class="title class_">Brackets</span>, <span class="title class_">SquareCheck</span>, <span class="title class_">Subscript</span>,</span><br><span class="line">    <span class="title class_">AlignJustify</span>, <span class="title class_">AlignLeft</span>, <span class="title class_">AlignRight</span>, <span class="title class_">AlignCenter</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;lucide-react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Select</span>, <span class="title class_">SelectContent</span>, <span class="title class_">SelectItem</span>, <span class="title class_">SelectTrigger</span>, <span class="title class_">SelectValue</span>&#125; <span class="keyword">from</span> <span class="string">&quot;@/components/ui/select&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useCallback&#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Props</span> = &#123;</span><br><span class="line">    <span class="attr">editor</span>: <span class="title class_">Editor</span> | <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BubbleToolbar</span>(<span class="params">&#123;editor&#125;: <span class="title class_">Props</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!editor)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> addImage = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&#x27;URL&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (url) &#123;</span><br><span class="line">            editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">setImage</span>(&#123;<span class="attr">src</span>: url&#125;).<span class="title function_">run</span>()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, [editor])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> setLink = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> previousUrl = editor.<span class="title function_">getAttributes</span>(<span class="string">&#x27;link&#x27;</span>).<span class="property">href</span></span><br><span class="line">        <span class="keyword">const</span> url = <span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&#x27;URL&#x27;</span>, previousUrl)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// cancelled</span></span><br><span class="line">        <span class="keyword">if</span> (url === <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// empty</span></span><br><span class="line">        <span class="keyword">if</span> (url === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">extendMarkRange</span>(<span class="string">&#x27;link&#x27;</span>).<span class="title function_">unsetLink</span>()</span><br><span class="line">                .<span class="title function_">run</span>()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// update link</span></span><br><span class="line">        editor.<span class="title function_">chain</span>().<span class="title function_">focus</span>().<span class="title function_">extendMarkRange</span>(<span class="string">&#x27;link&#x27;</span>).<span class="title function_">setLink</span>(&#123;<span class="attr">href</span>: url&#125;)</span><br><span class="line">            .<span class="title function_">run</span>()</span><br><span class="line">    &#125;, [editor])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">BubbleMenu</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-fit</span> <span class="attr">shadow-md</span> <span class="attr">rounded-lg</span>&#x27;&#125; <span class="attr">editor</span>=<span class="string">&#123;editor&#125;</span> <span class="attr">tippyOptions</span>=<span class="string">&#123;&#123;duration:</span> <span class="attr">100</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bubble-menu flex-wrap rounded-lg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">1</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 1&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">2</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 2&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading2</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">3</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 3&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading3</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">heading</span>&#x27;, &#123;<span class="attr">level:</span> <span class="attr">4</span>&#125;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleHeading(&#123;level: 4&#125;).run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Heading4</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">bold</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleBold().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">LucideBold</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">italic</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleItalic().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Italic</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">strike</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleStrike().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Strikethrough</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">bulletList</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleBulletList().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">List</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">pressed</span>=<span class="string">&#123;editor.isActive(</span>&#x27;<span class="attr">orderedList</span>&#x27;)&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onPressedChange</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                        editor.chain().focus().toggleOrderedList().run()</span></span><br><span class="line"><span class="language-xml">                    &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">ListOrdered</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            console.log(value)</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Purple&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#958DF1&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Red&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#F98181&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Orange&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#FBBC88&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Yellow&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#FAF594&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Blue&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#70CFF8&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Teal&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#94FADB&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Green&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setColor(&#x27;#B9F18D&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Unset color&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetColor().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">theme</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;[</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Purple&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#958DF1&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Red&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#F98181&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Orange&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FBBC88&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Yellow&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FAF594&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Blue&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#70CFF8&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Teal&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#94FADB&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Green&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#B9F18D&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Unset color&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                            ].map((item) =&gt; (</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">value</span>=<span class="string">&#123;item.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">data-testid</span>=<span class="string">&#123;</span>`<span class="attr">set</span>$&#123;<span class="attr">item.name</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">color:</span> <span class="attr">item.val</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        `<span class="attr">bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:brightness-125</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                         $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">textStyle</span>&#x27;, &#123;<span class="attr">color:</span> <span class="attr">item.val</span>&#125;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    // <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setColor(item.val).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                &gt;</span></span><br><span class="line"><span class="language-xml">                                    &#123;item.name&#125;</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            ))&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            console.log(value)</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Purple&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#958DF1&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Red&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#F98181&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Orange&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#ffc078&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Yellow&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#FAF594&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Blue&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#70CFF8&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Teal&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#94FADB&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Green&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().toggleHighlight(&#123;color: &#x27;#B9F18D&#x27;&#125;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;Unset color&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetHighlight().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">highlight</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;[</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Purple&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#958DF1&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Red&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#F98181&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Orange&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FBBC88&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Yellow&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#FAF594&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Blue&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#70CFF8&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Teal&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#94FADB&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Green&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;#B9F18D&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;,</span></span><br><span class="line"><span class="language-xml">                                &#123;</span></span><br><span class="line"><span class="language-xml">                                    name: &#x27;Unset color&#x27;,</span></span><br><span class="line"><span class="language-xml">                                    val: &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                            ].map((item, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">key</span>=<span class="string">&#123;index&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">value</span>=<span class="string">&#123;item.name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">data-testid</span>=<span class="string">&#123;</span>`<span class="attr">set</span>$&#123;<span class="attr">item.name</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        <span class="attr">background:</span> <span class="attr">item.val</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                        `<span class="attr">bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:bg-</span>[$&#123;<span class="attr">item.val</span>&#125;] <span class="attr">focus:brightness-125</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                         $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">textStyle</span>&#x27;, &#123;<span class="attr">color:</span> <span class="attr">item.val</span>&#125;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    &#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                    // <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setColor(item.val).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                &gt;</span></span><br><span class="line"><span class="language-xml">                                    &#123;item.name&#125;</span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            ))&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">inline-block</span> <span class="attr">mx-1</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Select</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">onValueChange</span>=<span class="string">&#123;(value)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                            switch (value) &#123;</span></span><br><span class="line"><span class="language-xml">                                case &#x27;inter&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;comic-sans&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;serif&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;serif&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;monospace&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;monospace&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;cursive&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;cursive&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;css-variable&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;var(--title-font-family)&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;comic-sans-quoted&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;&quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                                case &#x27;unsetFontFamily&#x27;:</span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetFontFamily().run()</span></span><br><span class="line"><span class="language-xml">                                    break</span></span><br><span class="line"><span class="language-xml">                            &#125;</span></span><br><span class="line"><span class="language-xml">                        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">                    &gt;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectTrigger</span> <span class="attr">className</span>=<span class="string">&quot;w-[180px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectValue</span> <span class="attr">placeholder</span>=<span class="string">&#123;</span>&#x27;<span class="attr">font</span> <span class="attr">family</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectTrigger</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setFontFamily(&#x27;Inter&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;Inter&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;inter&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&#123;&#x27;inter&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Inter</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;Comic Sans MS, Comic Sans&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;</span></span><br><span class="line"><span class="language-xml">                                    editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;Comic Sans MS, Comic Sans&#x27;&#125;)</span></span><br><span class="line"><span class="language-xml">                                        ? &#x27;is-active&#x27;</span></span><br><span class="line"><span class="language-xml">                                        : &#x27;&#x27;</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;comic-sans&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&#123;&quot;comic-sans&quot;&#125;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Comic Sans</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;serif&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;serif&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;serif&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;serif&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Serif</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;monospace&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;monospace&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;monospace&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;monospace&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Monospace</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;cursive&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;cursive&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;cursive&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;cursive&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Cursive</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;var(--title-font-family)&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;var(--title-font-family)&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;css-variable&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;css-variable&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                CSS variable</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().setFontFamily(&#x27;&quot;Comic Sans MS&quot;, &quot;Comic Sans&quot;&#x27;).run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                className=&#123;editor.isActive(&#x27;textStyle&#x27;, &#123;fontFamily: &#x27;&quot;Comic Sans&quot;&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;comic-sans-quoted&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;comic-sans-quoted&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Comic Sans quoted</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SelectItem</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="language-xml">                                    editor.chain().focus().unsetFontFamily().run()</span></span><br><span class="line"><span class="language-xml">                                &#125;</span></span><br><span class="line"><span class="language-xml">                                data-test-id=&quot;unsetFontFamily&quot;</span></span><br><span class="line"><span class="language-xml">                                value=&quot;unsetFontFamily&quot;</span></span><br><span class="line"><span class="language-xml">                            &gt;</span></span><br><span class="line"><span class="language-xml">                                Unset font family</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SelectItem</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SelectContent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleCodeBlock().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;`$&#123;editor.isActive(&#x27;codeBlock&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;`&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Braces</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-4</span> <span class="attr">h-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; editor.chain().focus().toggleCode().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    className=&#123;editor.isActive(&#x27;code&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">ChevronsLeftRight</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    size=&#123;&#x27;sm&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; editor.chain().focus().setCodeBlock().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    disabled=&#123;editor.isActive(&#x27;codeBlock&#x27;)&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    className=&#123;&#x27;inline&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">Braces</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-4</span> <span class="attr">h-4</span>&#x27;&#125; /&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleBlockquote().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;`$&#123;editor.isActive(&#x27;blockquote&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;`&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Brackets</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*&lt;Toggle*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    size=&#123;&#x27;sm&#x27;&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    onClick=&#123;() =&gt; () =&gt; editor.chain().focus().setHardBreak().run()&#125;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*&gt;*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*    <span class="tag">&lt;<span class="name">CornerDownLeft</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                &#123;/*<span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span>*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">size</span>=<span class="string">&#123;</span>&#x27;<span class="attr">sm</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setHorizontalRule().run()&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Minus</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Image</span> <span class="attr">onClick</span>=<span class="string">&#123;addImage&#125;</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">m-2</span> <span class="attr">cursor-pointer</span> <span class="attr">h-5</span> <span class="attr">w-5</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleTaskList().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;taskList&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">SquareCheck</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                &#123;/*链接*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Link2</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;setLink&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">h-5</span> <span class="attr">w-5</span> <span class="attr">m-2</span> <span class="attr">cursor-pointer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     $&#123;<span class="attr">editor.isActive</span>(&#x27;<span class="attr">link</span>&#x27;) ? &#x27;<span class="attr">is-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().unsetLink().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    disabled=&#123;!editor.isActive(&#x27;link&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Link2Off</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*上下标*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleSuperscript().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;superscript&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Superscript</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().toggleSubscript().run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#x27;subscript&#x27;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Subscript</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;/*对齐*/&#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;left&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;left&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignLeft</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;center&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;center&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignCenter</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;right&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;right&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignRight</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Toggle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> editor.chain().focus().setTextAlign(&#x27;justify&#x27;).run()&#125;</span></span><br><span class="line"><span class="language-xml">                    className=&#123;editor.isActive(&#123;textAlign: &#x27;justify&#x27;&#125;) ? &#x27;is-active&#x27; : &#x27;&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">                &gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">AlignJustify</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">h-4</span> <span class="attr">w-4</span>&#x27;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Toggle</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">BubbleMenu</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="FloatingToolbar"><a href="#FloatingToolbar" class="headerlink" title="FloatingToolbar"></a>FloatingToolbar</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">- components</span><br><span class="line">    - FloatingToolbar.tsx</span><br></pre></td></tr></table></figure><p>FloatingToolbar就是回车到新行时会自动出现的浮动工具条</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240909214422.png" data-fancybox="true"/></div></div><h1 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h1><p>访问 <a href="http://localhost:3000/blog/xxx/write">http://localhost:3000/blog/xxx/write</a></p><p>下一步, 我们将引入prisma来操作数据库, 将这些富文本存入数据库中</p>]]></content>
    
    
    <summary type="html">nextjs使用tiptap富文本编辑器</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>什么是AI - 科普</title>
    <link href="https://malcode-site.github.io/2024/08/29/ai/what-is-AI/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/08/29/ai/what-is-AI/zh-cn/</id>
    <published>2024-08-29T06:28:22.000Z</published>
    <updated>2024-09-09T13:03:53.451Z</updated>
    
    <content type="html"><![CDATA[<h1 id="AI-人工智能"><a href="#AI-人工智能" class="headerlink" title="AI - 人工智能"></a>AI - 人工智能</h1><p>关于人工智能的定义, 光是在网络上搜索就有至少5种, 我的看法是, 人工智能就是通过机器学习算法, 在丰富的大量的数据集上进行训练学习,<br>从而让机器能够处理各种复杂任务, 表现出和人相似的”智能”.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="google cloud上的说明" href="https://cloud.google.com/learn/what-is-artificial-intelligence?hl=zh-CN" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">google cloud上的说明</span><span class="cap link footnote">https://cloud.google.com/learn/what-is-artificial-intelligence?hl=zh-CN</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/475656/google-color.svg"></div></div></a></div><p>我将介绍 <code>感知机</code>, <code>前馈神经网络(FNN)</code>, <code>卷积神经网络(CNN)</code>, <code>循环神经网络(RNN)</code>, <code>长短期记忆(LSTM)</code>,<br>并介绍神经网络基本的学习训练的流程和原理, 使用pytorch进行代码演示</p><h1 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h1><p>假设我们的神经网络是y&#x3D;f(x)这样的函数,<br>那么数据集就是存储了许多组历史数据的文件,其中每一组数据包含输入到函数中的特征属性值(x),<br>和这些x对应的目标属性值(y), 通过将这些数据放入神经网络, 神经网络从数据中提取出某种模式, 从而可以泛化到新数据上,<br>也就是说, 可以通过学习历史数据, 来获得可以预测目标值的能力. (这实际上和人脑的学习方式十分相似)</p><h1 id="最基本的AI训练流程"><a href="#最基本的AI训练流程" class="headerlink" title="最基本的AI训练流程"></a>最基本的AI训练流程</h1><div class="tag-plugin video" style="max-width:100%;">  <video controls preload>  <source src="https://raw.githubusercontent.com/malred/malcode-site-photods/master/2024-09-01%2021-32-37.mp4" type="video/mp4">Your browser does not support the video tag.  </video>  </div>  <h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>我们可以看到, 基本的ai训练流程就是:</p><ol><li>准备数据集, 划分测试和训练集</li><li>定义模型</li><li>根据训练集进行训练</li><li>用测试集测试模型</li></ol><h1 id="感知机"><a href="#感知机" class="headerlink" title="感知机"></a>感知机</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>神经网络中每一层有多个始建于, 而每个神经元可以看作一个感知机,<br>感知机是一种二元线性分类器, 它接收多个输入信号，输出一个信号(0或1), 0表示不传递信号, 1表示传递信号(被激活)</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240909205553.png" data-fancybox="true"/></div></div><p>用数学式子表达: y&#x3D;(w1x1+w2x2+b &gt;&#x3D; θ) &#x3D; 1, y&#x3D;(w1x1+w2x2+b &lt; θ) &#x3D; 0</p><p>w是权重, 和x相乘, 表示对应x的重要程度, 越大则越重要</p><p>b是偏置, 用来调整神经元(即感知机)被激活的容易程度</p><p>θ是神经元被激活的临界点, 超过了就可以输出信号1, 否则输出0</p><h2 id="感知机的问题"><a href="#感知机的问题" class="headerlink" title="感知机的问题"></a>感知机的问题</h2><p>感知机可以做到</p>]]></content>
    
    
    <summary type="html">什么是AI - 科普</summary>
    
    
    
    <category term="ai" scheme="https://malcode-site.github.io/categories/ai/"/>
    
    
    <category term="ai" scheme="https://malcode-site.github.io/tags/ai/"/>
    
  </entry>
  
  <entry>
    <title>nextjs使用next-themes实现明亮黑暗主题切换</title>
    <link href="https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/zh-cn/</id>
    <published>2024-08-27T00:54:17.000Z</published>
    <updated>2024-08-27T08:02:01.922Z</updated>
    
    <content type="html"><![CDATA[<h1 id="明亮黑暗主题"><a href="#明亮黑暗主题" class="headerlink" title="明亮黑暗主题"></a>明亮黑暗主题</h1><p>明暗主题就是整体颜色是亮色或暗色的主题, 根据用户使用场景(比如白天或夜晚), 提供切换选项来切换系统整体颜色, 让用户视觉上拥有更舒适的体验</p><h1 id="git仓库"><a href="#git仓库" class="headerlink" title="git仓库"></a>git仓库</h1><p>本章是nextjs入门课程系列的一部分, 查看以下git仓库, 并切换到extra1分支, 可查看本章代码</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="安装next-themes"><a href="#安装next-themes" class="headerlink" title="安装next-themes"></a>安装next-themes</h1><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install next-themes</span><br></pre></td></tr></table></figure></div></div><h1 id="配置tailwind主题支持"><a href="#配置tailwind主题支持" class="headerlink" title="配置tailwind主题支持"></a>配置tailwind主题支持</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123;<span class="title class_">Config</span>&#125; <span class="keyword">from</span> <span class="string">&quot;tailwindcss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="comment">// 通过类名的方式配置mode</span></span><br><span class="line">    <span class="attr">darkMode</span>: [<span class="string">&#x27;selector&#x27;</span>, <span class="string">&#x27;.dark&#x27;</span>],</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config;</span><br></pre></td></tr></table></figure><h1 id="在layout-tsx中添加provider"><a href="#在layout-tsx中添加provider" class="headerlink" title="在layout.tsx中添加provider"></a>在layout.tsx中添加provider</h1><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/layout.tsx</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">ThemeProvider</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">suppressHydrationWarning</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*提供主题状态*/&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Navbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Footbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h1 id="在navbar中添加切换按钮"><a href="#在navbar中添加切换按钮" class="headerlink" title="在navbar中添加切换按钮"></a>在navbar中添加切换按钮</h1><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"><span class="string">&quot;use client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useTheme&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取当前主题和设置主题的方法</span></span><br><span class="line">    <span class="keyword">const</span> &#123;setTheme, resolvedTheme&#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-green-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">sticky</span> <span class="attr">w-full</span> <span class="attr">h-20</span> <span class="attr">flex</span> <span class="attr">items-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">flex-1</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;resolvedTheme !== &#x27;dark&#x27; ?</span></span><br><span class="line"><span class="language-xml">                // 切换颜色主题的按钮</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">size-10</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(&#x27;dark&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                     src=&quot;https://www.svgrepo.com/show/489517/mode-dark.svg&quot;</span></span><br><span class="line"><span class="language-xml">                     alt=&quot;to dark theme mode&quot;/&gt; :</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">size-10</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(&#x27;light&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                     src=&quot;https://www.svgrepo.com/show/489519/mode-light.svg&quot;</span></span><br><span class="line"><span class="language-xml">                     alt=&quot;to light theme mode&quot;/&gt;</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><blockquote><p>关于”use client”: 这是启用了客户端的功能, 比如js交互&#x2F;浏览器storage&#x2F;cookie等</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="在nextjs文档中学习它" href="https://nextjs.org/docs/app/building-your-application/rendering/client-components" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">在nextjs文档中学习它</span><span class="cap link footnote">https://nextjs.org/docs/app/building-your-application/rendering/client-components</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><p>查看效果:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827092437.png" alt="明亮模式" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">明亮模式</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827092530.png" alt="黑暗模式" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">黑暗模式</span></div></div><h1 id="针对黑暗模式添加样式"><a href="#针对黑暗模式添加样式" class="headerlink" title="针对黑暗模式添加样式"></a>针对黑暗模式添加样式</h1><p>你是否发现了, 暗黑模式下文字样式改变了, 而有些我们已经指定了样式(className中)的没有改变.</p><p>我们可以使用dark:来配置黑暗模式下的样式</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"><span class="string">&quot;use client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useTheme&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            `<span class="attr">bg-green-200</span> <span class="attr">dark:bg-green-800</span> <span class="attr">...</span>`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*...*/&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// components/footbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Footbar</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                `<span class="attr">bg-gray-200</span> <span class="attr">dark:bg-gray-800</span> <span class="attr">...</span>`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            footbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端组件可以使用async </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*</span></span><br><span class="line"><span class="language-xml">                prose让文本中的标题有对应的样式</span></span><br><span class="line"><span class="language-xml">                dark:prose-invert是让prose适配黑暗主题</span></span><br><span class="line"><span class="language-xml">             */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">prose</span> <span class="attr">dark:prose-invert</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>效果:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827160029.png" data-fancybox="true"/></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827160012.png" data-fancybox="true"/></div></div><h1 id="结束"><a href="#结束" class="headerlink" title="结束"></a>结束</h1><p>谢谢观看!</p>]]></content>
    
    
    <summary type="html">nextjs使用next-themes实现明亮黑暗主题切换</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>Next.js uses next-themes to implement a bright and dark theme switcher.</title>
    <link href="https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/en/"/>
    <id>https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/en/</id>
    <published>2024-08-27T00:54:17.000Z</published>
    <updated>2024-08-27T08:10:46.853Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Bright-and-Dark-Themes"><a href="#Bright-and-Dark-Themes" class="headerlink" title="Bright and Dark Themes"></a>Bright and Dark Themes</h1><p>Bright and dark themes refer to themes with light or dark color schemes. Depending on the user’s context<br>(e.g., daytime or nighttime), providing an option to switch the overall system colors can enhance the visual comfort for<br>users.</p><h1 id="Git-Repository"><a href="#Git-Repository" class="headerlink" title="Git Repository"></a>Git Repository</h1><p>This chapter is part of the Next.js beginner course series. To view the code for this chapter, check out the following<br>git repository and switch to the extra1 branch:</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="install-next-themes"><a href="#install-next-themes" class="headerlink" title="install next-themes"></a>install next-themes</h1><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install next-themes</span><br></pre></td></tr></table></figure></div></div><h1 id="Configure-Tailwind-Theme-Support"><a href="#Configure-Tailwind-Theme-Support" class="headerlink" title="Configure Tailwind Theme Support"></a>Configure Tailwind Theme Support</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123;<span class="title class_">Config</span>&#125; <span class="keyword">from</span> <span class="string">&quot;tailwindcss&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="comment">// Configure Mode via Class Names</span></span><br><span class="line">    <span class="attr">darkMode</span>: [<span class="string">&#x27;selector&#x27;</span>, <span class="string">&#x27;.dark&#x27;</span>],</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config;</span><br></pre></td></tr></table></figure><h1 id="Add-a-Provider-in-layout-tsx"><a href="#Add-a-Provider-in-layout-tsx" class="headerlink" title="Add a Provider in layout.tsx"></a>Add a Provider in layout.tsx</h1><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/layout.tsx</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">ThemeProvider</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">suppressHydrationWarning</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*Provide Theme State*/&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Navbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Footbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h1 id="Add-a-Switch-Button-in-the-Navbar"><a href="#Add-a-Switch-Button-in-the-Navbar" class="headerlink" title="Add a Switch Button in the Navbar"></a>Add a Switch Button in the Navbar</h1><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"><span class="string">&quot;use client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useTheme&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// Methods to Get the Current Theme and Set the Theme</span></span><br><span class="line">    <span class="keyword">const</span> &#123;setTheme, resolvedTheme&#125; = <span class="title function_">useTheme</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-green-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">sticky</span> <span class="attr">w-full</span> <span class="attr">h-20</span> <span class="attr">flex</span> <span class="attr">items-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">flex-1</span>&#x27;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;resolvedTheme !== &#x27;dark&#x27; ?</span></span><br><span class="line"><span class="language-xml">                // Button to Switch Color Themes</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">size-10</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(&#x27;dark&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                     src=&quot;https://www.svgrepo.com/show/489517/mode-dark.svg&quot;</span></span><br><span class="line"><span class="language-xml">                     alt=&quot;to dark theme mode&quot;/&gt; :</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">size-10</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                     <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(&#x27;light&#x27;)&#125;</span></span><br><span class="line"><span class="language-xml">                     src=&quot;https://www.svgrepo.com/show/489519/mode-light.svg&quot;</span></span><br><span class="line"><span class="language-xml">                     alt=&quot;to light theme mode&quot;/&gt;</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><blockquote><p>Regarding “use client”: This enables client-side features such as JavaScript interactions, browser storage (Storage),<br>cookies, etc.</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="Learn about it in the Next.js documentation." href="https://nextjs.org/docs/app/building-your-application/rendering/client-components" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">Learn about it in the Next.js documentation.</span><span class="cap link footnote">https://nextjs.org/docs/app/building-your-application/rendering/client-components</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><h2 id="Result"><a href="#Result" class="headerlink" title="Result:"></a>Result:</h2><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827092437.png" alt="light" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">light</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827092530.png" alt="dark" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">dark</span></div></div><h1 id="Add-Styles-for-Dark-Mode"><a href="#Add-Styles-for-Dark-Mode" class="headerlink" title="Add Styles for Dark Mode"></a>Add Styles for Dark Mode</h1><p>Have you noticed that the text style changes in dark mode, while some styles we have specified (in className) remain<br>unchanged?</p><p>We can use <code>dark:</code> to configure styles for dark mode.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"><span class="string">&quot;use client&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;useTheme&#125; <span class="keyword">from</span> <span class="string">&quot;next-themes&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            `<span class="attr">bg-green-200</span> <span class="attr">dark:bg-green-800</span> <span class="attr">...</span>`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*...*/&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// components/footbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Footbar</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                `<span class="attr">bg-gray-200</span> <span class="attr">dark:bg-gray-800</span> <span class="attr">...</span>`</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            footbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125;</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*</span></span><br><span class="line"><span class="language-xml">                Prose ensures that headings within the text have corresponding styles.</span></span><br><span class="line"><span class="language-xml">                `dark:prose-invert` is used to adapt prose for dark themes.</span></span><br><span class="line"><span class="language-xml">             */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">prose</span> <span class="attr">dark:prose-invert</span>`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                 <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Result-1"><a href="#Result-1" class="headerlink" title="Result:"></a>Result:</h2><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827160029.png" data-fancybox="true"/></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240827160012.png" data-fancybox="true"/></div></div><h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>Thanks for watch!</p>]]></content>
    
    
    <summary type="html">Next.js uses next-themes to implement a bright and dark theme switcher.</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>使用Clap创建rust前端项目初始化脚手架</title>
    <link href="https://malcode-site.github.io/2024/08/26/rust/rust-project-cli/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/08/26/rust/rust-project-cli/zh-cn/</id>
    <published>2024-08-26T12:18:18.000Z</published>
    <updated>2024-08-29T04:50:31.400Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本文目标"><a href="#本文目标" class="headerlink" title="本文目标"></a>本文目标</h1><p>该文章将带你使用rust和clap库实现一个创建前端vite项目的脚手架工具</p><h1 id="git仓库"><a href="#git仓库" class="headerlink" title="git仓库"></a>git仓库</h1><p>本文基于我的开源项目rust-init-cli改编</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="malred: rust-init-cli" href="https://github.com/malred/rust-init-cli.git" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">malred: rust-init-cli</span><span class="cap link footnote">https://github.com/malred/rust-init-cli.git</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="第一步-初始化项目"><a href="#第一步-初始化项目" class="headerlink" title="第一步: 初始化项目"></a>第一步: 初始化项目</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cargo init rust-vite-cli</span><br><span class="line">cd rust-vite-cli</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果你用vscode, 可以用这个命令打开</span></span><br><span class="line">code . </span><br></pre></td></tr></table></figure></div></div><h2 id="依赖安装"><a href="#依赖安装" class="headerlink" title="依赖安装"></a>依赖安装</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cargo add clap</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">cargo add clap -F derive </span><br></pre></td></tr></table></figure></div></div><h1 id="第二步-clap读取命令行"><a href="#第二步-clap读取命令行" class="headerlink" title="第二步: clap读取命令行"></a>第二步: clap读取命令行</h1><div class="tag-plugin link dis-select"><a class="link-card plain" title="clap - cargo" href="https://docs.rs/clap/latest/clap/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">clap - cargo</span><span class="cap link footnote">https://docs.rs/clap/latest/clap/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374056/rust.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="clap文档" href="https://rust-cli.github.io/book/index.html" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">clap文档</span><span class="cap link footnote">https://rust-cli.github.io/book/index.html</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h2 id="Args结构体"><a href="#Args结构体" class="headerlink" title="Args结构体"></a>Args结构体</h2><p>创建一个结构体来接收命令行参数</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Parser)]</span></span><br><span class="line"><span class="meta">#[command()]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Args</span> &#123;</span><br><span class="line">    <span class="meta">#[command(subcommand)]</span></span><br><span class="line">    command: <span class="type">Option</span>&lt;Commands&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>关于subcommand, 大概就是可以用在结构体和枚举等类型上</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/// 从源代码找的注释</span><br><span class="line">/// Parse a sub-command into a user-defined enum.</span><br><span class="line">///</span><br><span class="line">/// Implementing this trait lets a parent container delegate subcommand behavior to `Self`.</span><br><span class="line">/// with:</span><br><span class="line">/// - `#[command(subcommand)] field: SubCmd`: Attribute can be used with either struct fields or enum</span><br><span class="line">///   variants that impl `Subcommand`.</span><br><span class="line">/// - `#[command(flatten)] Variant(SubCmd)`: Attribute can only be used with enum variants that impl</span><br><span class="line">///   `Subcommand`.</span><br><span class="line">///</span><br><span class="line">/// **NOTE:** Deriving requires the `derive` feature flag</span><br></pre></td></tr></table></figure><h2 id="Commands结构体"><a href="#Commands结构体" class="headerlink" title="Commands结构体"></a>Commands结构体</h2><p>我们实现Commands结构体, 结构体的属性会对应命令</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// clap可以通过反射宏读取注释, 在help时打印出来</span></span><br><span class="line"><span class="meta">#[derive(Subcommand)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Commands</span> &#123;</span><br><span class="line">    <span class="comment">/// create-vite</span></span><br><span class="line">    CreateVite</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>接下来, 在main函数中读取</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">cli</span> = Args::<span class="title function_ invoke__">parse</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">match</span> cli.command &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(Commands::CreateVite) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;create vite!&quot;</span>),</span><br><span class="line">        <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Run with --help to see instructions.&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>运行!</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cargo run -- create-vite</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">cargo run --release create-vite</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829084102.png" alt="如果运行help命令" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">如果运行help命令</span></div></div><h1 id="第三步-从vite脚手架中复制项目模板"><a href="#第三步-从vite脚手架中复制项目模板" class="headerlink" title="第三步: 从vite脚手架中复制项目模板"></a>第三步: 从vite脚手架中复制项目模板</h1><p>我们并没有采用从网络获取前端项目模板的实现方法, 而是使用将前端项目模板保存到目录, 当创建项目时再复制到目标目录的实现方式,<br>这种方式当然有坏处, 比如会让项目过大, 要手动将目录放到build后的文件夹等, 但是好处是实现起来比较简单方便</p><h2 id="使用vite脚手架创建项目"><a href="#使用vite脚手架创建项目" class="headerlink" title="使用vite脚手架创建项目"></a>使用vite脚手架创建项目</h2><p>我们先用vite脚手架创建项目, 然后再将项目复制到我们项目的public文件夹中</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure></div></div><p>我们只创建vue+js&#x2F;vue+ts&#x2F;react+js&#x2F;react+ts这4个项目</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240828231136.png" alt="创建示例" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">创建示例</span></div></div><p>创建完后, 复制到项目的public文件夹下</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240828231349.png" alt="目录结构如图" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">目录结构如图</span></div></div><h1 id="第四步-编写需要用到的方法"><a href="#第四步-编写需要用到的方法" class="headerlink" title="第四步: 编写需要用到的方法"></a>第四步: 编写需要用到的方法</h1><p>创建common.rs, 我们在其中存放通用的工具类方法</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    common.rs</span><br><span class="line">    main.rs</span><br></pre></td></tr></table></figure><p>将common模块引入main.rs</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> common;</span><br></pre></td></tr></table></figure></div></div><h2 id="读取命令行输入的方法"><a href="#读取命令行输入的方法" class="headerlink" title="读取命令行输入的方法"></a>读取命令行输入的方法</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取输入</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">read_line</span>() <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">    <span class="comment">// 用来存放用户输入的字符串</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">input</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    <span class="comment">// 读取命令行输入</span></span><br><span class="line">    std::io::<span class="title function_ invoke__">stdin</span>()</span><br><span class="line">        .<span class="title function_ invoke__">read_line</span>(&amp;<span class="keyword">mut</span> input)</span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Stdin not working&quot;</span>);</span><br><span class="line">    input.<span class="title function_ invoke__">trim</span>().<span class="title function_ invoke__">to_string</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="复制文件到指定目录的方法"><a href="#复制文件到指定目录的方法" class="headerlink" title="复制文件到指定目录的方法"></a>复制文件到指定目录的方法</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"><span class="keyword">use</span> std::&#123;fs, io, path::Path&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 复制文件夹到指定路径</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">copy_dir_all</span>(src: <span class="keyword">impl</span> <span class="title class_">AsRef</span>&lt;Path&gt;, dst: <span class="keyword">impl</span> <span class="title class_">AsRef</span>&lt;Path&gt;) <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// fs::create_dir_all(&amp;dst)?;</span></span><br><span class="line">    fs::<span class="title function_ invoke__">create_dir_all</span>(&amp;dst).<span class="title function_ invoke__">expect</span>(<span class="string">&quot;创建dst目录失败&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// println!(&quot;遍历&quot;);</span></span><br><span class="line">    fs::<span class="title function_ invoke__">read_dir</span>(&amp;src).<span class="title function_ invoke__">expect</span>(<span class="string">&quot;找不到src目录&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">entry</span> <span class="keyword">in</span> fs::<span class="title function_ invoke__">read_dir</span>(src)? &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">entry</span> = entry?;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">ty</span> = entry.<span class="title function_ invoke__">file_type</span>()?;</span><br><span class="line">        <span class="keyword">if</span> ty.<span class="title function_ invoke__">is_dir</span>() &#123;</span><br><span class="line">            <span class="title function_ invoke__">copy_dir_all</span>(entry.<span class="title function_ invoke__">path</span>(), dst.<span class="title function_ invoke__">as_ref</span>().<span class="title function_ invoke__">join</span>(entry.<span class="title function_ invoke__">file_name</span>()))?;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fs::<span class="title function_ invoke__">copy</span>(entry.<span class="title function_ invoke__">path</span>(), dst.<span class="title function_ invoke__">as_ref</span>().<span class="title function_ invoke__">join</span>(entry.<span class="title function_ invoke__">file_name</span>()))?;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// println!(&quot;copy dir done.&quot;);</span></span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="获取运行时目录位置的方法"><a href="#获取运行时目录位置的方法" class="headerlink" title="获取运行时目录位置的方法"></a>获取运行时目录位置的方法</h2><p>我原本希望能让程序在运行时找到src下的public文件夹, 但是发现不行, 后面找到可以获取运行时目录的方法,<br>这样就可以把public文件复制到target下的debug或release里, 让程序不管在什么地方运行都可以找到public里的文件,<br>并开始复制</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">target/</span><br><span class="line">    cargo run运行时的current_exe目录</span><br><span class="line">    debug/</span><br><span class="line">        public/...</span><br><span class="line">    cargo build之后运行exe时的current_exe目录</span><br><span class="line">    release/</span><br><span class="line">        public/...</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"><span class="keyword">use</span> std::&#123;fs, path::Path, env::current_exe&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取运行时目录</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">current_exe_pkg</span>() <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pkg_name</span> = <span class="built_in">env!</span>(<span class="string">&quot;CARGO_PKG_NAME&quot;</span>);</span><br><span class="line">    <span class="comment">// println!(&quot;&#123;pkg_name&#125;.exe&quot;);</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pkg_name</span> = pkg_name.<span class="title function_ invoke__">to_string</span>() + <span class="string">&quot;.exe&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取当前目录的路径</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">current_exe</span> = <span class="title function_ invoke__">current_exe</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    current_exe.<span class="title function_ invoke__">display</span>().<span class="title function_ invoke__">to_string</span>().<span class="title function_ invoke__">replace</span>(&amp;pkg_name, <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="关于env!的解释" href="https://doc.rust-lang.org/std/env/index.html" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">关于env!的解释</span><span class="cap link footnote">https://doc.rust-lang.org/std/env/index.html</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374056/rust.svg"></div></div></a></div><h1 id="第五步-创建项目的逻辑"><a href="#第五步-创建项目的逻辑" class="headerlink" title="第五步: 创建项目的逻辑"></a>第五步: 创建项目的逻辑</h1><p>在做完了前面的准备工作后, 终于要开始编写了创建项目的逻辑了. 这一步的内容都放在vite.rs里</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">    vite.rs</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> vite;</span><br></pre></td></tr></table></figure></div></div><h2 id="保存用户输入的结构体"><a href="#保存用户输入的结构体" class="headerlink" title="保存用户输入的结构体"></a>保存用户输入的结构体</h2><p>为了保存用户输入, 以便后续根据输入的选项创建不同的项目, 我们需要一个结构体来保存这些数据</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户使用什么框架</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">FrameworkType</span> &#123;</span><br><span class="line">    React,</span><br><span class="line">    Vue,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户是否使用ts</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">VariantType</span> &#123;</span><br><span class="line">    Javascript,</span><br><span class="line">    Typescript,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">UserSelected</span> &#123;</span><br><span class="line">    framework_type: FrameworkType,</span><br><span class="line">    variant_type: VariantType,</span><br><span class="line">    project_name: <span class="type">String</span>, <span class="comment">// 项目名称</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="为结构体添加方法"><a href="#为结构体添加方法" class="headerlink" title="为结构体添加方法"></a>为结构体添加方法</h2><p>我们需要两个方法, 一个是创建结构体的方法, 一个是创建项目的方法</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"><span class="keyword">use</span> std::path::Path;</span><br><span class="line"><span class="keyword">use</span> crate::common::&#123;copy_dir_all, current_exe_pkg, read_line&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">UserSelected</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(project_name: &amp;<span class="type">str</span>, framework: &amp;<span class="type">str</span>, variant: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">framework_type</span> = <span class="keyword">match</span> framework &#123;</span><br><span class="line">            <span class="string">&quot;react&quot;</span> =&gt; &#123;</span><br><span class="line">                FrameworkType::React</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;vue&quot;</span> =&gt; &#123;</span><br><span class="line">                FrameworkType::Vue</span><br><span class="line">            &#125;</span><br><span class="line">            _ =&gt; &#123;</span><br><span class="line">                <span class="comment">// panic!(&quot;No such framework type&quot;)</span></span><br><span class="line">                <span class="comment">// default</span></span><br><span class="line">                FrameworkType::React</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">variant_type</span> = <span class="keyword">match</span> variant &#123;</span><br><span class="line">            <span class="string">&quot;javascript&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Javascript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;typescript&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;js&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Javascript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;ts&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">            _ =&gt; &#123;</span><br><span class="line">                <span class="comment">// panic!(&quot;No such variant type&quot;)</span></span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="keyword">if</span> project_name.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line">            <span class="string">&quot;vite-project&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; project_name &#125;;</span><br><span class="line"></span><br><span class="line">        UserSelected &#123;</span><br><span class="line">            project_name: project_name.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">            framework_type: framework_type,</span><br><span class="line">            variant_type: variant_type,</span><br><span class="line">            <span class="comment">// file_name: &quot;&quot;.to_string(),</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建文件</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">init</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">path</span> = <span class="string">&quot;public/vite/&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span>.framework_type &#123;</span><br><span class="line">            FrameworkType::React =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;react&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            FrameworkType::Vue =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        path += <span class="string">&quot;-&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span>.variant_type &#123;</span><br><span class="line">            VariantType::Javascript =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;js&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            VariantType::Typescript =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;ts&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;复制 &#123;&#125;&quot;</span>, &amp;(<span class="title function_ invoke__">current_exe_pkg</span>() + &amp;path));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo: 从网络上下载 或 调用cmd git clone</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">copy_dir_all</span>(</span><br><span class="line">            Path::<span class="title function_ invoke__">new</span>(</span><br><span class="line">                &amp;(<span class="title function_ invoke__">current_exe_pkg</span>() + &amp;path)</span><br><span class="line">            ),</span><br><span class="line">            Path::<span class="title function_ invoke__">new</span>(&amp;<span class="keyword">self</span>.project_name),</span><br><span class="line">        ).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="询问并接收用户输入"><a href="#询问并接收用户输入" class="headerlink" title="询问并接收用户输入"></a>询问并接收用户输入</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">create_vite_project</span>() &#123;</span><br><span class="line">    <span class="comment">// project name</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;your project name? &#123;&#125;&quot;</span>, <span class="string">&quot;vite-project&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="title function_ invoke__">read_line</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="keyword">if</span> project_name.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line">        <span class="string">&quot;vite-project&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        &amp;project_name</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;project_name));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// select a framework</span></span><br><span class="line">    <span class="comment">// react vue ...</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;select a framework: (default: react)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;react&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;vue&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">framework</span> = <span class="title function_ invoke__">read_line</span>().<span class="title function_ invoke__">to_lowercase</span>();</span><br><span class="line">    framework = <span class="keyword">match</span> framework.<span class="title function_ invoke__">as_str</span>() &#123;</span><br><span class="line">        <span class="string">&quot;r&quot;</span> =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;react&quot;</span> =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;v&quot;</span> =&gt; <span class="string">&quot;vue&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;vue&quot;</span> =&gt; <span class="string">&quot;vue&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        _ =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;framework));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// select a variant</span></span><br><span class="line">    <span class="comment">// javascript typescript ...</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;select a variant: (default: ts)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;typescript(ts)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;javascript(js)&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">variant</span> = <span class="title function_ invoke__">read_line</span>().<span class="title function_ invoke__">to_lowercase</span>();</span><br><span class="line">    variant = <span class="keyword">match</span> variant.<span class="title function_ invoke__">as_str</span>() &#123;</span><br><span class="line">        <span class="string">&quot;ts&quot;</span> =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;typescript&quot;</span> =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;js&quot;</span> =&gt; <span class="string">&quot;javascript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;javascript&quot;</span> =&gt; <span class="string">&quot;javascript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        _ =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;variant));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">user_select</span> = UserSelected::<span class="title function_ invoke__">new</span>(&amp;project_name, &amp;framework, &amp;variant);</span><br><span class="line"></span><br><span class="line">    user_select.<span class="title function_ invoke__">init</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h1 id="第六步-测试"><a href="#第六步-测试" class="headerlink" title="第六步: 测试"></a>第六步: 测试</h1><h2 id="修改main-rs"><a href="#修改main-rs" class="headerlink" title="修改main.rs"></a>修改main.rs</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">cli</span> = Args::<span class="title function_ invoke__">parse</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> cli.command &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(Commands::CreateVite) =&gt; <span class="title function_ invoke__">create_vite_project</span>(),</span><br><span class="line">        <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Run with --help to see instructions.&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="测试cargo-run"><a href="#测试cargo-run" class="headerlink" title="测试cargo run"></a>测试cargo run</h2><p>将public目录移动到target&#x2F;debug目录</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829093737.png" data-fancybox="true"/></div></div><p>测试cargo run时能否成功</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo run -- create-vite</span><br></pre></td></tr></table></figure></div></div><p>可以看到在项目根目录成功创建了vite-project目录</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829093839.png" data-fancybox="true"/></div></div><h2 id="测试cargo-build后的exe"><a href="#测试cargo-build后的exe" class="headerlink" title="测试cargo build后的exe"></a>测试cargo build后的exe</h2><p>先复制public目录到target&#x2F;release目录</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829094019.png" data-fancybox="true"/></div></div><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cargo build --release</span><br><span class="line">.\target\release\rust-vite-cli.exe create-vite</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829124632.png" data-fancybox="true"/></div></div><h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>接下来, 你可以将release目录的文件复制到系统的任意目录, 然后将其配置到系统环境变量, 就可以随时随地运行 rust-vite-cli<br>create-vite 来创建前端项目了.</p><p>感谢观看</p>]]></content>
    
    
    <summary type="html">使用Clap创建rust前端项目初始化脚手架</summary>
    
    
    
    <category term="rust" scheme="https://malcode-site.github.io/categories/rust/"/>
    
    <category term="CLI" scheme="https://malcode-site.github.io/categories/rust/CLI/"/>
    
    <category term="command app" scheme="https://malcode-site.github.io/categories/rust/CLI/command-app/"/>
    
    
    <category term="rust" scheme="https://malcode-site.github.io/tags/rust/"/>
    
    <category term="CLI" scheme="https://malcode-site.github.io/tags/CLI/"/>
    
    <category term="command app" scheme="https://malcode-site.github.io/tags/command-app/"/>
    
  </entry>
  
  <entry>
    <title>Creating a Rust Front-End Project Initialization Scaffolding Using Clap</title>
    <link href="https://malcode-site.github.io/2024/08/26/rust/rust-project-cli/en/"/>
    <id>https://malcode-site.github.io/2024/08/26/rust/rust-project-cli/en/</id>
    <published>2024-08-26T12:18:18.000Z</published>
    <updated>2024-08-29T06:15:34.105Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Objective-of-this-Article"><a href="#Objective-of-this-Article" class="headerlink" title="Objective of this Article"></a>Objective of this Article</h1><p>This article will guide you through using Rust and the clap library to create a scaffolding tool for generating<br>front-end Vite projects.</p><h1 id="Git-Repository"><a href="#Git-Repository" class="headerlink" title="Git Repository"></a>Git Repository</h1><p>This article is adapted from my open-source project rust-init-cli.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="malred: rust-init-cli" href="https://github.com/malred/rust-init-cli.git" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">malred: rust-init-cli</span><span class="cap link footnote">https://github.com/malred/rust-init-cli.git</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="Step-One-Initializing-the-Project"><a href="#Step-One-Initializing-the-Project" class="headerlink" title="Step One: Initializing the Project"></a>Step One: Initializing the Project</h1><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cargo init rust-vite-cli</span><br><span class="line">cd rust-vite-cli</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">If you are using VSCode, you can use this <span class="built_in">command</span> to open it.</span></span><br><span class="line">code . </span><br></pre></td></tr></table></figure></div></div><h2 id="Dependency-Installation"><a href="#Dependency-Installation" class="headerlink" title="Dependency Installation"></a>Dependency Installation</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cargo add clap</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">cargo add clap -F derive </span><br></pre></td></tr></table></figure></div></div><h1 id="Step-Two-Using-Clap-to-Read-the-Command-Line"><a href="#Step-Two-Using-Clap-to-Read-the-Command-Line" class="headerlink" title="Step Two: Using Clap to Read the Command Line"></a>Step Two: Using Clap to Read the Command Line</h1><div class="tag-plugin link dis-select"><a class="link-card plain" title="clap - cargo" href="https://docs.rs/clap/latest/clap/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">clap - cargo</span><span class="cap link footnote">https://docs.rs/clap/latest/clap/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374056/rust.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="clap文档" href="https://rust-cli.github.io/book/index.html" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">clap文档</span><span class="cap link footnote">https://rust-cli.github.io/book/index.html</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h2 id="Args-Struct"><a href="#Args-Struct" class="headerlink" title="Args Struct"></a>Args Struct</h2><p>Create a struct to receive command line arguments.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Parser)]</span></span><br><span class="line"><span class="meta">#[command()]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Args</span> &#123;</span><br><span class="line">    <span class="meta">#[command(subcommand)]</span></span><br><span class="line">    command: <span class="type">Option</span>&lt;Commands&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Regarding subcommands, they can generally be used with types such as structs and enumerations.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/// Comments found in the source code.</span><br><span class="line">/// Parse a sub-command into a user-defined enum.</span><br><span class="line">///</span><br><span class="line">/// Implementing this trait lets a parent container delegate subcommand behavior to `Self`.</span><br><span class="line">/// with:</span><br><span class="line">/// - `#[command(subcommand)] field: SubCmd`: Attribute can be used with either struct fields or enum</span><br><span class="line">///   variants that impl `Subcommand`.</span><br><span class="line">/// - `#[command(flatten)] Variant(SubCmd)`: Attribute can only be used with enum variants that impl</span><br><span class="line">///   `Subcommand`.</span><br><span class="line">///</span><br><span class="line">/// **NOTE:** Deriving requires the `derive` feature flag</span><br></pre></td></tr></table></figure><h2 id="Commands-Struct"><a href="#Commands-Struct" class="headerlink" title="Commands Struct"></a>Commands Struct</h2><p>We implement the Commands struct, and its attributes will correspond to commands.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Clap can read comments through reflection macros and print them out when help is requested.</span></span><br><span class="line"><span class="meta">#[derive(Subcommand)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Commands</span> &#123;</span><br><span class="line">    <span class="comment">/// create-vite</span></span><br><span class="line">    CreateVite</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Next, read in the main function.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">cli</span> = Args::<span class="title function_ invoke__">parse</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">match</span> cli.command &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(Commands::CreateVite) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;create vite!&quot;</span>),</span><br><span class="line">        <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Run with --help to see instructions.&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Run it!</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cargo run -- create-vite</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">cargo run --release create-vite</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829084102.png" alt="If you run the help command" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">If you run the help command</span></div></div><h1 id="Step-Three-Copying-the-Project-Template-from-Vite-Scaffold"><a href="#Step-Three-Copying-the-Project-Template-from-Vite-Scaffold" class="headerlink" title="Step Three: Copying the Project Template from Vite Scaffold"></a>Step Three: Copying the Project Template from Vite Scaffold</h1><p>Rather than retrieving front-end project templates from the internet, we opt to save the front-end project template in a<br>directory and copy it to the target directory when creating a new project.<br>This method has its downsides, such as increasing the size of the project and requiring manual placement of the<br>directory into the build folder. However, the advantage is that it is relatively simple and convenient to implement.</p><h2 id="Creating-a-Project-with-Vite-Scaffold"><a href="#Creating-a-Project-with-Vite-Scaffold" class="headerlink" title="Creating a Project with Vite Scaffold"></a>Creating a Project with Vite Scaffold</h2><p>First, we create a project using the Vite scaffold, and then copy the project into our project’s public folder.</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm create vite</span><br></pre></td></tr></table></figure></div></div><p>We will only create these four types of projects: Vue+JS, Vue+TS, React+JS, and React+TS.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240828231136.png" alt="example" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">example</span></div></div><p>After creation, copy them to the public folder of the project.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240828231349.png" alt="Directory structure as shown in Figure" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Directory structure as shown in Figure</span></div></div><h1 id="Step-Four-Writing-the-Methods-Needed"><a href="#Step-Four-Writing-the-Methods-Needed" class="headerlink" title="Step Four: Writing the Methods Needed"></a>Step Four: Writing the Methods Needed</h1><p>Create common.rs, where we will store commonly used utility class methods.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    common.rs</span><br><span class="line">    main.rs</span><br></pre></td></tr></table></figure><p>Incorporate the common module into main.rs.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> common;</span><br></pre></td></tr></table></figure></div></div><h2 id="Method-for-reading-command-line-input"><a href="#Method-for-reading-command-line-input" class="headerlink" title="Method for reading command line input."></a>Method for reading command line input.</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// read inputs</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">read_line</span>() <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">    <span class="comment">// Used to store the string input by the user.</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">input</span> = <span class="type">String</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line">    <span class="comment">// Reading command line input.</span></span><br><span class="line">    std::io::<span class="title function_ invoke__">stdin</span>()</span><br><span class="line">        .<span class="title function_ invoke__">read_line</span>(&amp;<span class="keyword">mut</span> input)</span><br><span class="line">        .<span class="title function_ invoke__">expect</span>(<span class="string">&quot;Stdin not working&quot;</span>);</span><br><span class="line">    input.<span class="title function_ invoke__">trim</span>().<span class="title function_ invoke__">to_string</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Method-for-copying-files-to-a-specified-directory"><a href="#Method-for-copying-files-to-a-specified-directory" class="headerlink" title="Method for copying files to a specified directory."></a>Method for copying files to a specified directory.</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"><span class="keyword">use</span> std::&#123;fs, io, path::Path&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Copy a folder to a specified path.</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">copy_dir_all</span>(src: <span class="keyword">impl</span> <span class="title class_">AsRef</span>&lt;Path&gt;, dst: <span class="keyword">impl</span> <span class="title class_">AsRef</span>&lt;Path&gt;) <span class="punctuation">-&gt;</span> io::<span class="type">Result</span>&lt;()&gt; &#123;</span><br><span class="line">    <span class="comment">// fs::create_dir_all(&amp;dst)?;</span></span><br><span class="line">    fs::<span class="title function_ invoke__">create_dir_all</span>(&amp;dst).<span class="title function_ invoke__">expect</span>(<span class="string">&quot;创建dst目录失败&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// println!(&quot;遍历&quot;);</span></span><br><span class="line">    fs::<span class="title function_ invoke__">read_dir</span>(&amp;src).<span class="title function_ invoke__">expect</span>(<span class="string">&quot;找不到src目录&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">entry</span> <span class="keyword">in</span> fs::<span class="title function_ invoke__">read_dir</span>(src)? &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">entry</span> = entry?;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">ty</span> = entry.<span class="title function_ invoke__">file_type</span>()?;</span><br><span class="line">        <span class="keyword">if</span> ty.<span class="title function_ invoke__">is_dir</span>() &#123;</span><br><span class="line">            <span class="title function_ invoke__">copy_dir_all</span>(entry.<span class="title function_ invoke__">path</span>(), dst.<span class="title function_ invoke__">as_ref</span>().<span class="title function_ invoke__">join</span>(entry.<span class="title function_ invoke__">file_name</span>()))?;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            fs::<span class="title function_ invoke__">copy</span>(entry.<span class="title function_ invoke__">path</span>(), dst.<span class="title function_ invoke__">as_ref</span>().<span class="title function_ invoke__">join</span>(entry.<span class="title function_ invoke__">file_name</span>()))?;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// println!(&quot;copy dir done.&quot;);</span></span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Method-for-obtaining-the-runtime-directory-location"><a href="#Method-for-obtaining-the-runtime-directory-location" class="headerlink" title="Method for obtaining the runtime directory location."></a>Method for obtaining the runtime directory location.</h2><p>I initially hoped to enable the program to locate the public folder under src at runtime, but found that it was not<br>feasible. Later, I discovered a method to obtain the runtime directory.<br>This allows the public files to be copied into the target’s debug or release directories, ensuring that the program can<br>locate the files in the public folder regardless of where it is running and begin the copying process.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">target/</span><br><span class="line">    cargo run运行时的current_exe目录</span><br><span class="line">    debug/</span><br><span class="line">        public/...</span><br><span class="line">    cargo build之后运行exe时的current_exe目录</span><br><span class="line">    release/</span><br><span class="line">        public/...</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// common.rs</span></span><br><span class="line"><span class="keyword">use</span> std::&#123;fs, path::Path, env::current_exe&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get runtime directory</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">current_exe_pkg</span>() <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pkg_name</span> = <span class="built_in">env!</span>(<span class="string">&quot;CARGO_PKG_NAME&quot;</span>);</span><br><span class="line">    <span class="comment">// println!(&quot;&#123;pkg_name&#125;.exe&quot;);</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">pkg_name</span> = pkg_name.<span class="title function_ invoke__">to_string</span>() + <span class="string">&quot;.exe&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the path of the current directory</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">current_exe</span> = <span class="title function_ invoke__">current_exe</span>().<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    current_exe.<span class="title function_ invoke__">display</span>().<span class="title function_ invoke__">to_string</span>().<span class="title function_ invoke__">replace</span>(&amp;pkg_name, <span class="string">&quot;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="about env!" href="https://doc.rust-lang.org/std/env/index.html" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">about env!</span><span class="cap link footnote">https://doc.rust-lang.org/std/env/index.html</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374056/rust.svg"></div></div></a></div><h1 id="Step-Five-Logic-for-Project-Creation"><a href="#Step-Five-Logic-for-Project-Creation" class="headerlink" title="Step Five: Logic for Project Creation"></a>Step Five: Logic for Project Creation</h1><p>After completing the preliminary preparations, we can finally begin to write the logic for creating projects. This step<br>involves content that is all placed within vite.rs.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    main.rs</span><br><span class="line">    vite.rs</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"><span class="keyword">mod</span> vite;</span><br></pre></td></tr></table></figure></div></div><h2 id="Struct-for-Storing-User-Input"><a href="#Struct-for-Storing-User-Input" class="headerlink" title="Struct for Storing User Input"></a>Struct for Storing User Input</h2><p>In order to save user input for subsequent creation of different projects based on the input options, we need a struct<br>to store this data.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Which framework the user uses</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">FrameworkType</span> &#123;</span><br><span class="line">    React,</span><br><span class="line">    Vue,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// whether the user uses TS.</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">VariantType</span> &#123;</span><br><span class="line">    Javascript,</span><br><span class="line">    Typescript,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">UserSelected</span> &#123;</span><br><span class="line">    framework_type: FrameworkType,</span><br><span class="line">    variant_type: VariantType,</span><br><span class="line">    project_name: <span class="type">String</span>, <span class="comment">// project name</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Adding-Methods-to-the-Struct"><a href="#Adding-Methods-to-the-Struct" class="headerlink" title="Adding Methods to the Struct"></a>Adding Methods to the Struct</h2><p>We need two methods: one for creating the struct, and another for creating the project.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"><span class="keyword">use</span> std::path::Path;</span><br><span class="line"><span class="keyword">use</span> crate::common::&#123;copy_dir_all, current_exe_pkg, read_line&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">UserSelected</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(project_name: &amp;<span class="type">str</span>, framework: &amp;<span class="type">str</span>, variant: &amp;<span class="type">str</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">framework_type</span> = <span class="keyword">match</span> framework &#123;</span><br><span class="line">            <span class="string">&quot;react&quot;</span> =&gt; &#123;</span><br><span class="line">                FrameworkType::React</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;vue&quot;</span> =&gt; &#123;</span><br><span class="line">                FrameworkType::Vue</span><br><span class="line">            &#125;</span><br><span class="line">            _ =&gt; &#123;</span><br><span class="line">                <span class="comment">// panic!(&quot;No such framework type&quot;)</span></span><br><span class="line">                <span class="comment">// default</span></span><br><span class="line">                FrameworkType::React</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">variant_type</span> = <span class="keyword">match</span> variant &#123;</span><br><span class="line">            <span class="string">&quot;javascript&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Javascript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;typescript&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;js&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Javascript</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="string">&quot;ts&quot;</span> =&gt; &#123;</span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">            _ =&gt; &#123;</span><br><span class="line">                <span class="comment">// panic!(&quot;No such variant type&quot;)</span></span><br><span class="line">                VariantType::Typescript</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="keyword">if</span> project_name.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line">            <span class="string">&quot;vite-project&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; project_name &#125;;</span><br><span class="line"></span><br><span class="line">        UserSelected &#123;</span><br><span class="line">            project_name: project_name.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">            framework_type: framework_type,</span><br><span class="line">            variant_type: variant_type,</span><br><span class="line">            <span class="comment">// file_name: &quot;&quot;.to_string(),</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 创建文件</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">init</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">path</span> = <span class="string">&quot;public/vite/&quot;</span>.<span class="title function_ invoke__">to_string</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span>.framework_type &#123;</span><br><span class="line">            FrameworkType::React =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;react&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            FrameworkType::Vue =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        path += <span class="string">&quot;-&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span>.variant_type &#123;</span><br><span class="line">            VariantType::Javascript =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;js&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            VariantType::Typescript =&gt; &#123;</span><br><span class="line">                path += <span class="string">&quot;ts&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;复制 &#123;&#125;&quot;</span>, &amp;(<span class="title function_ invoke__">current_exe_pkg</span>() + &amp;path));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// todo: 从网络上下载 或 调用cmd git clone</span></span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">copy_dir_all</span>(</span><br><span class="line">            Path::<span class="title function_ invoke__">new</span>(</span><br><span class="line">                &amp;(<span class="title function_ invoke__">current_exe_pkg</span>() + &amp;path)</span><br><span class="line">            ),</span><br><span class="line">            Path::<span class="title function_ invoke__">new</span>(&amp;<span class="keyword">self</span>.project_name),</span><br><span class="line">        ).<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Ask-and-receive-user-input"><a href="#Ask-and-receive-user-input" class="headerlink" title="Ask and receive user input."></a>Ask and receive user input.</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vite.rs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">create_vite_project</span>() &#123;</span><br><span class="line">    <span class="comment">// project name</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;your project name? &#123;&#125;&quot;</span>, <span class="string">&quot;vite-project&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="title function_ invoke__">read_line</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">project_name</span> = <span class="keyword">if</span> project_name.<span class="title function_ invoke__">is_empty</span>() &#123;</span><br><span class="line">        <span class="string">&quot;vite-project&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        &amp;project_name</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;project_name));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// select a framework</span></span><br><span class="line">    <span class="comment">// react vue ...</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;select a framework: (default: react)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;react&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;vue&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">framework</span> = <span class="title function_ invoke__">read_line</span>().<span class="title function_ invoke__">to_lowercase</span>();</span><br><span class="line">    framework = <span class="keyword">match</span> framework.<span class="title function_ invoke__">as_str</span>() &#123;</span><br><span class="line">        <span class="string">&quot;r&quot;</span> =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;react&quot;</span> =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;v&quot;</span> =&gt; <span class="string">&quot;vue&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;vue&quot;</span> =&gt; <span class="string">&quot;vue&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        _ =&gt; <span class="string">&quot;react&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;framework));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// select a variant</span></span><br><span class="line">    <span class="comment">// javascript typescript ...</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;select a variant: (default: ts)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;typescript(ts)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;javascript(js)&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">variant</span> = <span class="title function_ invoke__">read_line</span>().<span class="title function_ invoke__">to_lowercase</span>();</span><br><span class="line">    variant = <span class="keyword">match</span> variant.<span class="title function_ invoke__">as_str</span>() &#123;</span><br><span class="line">        <span class="string">&quot;ts&quot;</span> =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;typescript&quot;</span> =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;js&quot;</span> =&gt; <span class="string">&quot;javascript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        <span class="string">&quot;javascript&quot;</span> =&gt; <span class="string">&quot;javascript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">        _ =&gt; <span class="string">&quot;typescript&quot;</span>.<span class="title function_ invoke__">to_string</span>(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, (&amp;variant));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">user_select</span> = UserSelected::<span class="title function_ invoke__">new</span>(&amp;project_name, &amp;framework, &amp;variant);</span><br><span class="line"></span><br><span class="line">    user_select.<span class="title function_ invoke__">init</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h1 id="Step-Six-Testing"><a href="#Step-Six-Testing" class="headerlink" title="Step Six: Testing"></a>Step Six: Testing</h1><h2 id="Modify-main-rs"><a href="#Modify-main-rs" class="headerlink" title="Modify main.rs"></a>Modify main.rs</h2><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.rs</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">cli</span> = Args::<span class="title function_ invoke__">parse</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> cli.command &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(Commands::CreateVite) =&gt; <span class="title function_ invoke__">create_vite_project</span>(),</span><br><span class="line">        <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Run with --help to see instructions.&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h2 id="Test-cargo-run"><a href="#Test-cargo-run" class="headerlink" title="Test cargo run"></a>Test cargo run</h2><p>Move the public directory to the target&#x2F;debug directory.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829093737.png" data-fancybox="true"/></div></div><p>Test whether cargo run can be successful.</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo run -- create-vite</span><br></pre></td></tr></table></figure></div></div><p>It can be seen that the vite-project directory was successfully created in the root directory of the project.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829093839.png" data-fancybox="true"/></div></div><h2 id="Test-the-exe-after-cargo-build"><a href="#Test-the-exe-after-cargo-build" class="headerlink" title="Test the exe after cargo build."></a>Test the exe after cargo build.</h2><p>Move the public directory to the target&#x2F;release directory.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829094019.png" data-fancybox="true"/></div></div><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cargo build --release</span><br><span class="line">.\target\release\rust-vite-cli.exe create-vite</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240829124632.png" data-fancybox="true"/></div></div><h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>Next, you can copy the files in the release directory to any directory on your system, then configure it into the system<br>environment variables, and you can run rust-vite-cli create-vite to create front-end projects anytime and anywhere.</p><p>Thank you for watching.</p>]]></content>
    
    
    <summary type="html">Creating a Rust Front-End Project Initialization Scaffolding Using Clap</summary>
    
    
    
    <category term="rust" scheme="https://malcode-site.github.io/categories/rust/"/>
    
    <category term="CLI" scheme="https://malcode-site.github.io/categories/rust/CLI/"/>
    
    <category term="command app" scheme="https://malcode-site.github.io/categories/rust/CLI/command-app/"/>
    
    
    <category term="rust" scheme="https://malcode-site.github.io/tags/rust/"/>
    
    <category term="CLI" scheme="https://malcode-site.github.io/tags/CLI/"/>
    
    <category term="command app" scheme="https://malcode-site.github.io/tags/command-app/"/>
    
  </entry>
  
  <entry>
    <title>Getting Started with Next.js - v13</title>
    <link href="https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/en/"/>
    <id>https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/en/</id>
    <published>2024-08-25T10:35:48.000Z</published>
    <updated>2024-09-09T12:19:15.586Z</updated>
    
    <content type="html"><![CDATA[<h1 id="What-is-Nextjs"><a href="#What-is-Nextjs" class="headerlink" title="What is Nextjs"></a>What is Nextjs</h1><p>Next.js is a full-stack SSR framework based on React, providing a series of tools for automatic configuration of React,<br>allowing us to focus on building applications and simplify the configuration process.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs" href="https://nextjs.org/docs" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs</span><span class="cap link footnote">https://nextjs.org/docs</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><h1 id="What-is-SSR（Server-Side-Render）"><a href="#What-is-SSR（Server-Side-Render）" class="headerlink" title="What is SSR（Server Side Render）"></a>What is SSR（Server Side Render）</h1><h2 id="SPA-Single-Page-App"><a href="#SPA-Single-Page-App" class="headerlink" title="SPA (Single Page App)"></a>SPA (Single Page App)</h2><p>When it comes to server-side rendering, we have to mention <em>SPA (Single Page Applications)</em>. Examples of single page<br>applications include React and Vue, which operate by downloading JavaScript to the client side for execution.<br>They undergo compilation and building processes to create JavaScript virtual DOM objects, which are then mounted onto<br>index.html all at once. Since they are mounted on a single HTML file, for instance:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192010.png" alt="The SPA application provides an index.html file, which contains a div tag with a specified id." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">The SPA application provides an index.html file, which contains a div tag with a specified id.</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192157.png" alt="Then, in the entry JS of the SPA, the program is rendered and mounted onto the specified div." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Then, in the entry JS of the SPA, the program is rendered and mounted onto the specified div.</span></div></div><p>Other modifications are based on it, so it is a single-page application.<br>Moreover, SPA programs place the JavaScript files for rendering and logical processing on the client side, where the<br>rendering tasks are handled by the client, hence they are also known as CSR (Client-Side Rendering) programs.</p><p>On the other hand, server-side rendering involves the server rendering the HTML file and then delivering it to the<br>client, returning the corresponding HTML file based on different requests.</p><h2 id="Comparison"><a href="#Comparison" class="headerlink" title="Comparison"></a>Comparison</h2><ul><li><strong>Performance</strong><br>CSR assigns the rendering task to the client, which can lead to lag on devices with poor performance, but it<br>relatively reduces the server’s load. In contrast, SSR faces significant stress during peak request times due to the<br>need to handle a large volume of requests, but it alleviates pressure on the client side.</li><li><strong>SEO-friendliness</strong><br>Before rendering, it is difficult for CSR to obtain specific information about the webpage, making it not<br>SEO-friendly. However, SSR can provide the rendered files to search engine crawlers, at which point the page content<br>is essentially complete, facilitating analysis and recognition by the engine algorithms.</li><li><strong>Initial load time</strong><br>CSR requires downloading the JS to the client for rendering, so there might be a period of blankness on the page (an<br>issue with initial screen rendering) before the JS is downloaded to the client.<br>On the other hand, SSR renders the HTML on the server first, eliminating this step and reducing client-side burden,<br>thus it can display content to users more quickly.</li></ul><h1 id="Setup-Nextjs-Project"><a href="#Setup-Nextjs-Project" class="headerlink" title="Setup Nextjs Project"></a>Setup Nextjs Project</h1><h2 id="git-repository"><a href="#git-repository" class="headerlink" title="git repository"></a>git repository</h2><p>The teaching content of this article will be placed in the GitHub repository, which can be studied in conjunction.<br>Different branches will correspond to different chapters.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h2 id="init-project"><a href="#init-project" class="headerlink" title="init project"></a>init project</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm dlx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm create next-app</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825202518.png" data-fancybox="true"/></div></div><p>Alternatively, you can use my open-source project to create.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-init-cli" href="https://github.com/malred/rust-init-cli" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-init-cli</span><span class="cap link footnote">https://github.com/malred/rust-init-cli</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-cli-panel" href="https://github.com/malred/rust-cli-panel" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-cli-panel</span><span class="cap link footnote">https://github.com/malred/rust-cli-panel</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="Function-1-File-Routing-System"><a href="#Function-1-File-Routing-System" class="headerlink" title="Function 1: File Routing System"></a>Function 1: File Routing System</h1><blockquote><p>In version 13, Next.js introduced a new App Router built on React Server Components, which supports shared layouts,<br>nested routes, loading states, error handling, and more.</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs-route" href="https://nextjs.org/docs/app/building-your-application/routing" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs-route</span><span class="cap link footnote">https://nextjs.org/docs/app/building-your-application/routing</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><p>Next.js automatically recognizes files in the <code>app</code> directory with the extension <code>.page.jsx</code> or <code>.page.tsx</code> to create<br>pages, while their parent or sibling files called <code>layout.jsx</code> or <code>layout.tsx</code> are used as page layouts for rendering.</p><h2 id="try-it"><a href="#try-it" class="headerlink" title="try it"></a>try it</h2><p>Assuming we want to create a blog website and the access path for the blog is site.example&#x2F;blog&#x2F;test&#x2F;,<br>let’s create the directory file structure accordingly:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    + blog</span><br><span class="line">        + test</span><br><span class="line">            + page.tsx</span><br><span class="line">    - page.tsx</span><br><span class="line">    - layout.tsx</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/test/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TestBlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Hi, there is a blog page!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Add a link to it in <mark class="tag-plugin colorful mark" color="yellow">app/page.tsx</mark>.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">blog</span>/<span class="attr">test</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                Go to test blog</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>start it：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm dev</span><br></pre></td></tr></table></figure><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="http://localhost:3000" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">http://localhost:3000</span><span class="cap link footnote">http://localhost:3000</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203047.png" alt="Due to the default CSS styles, it looks a bit odd." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Due to the default CSS styles, it looks a bit odd.</span></div></div><p>Modify the content in <mark class="tag-plugin colorful mark" color="yellow">globals.css</mark> to make the background look nicer.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="comment">/*--foreground-rgb: 0, 0, 0;*/</span></span><br><span class="line">    <span class="comment">/*--background-start-rgb: 214, 219, 220;*/</span></span><br><span class="line">    <span class="comment">/*--background-end-rgb: 255, 255, 255;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>result:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203505.png" alt="home page" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">home page</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="click `Go to test blog`" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">click `Go to test blog`</span></div></div><p>Ok, You completed the challenge！<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/强.gif"/></span></p><h2 id="Route-mapped-to-URL"><a href="#Route-mapped-to-URL" class="headerlink" title="Route mapped to URL"></a>Route mapped to URL</h2><p>From the example we just looked at, we can see that the mapping relationship from file to route is as follows:</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/a/b/page.jsx</mark> -> <mark class="tag-plugin colorful mark" color="orange">site.example/a/b</mark><h2 id="Dynamic-Route"><a href="#Dynamic-Route" class="headerlink" title="Dynamic Route"></a>Dynamic Route</h2><p>You might have noticed that the current URLs are hardcoded.<br>If we need 10 different blog pages (such as <code>blog/test2</code>, <code>blog/abc</code>, <code>blog/start</code>), using this method would require<br>manually creating 10 different <code>xxx/page.js/jsx/ts/tsx</code> files, which is very time-consuming and inefficient.</p><p>Of course, Next.js provides a solution called dynamic routes.</p><p>The file route mapping for it looks like this:</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/blog/[slug]/page.jsx</mark> -><mark class="tag-plugin colorful mark" color="orange">site.example/blog/a</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/b</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/c</mark><h3 id="try-it-1"><a href="#try-it-1" class="headerlink" title="try it"></a>try it</h3><p>Modify our directory structure.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - blog</span><br><span class="line">        + [slug]</span><br><span class="line">            + page.tsx</span><br></pre></td></tr></table></figure><p>Create a blog content page.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*生成随机数*/&#125;</span></span><br><span class="line"><span class="language-xml">            blog &#123;Math.round(Math.random() * 10)&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825210024.png" alt="Visiting `blog/a` reached our `[slug]/page`." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Visiting `blog/a` reached our `[slug]/page`.</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="If you have kept the `blog/test/page` from before, you'll find it still works." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">If you have kept the `blog/test/page` from before, you'll find it still works.</span></div></div><h2 id="layout"><a href="#layout" class="headerlink" title="layout"></a>layout</h2><p>Next.js provides a layout file that offers layout functionality, which is UI shared among multiple routes. When<br>navigating, the layout retains its state, remains interactive, and does not re-render. Layouts can also be nested.</p><p>Let’s analyze the layout file:</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123;<span class="title class_">Metadata</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Inter</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/font/google&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./globals.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// This is a font, don&#x27;t worry about it for now.</span></span><br><span class="line"><span class="keyword">const</span> inter = <span class="title class_">Inter</span>(&#123;<span class="attr">subsets</span>: [<span class="string">&quot;latin&quot;</span>]&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Provides metadata for the page.</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">metadata</span>: <span class="title class_">Metadata</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;Create Next App&quot;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&quot;Generated by create next app&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*&quot;children&quot; refers to the content inside the subdirectory (including the layout and page of the subdirectory).*/&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h3 id="Let’s-add-a-navbar-and-a-footbar"><a href="#Let’s-add-a-navbar-and-a-footbar" class="headerlink" title="Let’s add a navbar and a footbar."></a>Let’s add a navbar and a footbar.</h3><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/footbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Footbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-gray-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">border-t</span> <span class="attr">border-t-gray-300</span> <span class="attr">sticky</span> <span class="attr">h-20</span> <span class="attr">w-full</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            footbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-green-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">sticky</span> <span class="attr">w-full</span> <span class="attr">h-20</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            navbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><blockquote><p>Have you not learned Tailwind CSS yet? Check out this article (todo).</p></blockquote><p>add them to layout.tsx</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/layout.tsx</span></span><br><span class="line"><span class="comment">/// </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Navbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Footbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Result：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825212940.png" data-fancybox="true"/></div></div><h1 id="provide-blog-contents"><a href="#provide-blog-contents" class="headerlink" title="provide blog contents"></a>provide blog contents</h1><p>OK, you now have dynamic routes that can match different names, as well as having created a navbar and footbar. However,<br>we want the page to display more content.</p><h2 id="write-markdown"><a href="#write-markdown" class="headerlink" title="write markdown"></a>write markdown</h2><p>Many note-taking applications now support Markdown syntax, which is a method I particularly favor. Additionally, there<br>are numerous npm libraries available that can parse the contents of Markdown files into HTML rich text strings.</p><blockquote><p>learn markdown Syntax?</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="see wiki or wait my new post(todo)" href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">see wiki or wait my new post(todo)</span><span class="cap link footnote">https://en.wikipedia.org/wiki/Markdown</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/510065/markdown.svg"></div></div></a></div><p>let us change directory structure</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - ...</span><br><span class="line">- contents</span><br><span class="line">    - mountain.md</span><br><span class="line">    - bird.md</span><br><span class="line">    - flower.md</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful folders" ><details class="folder" index="0"><summary><span>mountain.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2022/10/24/12/20/mountains-7543273_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Summit Reflections: A Mountain&#x27;s Mirror to the Soul</span></span><br><span class="line"></span><br><span class="line">Climbing mountains is more than a physical endeavor; it&#x27;s a journey of the spirit, where each peak reveals a facet of</span><br><span class="line">inner strength. As I scaled the rugged trails, the grind of my boots against rock echoed the resilience required to</span><br><span class="line">surmount life&#x27;s challenges. The ascent, steep and demanding, taught me endurance. With each step, I found a metaphor for</span><br><span class="line">the effort needed to achieve one&#x27;s dreams.</span><br><span class="line"></span><br><span class="line">The view from the summit was not just a vista of vast landscapes but a perspective on the infinite possibilities life</span><br><span class="line">offers. It reminded me that after every great effort comes a broad expanse of opportunity. The descent, often</span><br><span class="line">overlooked, was no less instructive. It spoke of humility and caution; a reminder that what goes up must come down with</span><br><span class="line">grace.</span><br><span class="line"></span><br><span class="line">This mountain experience distilled life into a simple yet profound truth: the journey matters as much as the</span><br><span class="line">destination. It&#x27;s in the climb that we discover our mettle and in the view that we savor our triumphs.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="1"><summary><span>flower.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2023/03/19/05/31/flower-7861942_960_720.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Blossoming Insights: A Whiff of Flowers</span></span><br><span class="line"></span><br><span class="line">As I meandered through the garden, the air was thick with the sweet perfume of blooming flowers. Each petal, a tender</span><br><span class="line">brushstroke on nature&#x27;s canvas, painted a picture of grace and resilience. The flowers, in their silent language, spoke</span><br><span class="line">of beauty that survives amidst the harshest conditions.</span><br><span class="line"></span><br><span class="line">A delicate rose, its petals softer than silk, nodded gently in the breeze. It reminded me that even the most stunning</span><br><span class="line">forms can emerge from thorny paths. In the blossoms, I saw a reflection of life&#x27;s inherent beauty and the fortitude to</span><br><span class="line">flourish despite challenges.</span><br><span class="line"></span><br><span class="line">The garden, with its kaleidoscope of colors, became a sanctuary where every flower told a story of transformation and</span><br><span class="line">growth. My spirits were lifted by this quiet symphony of scents and hues, a testament to nature&#x27;s power to inspire and</span><br><span class="line">replenish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="2"><summary><span>bird.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2024/01/19/18/08/bird-8519547_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Capturing the Charm of Feathered Friends</span></span><br><span class="line"></span><br><span class="line">Today&#x27;s venture into the serene woods was a delightful encounter with nature&#x27;s delicate treasures. As I wandered through</span><br><span class="line">the dappled sunlight under the canopy, my camera was my faithful companion, ready to freeze moments in time.</span><br><span class="line"></span><br><span class="line">A soft trill caught my attention, leading me to a vibrant avian presence. A tiny bird, with feathers arrayed in hues of</span><br><span class="line">blue and green, perched gracefully on a branch. It seemed almost aware of its own charm, bobbing and turning, as if</span><br><span class="line">posing for an unseen audience.</span><br><span class="line"></span><br><span class="line">I snapped a sequence of shots, each click capturing a different angle of this natural splendor. The bird, in its</span><br><span class="line">innocence, carried on with its song, unaware of the beauty it bestowed upon my day.</span><br><span class="line"></span><br><span class="line">As I left the woods, my heart felt lighter, and my camera held a piece of joy that I will cherish. These moments of</span><br><span class="line">connection with nature are what truly nourish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details></div><h2 id="read-and-show"><a href="#read-and-show" class="headerlink" title="read and show"></a>read and show</h2><p>Install the dependencies required to parse Markdown.</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i marked</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i marked</span><br></pre></td></tr></table></figure></div></div><p>Read and parse files in the code.</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125;</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Great, we have now successfully parsed and rendered the Markdown text onto the page!</p><p>Result:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826092056.png" data-fancybox="true"/></div></div><h2 id="Address-the-issue-with-text-styling"><a href="#Address-the-issue-with-text-styling" class="headerlink" title="Address the issue with text styling."></a>Address the issue with text styling.</h2><p>You might have noticed that our heading styles are the same as the regular text. This is because Tailwind CSS removes<br>default CSS styles, but we can use a library to address this issue.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="tailwind-typography" href="https://tailwindcss.com/blog/tailwindcss-typography" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">tailwind-typography</span><span class="cap link footnote">https://tailwindcss.com/blog/tailwindcss-typography</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374118/tailwind.svg"></div></div></a></div><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -save-dev @tailwindcss/typography</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i -save-dev @tailwindcss/typography</span><br></pre></td></tr></table></figure></div></div><p>Register as a Tailwind plugin.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;@tailwindcss/typography&#x27;</span>)</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config;</span><br></pre></td></tr></table></figure><p>Then use it to add the ‘prose’ class name to components.</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* prose让文本中的标题有对应的样式 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Restart the server and access the page again.</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826142919.png" data-fancybox="true"/></div></div><h1 id="Function-2-Provide-API-interfaces"><a href="#Function-2-Provide-API-interfaces" class="headerlink" title="Function 2: Provide API interfaces."></a>Function 2: Provide API interfaces.</h1><p>Next.js will parse the files in the api directory as backend interfaces, receiving and processing HTTP requests.</p><p>We will move the operation of reading and parsing Markdown files to the backend (api directory), while keeping the<br>rendering work on the frontend (app directory).</p><h2 id="try-it-2"><a href="#try-it-2" class="headerlink" title="try it"></a>try it</h2><p>Change our directory structure.</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">  + api</span><br><span class="line">      + blogs</span><br><span class="line">          + [slug]</span><br><span class="line">              + route.ts </span><br></pre></td></tr></table></figure><p>The current correspondence between the file system and URLs is as follows:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app/api/blogs/[slug]/route.ts -&gt; site.example.com/api/blogs/a, site.example.com/api/blogs/b, ...</span><br></pre></td></tr></table></figure><p>Write code to handle requests.</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/blogs/route.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收GET请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">GET</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 解析url</span></span><br><span class="line">    <span class="keyword">let</span> slug = req.<span class="property">url</span>.<span class="title function_">slice</span>(</span><br><span class="line">        req.<span class="property">url</span>.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>,</span><br><span class="line">        req.<span class="property">url</span>.<span class="property">length</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 读取md文件</span></span><br><span class="line">        <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        html = <span class="title function_">marked</span>(text)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">        <span class="comment">// 错误返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;<span class="attr">error</span>: err&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回html内容</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;html&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收POST请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">POST</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>Result:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150820.png" alt="Access a non-existent md file." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Access a non-existent md file.</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150922.png" alt="Access a file that normally exists." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Access a file that normally exists.</span></div></div><p>Request backend data from the front end.</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端组件可以使用async</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// 请求后端数据</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`http://localhost:3000/api/blogs/<span class="subst">$&#123;params.slug&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">if</span> (json.<span class="property">error</span>)</span><br><span class="line">        html = <span class="string">&quot;Ooh! Something went wrong&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        html = json.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* prose让文本中的标题有对应的样式 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Result:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151617.png" alt="success" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">success</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151624.png" alt="Access a non-existent md file." data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Access a non-existent md file.</span></div></div><p>At this point, we will pause here. To prevent the article from becoming too lengthy, I have placed the remaining content<br>in separate sections, which you can click below to continue reading.</p><h1 id="Next-Step"><a href="#Next-Step" class="headerlink" title="Next Step"></a>Next Step</h1><h2 id="Use-next-themes-for-day-and-night-theme-switching"><a href="#Use-next-themes-for-day-and-night-theme-switching" class="headerlink" title="Use next-themes for day and night theme switching."></a>Use next-themes for day and night theme switching.</h2><p>Have you seen websites that can switch between light and dark themes? We can also achieve this.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-themes" href="https://www.npmjs.com/package/next-themes" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-themes</span><span class="cap link footnote">https://www.npmjs.com/package/next-themes</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="blog" href="https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/en/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">blog</span><span class="cap link footnote">https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/en/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="Connect-to-the-database-using-Prisma"><a href="#Connect-to-the-database-using-Prisma" class="headerlink" title="Connect to the database using Prisma."></a>Connect to the database using Prisma.</h2><p>Storing data in a file system or cache is one option, but using a database to store data is a more common choice.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="prisma" href="https://www.prisma.io/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">prisma</span><span class="cap link footnote">https://www.prisma.io/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354210/prisma.svg"></div></div></a></div><h2 id="Use-Next-Auth-for-authentication"><a href="#Use-Next-Auth-for-authentication" class="headerlink" title="Use Next-Auth for authentication."></a>Use Next-Auth for authentication.</h2><p>Authentication is a common feature in applications. Using Next-Auth eliminates the hassle of creating your own login and<br>registration pages, allowing you to focus on implementing authentication logic.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-auth" href="https://next-auth.js.org/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-auth</span><span class="cap link footnote">https://next-auth.js.org/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="Use-TipTap-as-a-rich-text-editor"><a href="#Use-TipTap-as-a-rich-text-editor" class="headerlink" title="Use TipTap as a rich text editor."></a>Use TipTap as a rich text editor.</h2><p>TipTap is a modern headless rich text editor that allows us to easily create attractive page content.</p><blockquote><p>How to customize TipTap through code? Check out my latest article (todo).</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="tiptap document" href="https://tiptap.dev/docs/editor/getting-started/overview" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">tiptap document</span><span class="cap link footnote">https://tiptap.dev/docs/editor/getting-started/overview</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div>]]></content>
    
    
    <summary type="html">Getting Started with Next.js - v13</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>nextjs入门 - v13</title>
    <link href="https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/zh-cn/</id>
    <published>2024-08-25T10:35:48.000Z</published>
    <updated>2024-09-09T12:19:29.005Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是nextjs"><a href="#什么是nextjs" class="headerlink" title="什么是nextjs"></a>什么是nextjs</h1><p>nextjs是一款基于react的全栈SSR框架，提供一系列自动配置react的工具，让我们可以专注于构建应用，简化配置流程</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs" href="https://nextjs.org/docs" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs</span><span class="cap link footnote">https://nextjs.org/docs</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><h1 id="什么是SSR（服务端渲染）"><a href="#什么是SSR（服务端渲染）" class="headerlink" title="什么是SSR（服务端渲染）"></a>什么是SSR（服务端渲染）</h1><h2 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h2><p>说到服务端渲染，就要提到<em>SPA（单页面应用程序）</em>，单页面应用程序的例子就是React和Vue，他们是通过将js下载到客户端运行，<br>进行编译、构建，然后创建出js虚拟DOM对象，再一次性挂载到index.html上，由于只是挂载到单个html上，比如：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192010.png" alt="SPA程序提供一个index.html文件，然后里面有一个指定了id的div标签" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">SPA程序提供一个index.html文件，然后里面有一个指定了id的div标签</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192157.png" alt="然后在SPA的入口js中，将程序渲染并挂载到指定的div上" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">然后在SPA的入口js中，将程序渲染并挂载到指定的div上</span></div></div><p>其他修改都是基于它来进行，所以是单页面应用程序。<br>并且，SPA程序会将进行渲染和逻辑处理的js文件放在客户端，渲染的工作是交给客户端进行所以也叫CSR（客户端渲染）程序</p><p>而服务端渲染则是由服务器将HTML文件渲染后交给客户端的，根据不同请求返回对应的html文件。</p><h2 id="对比"><a href="#对比" class="headerlink" title="对比"></a>对比</h2><ul><li><strong>性能</strong><br>CSR将渲染的任务交给客户端，对于性能不好的设备来说，将会变得卡顿，但是相对的，减轻了服务器的负担。而SSR则相反，<br>在请求高峰期需要处理大量请求，这将会是巨大的压力，但是可以减轻客户端的压力</li><li><strong>SEO友好性</strong><br>客户端渲染在渲染前是很难获取到网页具体信息的，对于SEO来说并不友好，而服务端渲染则可以将渲染好的文件交给搜索引擎爬虫，<br>此时页面内容基本完整，利于引擎算法进行分析识别</li><li><strong>首次加载时间</strong><br>CSR需要将js下载到客户端进行渲染，所以在js下载到客户端之前有可能遭遇到一段时间的页面空白（首屏渲染问题）<br>而SSR在服务端先渲染好HTML，省去了这个步骤，并且减少了客户端压力，所以可以更快地向用户展示内容</li></ul><h1 id="Setup-Nextjs-Project"><a href="#Setup-Nextjs-Project" class="headerlink" title="Setup Nextjs Project"></a>Setup Nextjs Project</h1><h2 id="git仓库"><a href="#git仓库" class="headerlink" title="git仓库"></a>git仓库</h2><p>本文的教学内容将放入github仓库，可以结合着学习，不同分支将对应不同的章节</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm dlx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm create next-app</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825202518.png" data-fancybox="true"/></div></div><p>或者使用我的开源项目来创建</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-init-cli" href="https://github.com/malred/rust-init-cli" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-init-cli</span><span class="cap link footnote">https://github.com/malred/rust-init-cli</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-cli-panel" href="https://github.com/malred/rust-cli-panel" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-cli-panel</span><span class="cap link footnote">https://github.com/malred/rust-cli-panel</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="功能1：文件路由系统"><a href="#功能1：文件路由系统" class="headerlink" title="功能1：文件路由系统"></a>功能1：文件路由系统</h1><blockquote><p>在版本 13 中，Next.js 引入了一个基于React Server Components构建的新App Router ，它支持共享布局、嵌套路由、加载状态、错误处理等。</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs-route" href="https://nextjs.org/docs/app/building-your-application/routing" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs-route</span><span class="cap link footnote">https://nextjs.org/docs/app/building-your-application/routing</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><p>Nextjs会自动识别app目录中的<mark class="tag-plugin colorful mark" color="yellow">page.jsx/.tsx</mark>文件来创建页面，而父级或同级的<mark class="tag-plugin colorful mark" color="yellow">layout.jsx/.tsx</mark>会作为页面布局进行渲染</p><h2 id="来试一下"><a href="#来试一下" class="headerlink" title="来试一下"></a>来试一下</h2><p>假设我们要创建一个博客网站，站点中的博客的访问路径为site.example&#x2F;blog&#x2F;test&#x2F;，那么，让我们来创建这样的目录文件结构</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    + blog</span><br><span class="line">        + test</span><br><span class="line">            + page.tsx</span><br><span class="line">    - page.tsx</span><br><span class="line">    - layout.tsx</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/test/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TestBlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Hi, there is a blog page!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>在<mark class="tag-plugin colorful mark" color="yellow">app/page.tsx</mark>中添加指向它的链接</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">blog</span>/<span class="attr">test</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                Go to test blog</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>启动它：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm dev</span><br></pre></td></tr></table></figure><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="http://localhost:3000" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">http://localhost:3000</span><span class="cap link footnote">http://localhost:3000</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203047.png" alt="ok, 因为默认css样式的原因，看起来有点怪" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">ok, 因为默认css样式的原因，看起来有点怪</span></div></div><p>修改一下<mark class="tag-plugin colorful mark" color="yellow">globals.css</mark>里的内容，将背景变得好看点</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="comment">/*--foreground-rgb: 0, 0, 0;*/</span></span><br><span class="line">    <span class="comment">/*--background-start-rgb: 214, 219, 220;*/</span></span><br><span class="line">    <span class="comment">/*--background-end-rgb: 255, 255, 255;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>效果</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203505.png" alt="首页" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">首页</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="点击 Go to test blog" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">点击 Go to test blog</span></div></div><p>Ok, 你完成了这个挑战！<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/强.gif"/></span></p><h2 id="route映射到URL"><a href="#route映射到URL" class="headerlink" title="route映射到URL"></a>route映射到URL</h2><p>从刚才的例子我们可以看出，文件到路由的映射关系为：</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/a/b/page.jsx</mark> -> <mark class="tag-plugin colorful mark" color="orange">site.example/a/b</mark><h2 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h2><p>你或许注意到了，现在的URL是硬编码的，如果我们需要10个不同的blog页面（比如blog&#x2F;test2, blog&#x2F;abc, blog&#x2F;start），<br>那使用这种方式将要手动创建10个不同的xxx&#x2F;page.js&#x2F;jsx&#x2F;ts&#x2F;tsx，这是非常耗时且低效率的</p><p>当然，Nextjs为我们提供了名为动态路由的解决方案</p><p>它的文件路由映射是这样的：</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/blog/[slug]/page.jsx</mark> -><mark class="tag-plugin colorful mark" color="orange">site.example/blog/a</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/b</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/c</mark><h3 id="试一下"><a href="#试一下" class="headerlink" title="试一下"></a>试一下</h3><p>修改我们的目录结构</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - blog</span><br><span class="line">        + [slug]</span><br><span class="line">            + page.tsx</span><br></pre></td></tr></table></figure><p>创建博客内容页面</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*生成随机数*/&#125;</span></span><br><span class="line"><span class="language-xml">            blog &#123;Math.round(Math.random() * 10)&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825210024.png" alt="访问blog/a到达了我们的[slug]/page" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">访问blog/a到达了我们的[slug]/page</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="如果你保留了刚刚的blog/test/page，会发现它依然生效" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">如果你保留了刚刚的blog/test/page，会发现它依然生效</span></div></div><h2 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h2><p>Nextjs提供layout文件，提供布局功能，它是在多个路由之间共享的UI。在导航时，布局保留状态、保持交互性并且不重新渲染。布局也可以嵌套。</p><p>分析一下layout文件</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123;<span class="title class_">Metadata</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Inter</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/font/google&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./globals.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个是字体，暂时不用管</span></span><br><span class="line"><span class="keyword">const</span> inter = <span class="title class_">Inter</span>(&#123;<span class="attr">subsets</span>: [<span class="string">&quot;latin&quot;</span>]&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 提供页面的元数据</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">metadata</span>: <span class="title class_">Metadata</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;Create Next App&quot;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&quot;Generated by create next app&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*children就是子目录里的内容（包含子目录的layout和page）*/&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h3 id="让我们添加navbar和footbar"><a href="#让我们添加navbar和footbar" class="headerlink" title="让我们添加navbar和footbar"></a>让我们添加navbar和footbar</h3><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/footbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Footbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-gray-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">border-t</span> <span class="attr">border-t-gray-300</span> <span class="attr">sticky</span> <span class="attr">h-20</span> <span class="attr">w-full</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            footbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-green-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">sticky</span> <span class="attr">w-full</span> <span class="attr">h-20</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            navbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><blockquote><p>你或许还没学过tailwindcss？看这篇文章（todo）</p></blockquote><p>将它们添加到layout.tsx</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/layout.tsx</span></span><br><span class="line"><span class="comment">/// </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Navbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*children就是子目录里的内容（包含子目录的layout和page）*/&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Footbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>效果：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825212940.png" data-fancybox="true"/></div></div><h1 id="提供博客内容"><a href="#提供博客内容" class="headerlink" title="提供博客内容"></a>提供博客内容</h1><p>OK, 你现在已经有了可以匹配不同名称的动态的路由, 以及创建了navbar和footbar, 但是, 我们希望页面能呈现更多内容.</p><h2 id="编写markdown"><a href="#编写markdown" class="headerlink" title="编写markdown"></a>编写markdown</h2><p>现在很多笔记软件都支持markdown语法, 这也是我本人比较喜欢的一种方式, 而现在也有很多npm库支持将markdown文件内容解析为html富文本串</p><blockquote><p>学习markdown语法?</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="查看wiki或者等待我的新文章(todo)" href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">查看wiki或者等待我的新文章(todo)</span><span class="cap link footnote">https://en.wikipedia.org/wiki/Markdown</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/510065/markdown.svg"></div></div></a></div><p>让我们改变目录结构</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - ...</span><br><span class="line">- contents</span><br><span class="line">    - mountain.md</span><br><span class="line">    - bird.md</span><br><span class="line">    - flower.md</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful folders" ><details class="folder" index="0"><summary><span>mountain.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2022/10/24/12/20/mountains-7543273_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Summit Reflections: A Mountain&#x27;s Mirror to the Soul</span></span><br><span class="line"></span><br><span class="line">Climbing mountains is more than a physical endeavor; it&#x27;s a journey of the spirit, where each peak reveals a facet of</span><br><span class="line">inner strength. As I scaled the rugged trails, the grind of my boots against rock echoed the resilience required to</span><br><span class="line">surmount life&#x27;s challenges. The ascent, steep and demanding, taught me endurance. With each step, I found a metaphor for</span><br><span class="line">the effort needed to achieve one&#x27;s dreams.</span><br><span class="line"></span><br><span class="line">The view from the summit was not just a vista of vast landscapes but a perspective on the infinite possibilities life</span><br><span class="line">offers. It reminded me that after every great effort comes a broad expanse of opportunity. The descent, often</span><br><span class="line">overlooked, was no less instructive. It spoke of humility and caution; a reminder that what goes up must come down with</span><br><span class="line">grace.</span><br><span class="line"></span><br><span class="line">This mountain experience distilled life into a simple yet profound truth: the journey matters as much as the</span><br><span class="line">destination. It&#x27;s in the climb that we discover our mettle and in the view that we savor our triumphs.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="1"><summary><span>flower.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2023/03/19/05/31/flower-7861942_960_720.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Blossoming Insights: A Whiff of Flowers</span></span><br><span class="line"></span><br><span class="line">As I meandered through the garden, the air was thick with the sweet perfume of blooming flowers. Each petal, a tender</span><br><span class="line">brushstroke on nature&#x27;s canvas, painted a picture of grace and resilience. The flowers, in their silent language, spoke</span><br><span class="line">of beauty that survives amidst the harshest conditions.</span><br><span class="line"></span><br><span class="line">A delicate rose, its petals softer than silk, nodded gently in the breeze. It reminded me that even the most stunning</span><br><span class="line">forms can emerge from thorny paths. In the blossoms, I saw a reflection of life&#x27;s inherent beauty and the fortitude to</span><br><span class="line">flourish despite challenges.</span><br><span class="line"></span><br><span class="line">The garden, with its kaleidoscope of colors, became a sanctuary where every flower told a story of transformation and</span><br><span class="line">growth. My spirits were lifted by this quiet symphony of scents and hues, a testament to nature&#x27;s power to inspire and</span><br><span class="line">replenish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="2"><summary><span>bird.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2024/01/19/18/08/bird-8519547_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Capturing the Charm of Feathered Friends</span></span><br><span class="line"></span><br><span class="line">Today&#x27;s venture into the serene woods was a delightful encounter with nature&#x27;s delicate treasures. As I wandered through</span><br><span class="line">the dappled sunlight under the canopy, my camera was my faithful companion, ready to freeze moments in time.</span><br><span class="line"></span><br><span class="line">A soft trill caught my attention, leading me to a vibrant avian presence. A tiny bird, with feathers arrayed in hues of</span><br><span class="line">blue and green, perched gracefully on a branch. It seemed almost aware of its own charm, bobbing and turning, as if</span><br><span class="line">posing for an unseen audience.</span><br><span class="line"></span><br><span class="line">I snapped a sequence of shots, each click capturing a different angle of this natural splendor. The bird, in its</span><br><span class="line">innocence, carried on with its song, unaware of the beauty it bestowed upon my day.</span><br><span class="line"></span><br><span class="line">As I left the woods, my heart felt lighter, and my camera held a piece of joy that I will cherish. These moments of</span><br><span class="line">connection with nature are what truly nourish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details></div><h2 id="读取并显示"><a href="#读取并显示" class="headerlink" title="读取并显示"></a>读取并显示</h2><p>安装解析markdown需要的依赖</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i marked</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i marked</span><br></pre></td></tr></table></figure></div></div><p>在代码中读取文件并解析</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端组件可以使用async</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>很好, 现在我们成功解析渲染了markdown文本到页面上!</p><p>效果:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826092056.png" data-fancybox="true"/></div></div><h2 id="解决文字样式问题"><a href="#解决文字样式问题" class="headerlink" title="解决文字样式问题"></a>解决文字样式问题</h2><p>你或许发现了, 我们的标题样式和普通文字是一样的, 这是因为tailwindcss清除了默认的css样式, 我们可以使用一个库来解决</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="tailwind-typography与默认样式解释" href="https://tailwindcss.com/blog/tailwindcss-typography" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">tailwind-typography与默认样式解释</span><span class="cap link footnote">https://tailwindcss.com/blog/tailwindcss-typography</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374118/tailwind.svg"></div></div></a></div><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -save-dev @tailwindcss/typography</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i -save-dev @tailwindcss/typography</span><br></pre></td></tr></table></figure></div></div><p>注册为tailwind插件</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;@tailwindcss/typography&#x27;</span>)</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config;</span><br></pre></td></tr></table></figure><p>然后使用为组件添加prose类名</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* prose让文本中的标题有对应的样式 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重新启动服务, 再次访问页面</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826142919.png" data-fancybox="true"/></div></div><h1 id="功能2-提供API接口"><a href="#功能2-提供API接口" class="headerlink" title="功能2: 提供API接口"></a>功能2: 提供API接口</h1><p>Nextjs会将api目录下的文件解析为后端接口, 接收http请求并进行处理.</p><p>我们将读取和解析markdown文件的操作放到后端(api目录)去, 而将渲染的工作留在前端(app目录)</p><h2 id="试一下-1"><a href="#试一下-1" class="headerlink" title="试一下"></a>试一下</h2><p>改变我们的目录结构</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">  + api</span><br><span class="line">      + blogs</span><br><span class="line">          + [slug]</span><br><span class="line">              + route.ts </span><br></pre></td></tr></table></figure><p>此时文件系统和URL的对应关系是</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app/api/blogs/[slug]/route.ts -&gt; site.example.com/api/blogs/a, site.example.com/api/blogs/b, ...</span><br></pre></td></tr></table></figure><p>编写处理请求的代码</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/blogs/route.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收GET请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">GET</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 解析url</span></span><br><span class="line">    <span class="keyword">let</span> slug = req.<span class="property">url</span>.<span class="title function_">slice</span>(</span><br><span class="line">        req.<span class="property">url</span>.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>,</span><br><span class="line">        req.<span class="property">url</span>.<span class="property">length</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 读取md文件</span></span><br><span class="line">        <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        html = <span class="title function_">marked</span>(text)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">        <span class="comment">// 错误返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;<span class="attr">error</span>: err&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回html内容</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;html&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收POST请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">POST</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>看看结果:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150820.png" alt="访问不存在的md文件" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">访问不存在的md文件</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150922.png" alt="访问正常存在的文件" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">访问正常存在的文件</span></div></div><p>在前端请求后端数据</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端组件可以使用async</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// 请求后端数据</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`http://localhost:3000/api/blogs/<span class="subst">$&#123;params.slug&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">if</span> (json.<span class="property">error</span>)</span><br><span class="line">        html = <span class="string">&quot;Ooh! Something went wrong&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        html = json.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* prose让文本中的标题有对应的样式 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>结果:</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151617.png" alt="正常访问" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">正常访问</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151624.png" alt="访问不存在的md文件" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">访问不存在的md文件</span></div></div><p>到这里, 我们就告一段落了, 为了防止文章过长, 我将其他内容放到了单独的篇章, 你可以在下面点击跳转阅读</p><h1 id="下一步"><a href="#下一步" class="headerlink" title="下一步"></a>下一步</h1><h2 id="使用next-themes进行日夜主题切换"><a href="#使用next-themes进行日夜主题切换" class="headerlink" title="使用next-themes进行日夜主题切换"></a>使用next-themes进行日夜主题切换</h2><p>你见过别人的网站可以切换为明亮和黑暗样式的主题吗, 我们也可以实现</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-themes" href="https://www.npmjs.com/package/next-themes" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-themes</span><span class="cap link footnote">https://www.npmjs.com/package/next-themes</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="blog" href="https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/zh-cn/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">blog</span><span class="cap link footnote">https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/zh-cn/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="使用prisma连接数据库"><a href="#使用prisma连接数据库" class="headerlink" title="使用prisma连接数据库"></a>使用prisma连接数据库</h2><p>通过文件系统或缓存系统存储数据是一种选择, 但是使用数据库存储数据是更加常用的选择.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="prisma" href="https://www.prisma.io/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">prisma</span><span class="cap link footnote">https://www.prisma.io/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354210/prisma.svg"></div></div></a></div><h2 id="使用next-auth进行身份验证"><a href="#使用next-auth进行身份验证" class="headerlink" title="使用next-auth进行身份验证"></a>使用next-auth进行身份验证</h2><p>身份验证是应用程序常见的功能, 使用next-auth可以免去自己编写登录注册页的麻烦, 专注于实现身份验证逻辑</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-auth" href="https://next-auth.js.org/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-auth</span><span class="cap link footnote">https://next-auth.js.org/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="使用tiptap作为富文本编辑器"><a href="#使用tiptap作为富文本编辑器" class="headerlink" title="使用tiptap作为富文本编辑器"></a>使用tiptap作为富文本编辑器</h2><p>tiptap是一款现代化的无头富文本编辑器, 可以让我们轻松编写好看的页面内容</p><blockquote><p>如何通过代码定制tiptap? 查看我的最新文章(todo)</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="tiptap官方文档" href="https://tiptap.dev/docs/editor/getting-started/overview" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">tiptap官方文档</span><span class="cap link footnote">https://tiptap.dev/docs/editor/getting-started/overview</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div>]]></content>
    
    
    <summary type="html">nextjs入门 - v13</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>Next.js 入門 - v13</title>
    <link href="https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/jp/"/>
    <id>https://malcode-site.github.io/2024/08/25/nextjs/nextjs-beginner/jp/</id>
    <published>2024-08-25T10:35:48.000Z</published>
    <updated>2024-09-09T12:19:21.942Z</updated>
    
    <content type="html"><![CDATA[<h1 id="nextjsとは何か"><a href="#nextjsとは何か" class="headerlink" title="nextjsとは何か"></a>nextjsとは何か</h1><p>nextjs は react に基づくフルスタック SSR（サーバーサイド レンダリング）フレームワークであり、react<br>の自動設定に関連付けられた一連のツールを提供します。これにより、我々はアプリケーションの構築に集中でき、設定手順を簡略化します。</p><p>もう一回お願いしますが、もっともそれで問題が解決しなかった場合、引き続き質問をお願いします。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs" href="https://nextjs.org/docs" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs</span><span class="cap link footnote">https://nextjs.org/docs</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><h1 id="サーバーサイド-レンダリング（ssr）とは何か"><a href="#サーバーサイド-レンダリング（ssr）とは何か" class="headerlink" title="サーバーサイド レンダリング（ssr）とは何か"></a>サーバーサイド レンダリング（ssr）とは何か</h1><h2 id="spa"><a href="#spa" class="headerlink" title="spa"></a>spa</h2><p>サーバーサイド レンダリングについて話を持ってみましょう。<em>spa（単一ページ アプリケーション）</em> と言えば、react や vue<br>がその例です。これらは、クライアントに js をダウンロードさせ、<br>コンパイル、ビルドしてから、js 仮想 dom オブジェクトを作成し、一度に index.html にmount（マウント）する手法を取ります。たとえば：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192010.png" alt="spa アプリは、index.html ファイルを提供し、そこに指定された id を持つ div タグが含まれています" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">spa アプリは、index.html ファイルを提供し、そこに指定された id を持つ div タグが含まれています</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825192157.png" alt="次に、spa の入力 js によって、プログラムをレンダリングし、指定された div に mount する" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">次に、spa の入力 js によって、プログラムをレンダリングし、指定された div に mount する</span></div></div><p>他のすべての変更は、それに基づいて行われます。だから、これらは単一ページ アプリケーションと呼ばれます。<br>そして、spa アプリは、レンダリングとロジック処理を行う js ファイルをクライアントに置き、クライアントがレンダリングを担当するため、csrc（クライアントサイド<br>レンダリング）アプリとも言えます。</p><p>一方、サーバーサイド レンダリングは、サーバーが html ファイルをレンダリングしてクライアントに渡す手法です。異なる要求に応じて対象の<br>html ファイルを返す。</p><h2 id="比較"><a href="#比較" class="headerlink" title="比較"></a>比較</h2><ul><li><strong>パフォーメンス</strong><br>csrc はクライアントにレンダリング任務を任せ、性能の悪い機器に対してはグlitチな動作を示すため、サーバーの負担は軽減されます。逆に<br>ssr は、リクエストの尖鋒時に大量の要求を処理するため、大きくなる壓力を逃れませんが、クライアントの負担を軽減する。</li><li><strong>seo 友好性</strong><br>クライアントサイド レンダリングは、レンダリング前に web ページジョンスピーフィックに詳細な情報を得るのは困難であり、seo<br>に対して友好的ではないが、サーバーサイド レンダリングは、レンダリング済みのファイルを検索エンジン<br>スpiderに渡すため、この時点でのページジョンスピーフィックが基本的に完全であり、エンジンのアルゴリズムによる分析と認識を容易にする。</li><li><strong>初回ロードタイム</strong><br>csrc は js をクライアントにダウンロードさせてからレンダリングするため、js<br>がクライアントにダウンロードされるまでの間、空白の頁を見る可能性があります（最初の画面表示問題）<br>一方、ssr はサーバーで html をまずレンダリングし、このステップを省略し、クライアントの負担を軽減するため、ユーザーに迅速にコンテンツを表示できます。</li></ul><h1 id="nextjs-プロジェクトのセットアップ"><a href="#nextjs-プロジェクトのセットアップ" class="headerlink" title="nextjs プロジェクトのセットアップ"></a>nextjs プロジェクトのセットアップ</h1><h2 id="gitリポジトリ"><a href="#gitリポジトリ" class="headerlink" title="gitリポジトリ"></a>gitリポジトリ</h2><p>本文の教育内容は github リポジトリに保管されており、学習の際に参照できます。異なるブランチには異なる章が対応します。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="course-repository" href="https://github.com/malred/hexo-blog-nextjs-course" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">course-repository</span><span class="cap link footnote">https://github.com/malred/hexo-blog-nextjs-course</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h2 id="プロジェクトを作成する"><a href="#プロジェクトを作成する" class="headerlink" title="プロジェクトを作成する"></a>プロジェクトを作成する</h2><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm dlx create-next-app@latest next-course</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm create next-app</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825202518.png" data-fancybox="true"/></div></div><p>私のオープンソースプロジェクトを使用して作成する</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-init-cli" href="https://github.com/malred/rust-init-cli" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-init-cli</span><span class="cap link footnote">https://github.com/malred/rust-init-cli</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="rust-cli-panel" href="https://github.com/malred/rust-cli-panel" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">rust-cli-panel</span><span class="cap link footnote">https://github.com/malred/rust-cli-panel</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/512317/github-142.svg"></div></div></a></div><h1 id="機能1-ファイルルーティングシステム"><a href="#機能1-ファイルルーティングシステム" class="headerlink" title="機能1: ファイルルーティングシステム"></a>機能1: ファイルルーティングシステム</h1><blockquote><p>Next.js 13では、React Server Componentsに基づいて新たなApp<br>Routerが導入されました。このRouterでは、共有レイアウト、ネストされたルー、ロード状態、エラーハンドリングなどをサポートしています。</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="nextjs-route" href="https://nextjs.org/docs/app/building-your-application/routing" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">nextjs-route</span><span class="cap link footnote">https://nextjs.org/docs/app/building-your-application/routing</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354113/nextjs-icon.svg"></div></div></a></div><p>Next.js は自動的に <code>app</code> ディレクトリ内の <mark class="tag-plugin colorful mark" color="yellow">page.jsx/.tsx</mark><br>ファイルを認識し、ページを作成すると共に、親ディレクトリか同じ階層の <mark class="tag-plugin colorful mark" color="yellow">layout.jsx/.tsx</mark> ファイルをレイアウトとしてレンダリングします。</p><h2 id="試してみましょう"><a href="#試してみましょう" class="headerlink" title="試してみましょう"></a>試してみましょう</h2><p>ブログサイトを作成すると仮定します。サイト内のブログへのアクセスパスが site.example&#x2F;blog&#x2F;test&#x2F;<br>というものであるとき、こんなディレクトリ構造を作成してみましょう。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    + blog</span><br><span class="line">        + test</span><br><span class="line">            + page.tsx</span><br><span class="line">    - page.tsx</span><br><span class="line">    - layout.tsx</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/test/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">TestBlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Hi, there is a blog page!</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><mark class="tag-plugin colorful mark" color="yellow">app/page.tsx</mark>ファイルに、それへのリンクを追加してください<div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">blog</span>/<span class="attr">test</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                Go to test blog</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>起動させてください：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span> </span><br><span class="line">pnpm dev</span><br></pre></td></tr></table></figure><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="http://localhost:3000" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">http://localhost:3000</span><span class="cap link footnote">http://localhost:3000</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203047.png" alt="ok, デフォルトのcssスタイルのため、見た目が少し変なようです" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">ok, デフォルトのcssスタイルのため、見た目が少し変なようです</span></div></div><mark class="tag-plugin colorful mark" color="yellow">globals.css</mark>内の内容を編集して、背景をきれいにしましょう。<div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="comment">/*--foreground-rgb: 0, 0, 0;*/</span></span><br><span class="line">    <span class="comment">/*--background-start-rgb: 214, 219, 220;*/</span></span><br><span class="line">    <span class="comment">/*--background-end-rgb: 255, 255, 255;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>效果</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203505.png" alt="トップページ" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">トップページ</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="「Go to test blog」をクリックしてください" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">「Go to test blog」をクリックしてください</span></div></div><p>Ok, この挑戦に成功しました！<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/强.gif"/></span></p><h2 id="ルーをURLへのマッピング"><a href="#ルーをURLへのマッピング" class="headerlink" title="ルーをURLへのマッピング"></a>ルーをURLへのマッピング</h2><p>先ほどの例からわかるように、ファイルとルーの間のマッピング関係は次の通りです：</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/a/b/page.jsx</mark> -> <mark class="tag-plugin colorful mark" color="orange">site.example/a/b</mark><h2 id="動的ルー"><a href="#動的ルー" class="headerlink" title="動的ルー"></a>動的ルー</h2><p>あなたはもしかしたら、現在のURLがハードコーディングされていることに気づくかもしれません。10ページ分異なるブログページが必要とする場合（たとえばblog&#x2F;test2,<br>blog&#x2F;abc, blog&#x2F;startなど）、この方法では10ページ分のxxx&#x2F;page.js&#x2F;jsx&#x2F;ts&#x2F;tsxを手動で作成する必要があります。時間がかかり、效率的ではありません。</p><p>もちろん、Next.jsはこれを解決するための動的ルー機能を提供しています。</p><p>そのファイルルーのマッピングは次のようになります：</p><mark class="tag-plugin colorful mark" color="orange">file://site.dir/app/blog/[slug]/page.jsx</mark> -><mark class="tag-plugin colorful mark" color="orange">site.example/blog/a</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/b</mark>,<mark class="tag-plugin colorful mark" color="orange">site.example/blog/c</mark><h3 id="試してみましょう-1"><a href="#試してみましょう-1" class="headerlink" title="試してみましょう"></a>試してみましょう</h3><p>私たちのディレクトリ構造を編集してください。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - blog</span><br><span class="line">        + [slug]</span><br><span class="line">            + page.tsx</span><br></pre></td></tr></table></figure><p>ブログの内容ページを作成します。</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/*生成随机数*/&#125;</span></span><br><span class="line"><span class="language-xml">            blog &#123;Math.round(Math.random() * 10)&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825210024.png" alt="ブログ/aにアクセスすると、私たちの [slug]/page に到着しました" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">ブログ/aにアクセスすると、私たちの [slug]/page に到着しました</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825203631.png" alt="もし先ほどのblog/test/pageを残していれば、それが引き続き有効であることがわかります" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">もし先ほどのblog/test/pageを残していれば、それが引き続き有効であることがわかります</span></div></div><h2 id="レイアウト"><a href="#レイアウト" class="headerlink" title="レイアウト"></a>レイアウト</h2><p>Next.jsはレイアウトファイルを提供し、複数のルー間で共有されるUI機能を果たします。ナビゲーション時には、レイアウトは状態を維持しながら対話型を保って再描画しません。レイアウトはネスト可能でもあります。</p><p>レイアウトファイルを分析してみましょう。</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123;<span class="title class_">Metadata</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Inter</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/font/google&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./globals.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// これはフォントで、暫定的に気にしないでください</span></span><br><span class="line"><span class="keyword">const</span> inter = <span class="title class_">Inter</span>(&#123;<span class="attr">subsets</span>: [<span class="string">&quot;latin&quot;</span>]&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ページのメタデータを提供します</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">metadata</span>: <span class="title class_">Metadata</span> = &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;Create Next App&quot;</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">&quot;Generated by create next app&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*childrenはサブディレクトリの内容である（サブディレクトリのレイアウトとページを含む）*/&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><h3 id="ナビゲーションバーとフッターバーを追加しましょう。"><a href="#ナビゲーションバーとフッターバーを追加しましょう。" class="headerlink" title="ナビゲーションバーとフッターバーを追加しましょう。"></a>ナビゲーションバーとフッターバーを追加しましょう。</h3><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// components/footbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Footbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-gray-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">border-t</span> <span class="attr">border-t-gray-300</span> <span class="attr">sticky</span> <span class="attr">h-20</span> <span class="attr">w-full</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            footbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// components/navbar.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Navbar</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">bg-green-200</span> <span class="attr">border-b</span> <span class="attr">border-b-gray-300</span> <span class="attr">sticky</span> <span class="attr">w-full</span> <span class="attr">h-20</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            navbar</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><blockquote><p>まだtailwindcssを学んでいないかもしれません。この記事をご覧ください（todo）</p></blockquote><p>それらをlayout.tsxに追加してください。</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/layout.tsx</span></span><br><span class="line"><span class="comment">/// </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">RootLayout</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                       children,</span></span><br><span class="line"><span class="params">                                   &#125;: <span class="title class_">Readonly</span>&lt;&#123;</span></span><br><span class="line"><span class="params">    children: React.ReactNode;</span></span><br><span class="line"><span class="params">&#125;&gt;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">body</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Navbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/*children就是子目录里的内容（包含子目录的layout和page）*/&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Footbar</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>効果：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240825212940.png" data-fancybox="true"/></div></div><h1 id="ブログの内容を提供する"><a href="#ブログの内容を提供する" class="headerlink" title="ブログの内容を提供する"></a>ブログの内容を提供する</h1><p>OK、今は異なる名前をマッチングすることができる動的ルーを持っており、ナビゲーとフッターも作成しましたが、私たちはページにより多くのコンテンツを表示することを望んでいます。</p><h2 id="Markdownを書く"><a href="#Markdownを書く" class="headerlink" title="Markdownを書く"></a>Markdownを書く</h2><p>多くのメモ帳ソフトウェアはMarkdown構文をサポートしており、個人的には好んでいる方法です。現在、多数のnpmライブラリーはMarkdownファイルの内容をHTMLの富文本文字列に解析することができます。</p><blockquote><p>Markdown構文を学ぶ？</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="wikiをチェックしてください、または私の新しい記事を待ってください（todo）" href="https://en.wikipedia.org/wiki/Markdown" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">wikiをチェックしてください、または私の新しい記事を待ってください（todo）</span><span class="cap link footnote">https://en.wikipedia.org/wiki/Markdown</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/510065/markdown.svg"></div></div></a></div><p>ディレクトリ構造を変更してください</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">    - ...</span><br><span class="line">- contents</span><br><span class="line">    - mountain.md</span><br><span class="line">    - bird.md</span><br><span class="line">    - flower.md</span><br></pre></td></tr></table></figure><div class="tag-plugin colorful folders" ><details class="folder" index="0"><summary><span>mountain.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2022/10/24/12/20/mountains-7543273_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Summit Reflections: A Mountain&#x27;s Mirror to the Soul</span></span><br><span class="line"></span><br><span class="line">Climbing mountains is more than a physical endeavor; it&#x27;s a journey of the spirit, where each peak reveals a facet of</span><br><span class="line">inner strength. As I scaled the rugged trails, the grind of my boots against rock echoed the resilience required to</span><br><span class="line">surmount life&#x27;s challenges. The ascent, steep and demanding, taught me endurance. With each step, I found a metaphor for</span><br><span class="line">the effort needed to achieve one&#x27;s dreams.</span><br><span class="line"></span><br><span class="line">The view from the summit was not just a vista of vast landscapes but a perspective on the infinite possibilities life</span><br><span class="line">offers. It reminded me that after every great effort comes a broad expanse of opportunity. The descent, often</span><br><span class="line">overlooked, was no less instructive. It spoke of humility and caution; a reminder that what goes up must come down with</span><br><span class="line">grace.</span><br><span class="line"></span><br><span class="line">This mountain experience distilled life into a simple yet profound truth: the journey matters as much as the</span><br><span class="line">destination. It&#x27;s in the climb that we discover our mettle and in the view that we savor our triumphs.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="1"><summary><span>flower.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2023/03/19/05/31/flower-7861942_960_720.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Blossoming Insights: A Whiff of Flowers</span></span><br><span class="line"></span><br><span class="line">As I meandered through the garden, the air was thick with the sweet perfume of blooming flowers. Each petal, a tender</span><br><span class="line">brushstroke on nature&#x27;s canvas, painted a picture of grace and resilience. The flowers, in their silent language, spoke</span><br><span class="line">of beauty that survives amidst the harshest conditions.</span><br><span class="line"></span><br><span class="line">A delicate rose, its petals softer than silk, nodded gently in the breeze. It reminded me that even the most stunning</span><br><span class="line">forms can emerge from thorny paths. In the blossoms, I saw a reflection of life&#x27;s inherent beauty and the fortitude to</span><br><span class="line">flourish despite challenges.</span><br><span class="line"></span><br><span class="line">The garden, with its kaleidoscope of colors, became a sanctuary where every flower told a story of transformation and</span><br><span class="line">growth. My spirits were lifted by this quiet symphony of scents and hues, a testament to nature&#x27;s power to inspire and</span><br><span class="line">replenish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details><details class="folder" index="2"><summary><span>bird.md</span></summary><div class="body"><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://cdn.pixabay.com/photo/2024/01/19/18/08/bird-8519547_1280.jpg</span>)</span><br><span class="line"></span><br><span class="line"><span class="section"># Title: Capturing the Charm of Feathered Friends</span></span><br><span class="line"></span><br><span class="line">Today&#x27;s venture into the serene woods was a delightful encounter with nature&#x27;s delicate treasures. As I wandered through</span><br><span class="line">the dappled sunlight under the canopy, my camera was my faithful companion, ready to freeze moments in time.</span><br><span class="line"></span><br><span class="line">A soft trill caught my attention, leading me to a vibrant avian presence. A tiny bird, with feathers arrayed in hues of</span><br><span class="line">blue and green, perched gracefully on a branch. It seemed almost aware of its own charm, bobbing and turning, as if</span><br><span class="line">posing for an unseen audience.</span><br><span class="line"></span><br><span class="line">I snapped a sequence of shots, each click capturing a different angle of this natural splendor. The bird, in its</span><br><span class="line">innocence, carried on with its song, unaware of the beauty it bestowed upon my day.</span><br><span class="line"></span><br><span class="line">As I left the woods, my heart felt lighter, and my camera held a piece of joy that I will cherish. These moments of</span><br><span class="line">connection with nature are what truly nourish the soul.</span><br><span class="line"></span><br><span class="line">(<span class="emphasis">_create by AI_</span>)</span><br></pre></td></tr></table></figure></div></details></div><h2 id="ファイルを読み取り表示する"><a href="#ファイルを読み取り表示する" class="headerlink" title="ファイルを読み取り表示する"></a>ファイルを読み取り表示する</h2><p>Markdownを解析するための依存関係をインストールします。</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i marked</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i marked</span><br></pre></td></tr></table></figure></div></div><p>コードからファイルを読み取り解析します。</p><div class="tag-plugin colorful note" color="blue" child="codeblock"><div class="body"><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// サーバーサイドコンポーネントは asyncを使用できます</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // URLパラメータを受け取る (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>よいです、今私たちはmarkdownテキストをページへの解析レンダリングに成功しました！</p><p>効果：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826092056.png" data-fancybox="true"/></div></div><h2 id="文字スタイルの問題を解決する"><a href="#文字スタイルの問題を解決する" class="headerlink" title="文字スタイルの問題を解決する"></a>文字スタイルの問題を解決する</h2><p>あなたはおそらく気づいています、私たちの見出しスタイルと普通のテキストが同じです。これはtailwindcssがデフォルトのCSSスタイルをクリアーしたためです。私たちはライブラリを使用してこの問題を解決できます。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="tailwind-typographyとデフォルトスタイルの解釈" href="https://tailwindcss.com/blog/tailwindcss-typography" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">tailwind-typographyとデフォルトスタイルの解釈</span><span class="cap link footnote">https://tailwindcss.com/blog/tailwindcss-typography</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/374118/tailwind.svg"></div></div></a></div><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -save-dev @tailwindcss/typography</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">or</span></span><br><span class="line">pnpm i -save-dev @tailwindcss/typography</span><br></pre></td></tr></table></figure></div></div><p>Tailwind CSSプラグインとして登録する</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tailwind.config.ts</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">config</span>: <span class="title class_">Config</span> = &#123;</span><br><span class="line">    <span class="comment">/// ...</span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="built_in">require</span>(<span class="string">&#x27;@tailwindcss/typography&#x27;</span>)</span><br><span class="line">    ],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> config;</span><br></pre></td></tr></table></figure><p>そしてコンポーネントにproseクラス名を追加します。</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;params.slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> html = <span class="title function_">marked</span>(text)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* proseにより、テキスト中の見出しに対応するスタイルが与えられます。 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>サービスを再起動し、ページを再度訪問します。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826142919.png" data-fancybox="true"/></div></div><h1 id="機能2-APIインターフェイスの提供"><a href="#機能2-APIインターフェイスの提供" class="headerlink" title="機能2: APIインターフェイスの提供"></a>機能2: APIインターフェイスの提供</h1><p>Next.jsはapiディレクトリ下のファイルをバックエンドインターフェイスとして解析するため、HTTPリクエストを受け入れて処理を行います。</p><p>私たちはMarkdownファイルの読み取りと解析操作をバックエンド（apiディレクトリ）に移し、レンダリング操作をフロントエンド（appディレクトリ）に残します。</p><h2 id="試してみましょう-2"><a href="#試してみましょう-2" class="headerlink" title="試してみましょう"></a>試してみましょう</h2><p>ディレクトリ構造を変更しましょう。</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- app</span><br><span class="line">  + api</span><br><span class="line">      + blogs</span><br><span class="line">          + [slug]</span><br><span class="line">              + route.ts </span><br></pre></td></tr></table></figure><p>この時点でのファイルシステムとURLの対応関係は</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app/api/blogs/[slug]/route.ts -&gt; site.example.com/api/blogs/a, site.example.com/api/blogs/b, ...</span><br></pre></td></tr></table></figure><p>リクエストを処理するコードを書きます。</p><div class="tag-plugin colorful note" color="green" child="codeblock"><div class="body"><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/blogs/route.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span>&#125; <span class="keyword">from</span> <span class="string">&quot;next/server&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;readFile&#125; <span class="keyword">from</span> <span class="string">&quot;node:fs/promises&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;marked&#125; <span class="keyword">from</span> <span class="string">&quot;marked&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收GET请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">GET</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="comment">// 解析url</span></span><br><span class="line">    <span class="keyword">let</span> slug = req.<span class="property">url</span>.<span class="title function_">slice</span>(</span><br><span class="line">        req.<span class="property">url</span>.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>,</span><br><span class="line">        req.<span class="property">url</span>.<span class="property">length</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 读取md文件</span></span><br><span class="line">        <span class="keyword">const</span> text = <span class="keyword">await</span> <span class="title function_">readFile</span>(<span class="string">`./contents/<span class="subst">$&#123;slug&#125;</span>.md`</span>, <span class="string">&#x27;utf8&#x27;</span>)</span><br><span class="line">        html = <span class="title function_">marked</span>(text)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(err)</span><br><span class="line">        <span class="comment">// 错误返回</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;<span class="attr">error</span>: err&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回html内容</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;html&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接收POST请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">POST</span>(<span class="params"><span class="attr">req</span>: <span class="title class_">NextRequest</span></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(&#123;&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><p>結果を見てください：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150820.png" alt="存在しないmdファイルにアクセス" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">存在しないmdファイルにアクセス</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826150922.png" alt="通常のファイルにアクセス" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">通常のファイルにアクセス</span></div></div><p>フロントエンドからバックエンドデータをリクエスト</p><figure class="highlight typescript"><figcaption><span>jsx</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/blog/[slug]/page.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务端组件可以使用async</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">BlogPage</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">                                           params,</span></span><br><span class="line"><span class="params">                                           searchParams,</span></span><br><span class="line"><span class="params">                                       &#125;: &#123;</span></span><br><span class="line"><span class="params">    params: &#123; slug: <span class="built_in">string</span> &#125; // 接收url参数: (/blog/[slug] -&gt; slug)</span></span><br><span class="line"><span class="params">    searchParams: &#123;&#125;</span></span><br><span class="line"><span class="params">&#125;</span>) &#123;</span><br><span class="line">    <span class="comment">// 请求后端数据</span></span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`http://localhost:3000/api/blogs/<span class="subst">$&#123;params.slug&#125;</span>`</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">let</span> json = <span class="keyword">await</span> res.<span class="title function_">json</span>()</span><br><span class="line">    <span class="keyword">let</span> html</span><br><span class="line">    <span class="keyword">if</span> (json.<span class="property">error</span>)</span><br><span class="line">        html = <span class="string">&quot;Ooh! Something went wrong&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        html = json.<span class="property">html</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="comment">// flex flex-row justify-center -&gt; 内容居中</span></span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">w-screen</span> <span class="attr">flex</span> <span class="attr">flex-row</span> <span class="attr">justify-center</span>&#x27;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;/* prose让文本中的标题有对应的样式 */&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&#x27;<span class="attr">prose</span>&#x27;&#125; <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;__html:</span> <span class="attr">html</span>&#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>結果：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151617.png" alt="通常のアクセス" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">通常のアクセス</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/20240826151624.png" alt="存在しないmdファイルにアクセス" data-fancybox="true"/></div><div class="image-meta"><span class="image-caption center">存在しないmdファイルにアクセス</span></div></div><p>ここまで、私たちは一旦おさらぐことにします。長い文章を防ぎ、他の内容を別の篇章にまきましており、下のリンクをクリックすることができます。</p><h1 id="次のステップ"><a href="#次のステップ" class="headerlink" title="次のステップ"></a>次のステップ</h1><h2 id="next-themesを使用して日夜テーマを切替える"><a href="#next-themesを使用して日夜テーマを切替える" class="headerlink" title="next-themesを使用して日夜テーマを切替える"></a>next-themesを使用して日夜テーマを切替える</h2><p>他人のウェブサイトが明るいテーマと暗いテーマを切り替えることがあっただろうか、私たちも実現することができます。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-themes" href="https://www.npmjs.com/package/next-themes" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-themes</span><span class="cap link footnote">https://www.npmjs.com/package/next-themes</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><div class="tag-plugin link dis-select"><a class="link-card plain" title="blog" href="https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/jp/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">blog</span><span class="cap link footnote">https://malcode-site.github.io/2024/08/27/nextjs/nextjs-beginner-themes/jp/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="prismaを使用してデータベースに接続する"><a href="#prismaを使用してデータベースに接続する" class="headerlink" title="prismaを使用してデータベースに接続する"></a>prismaを使用してデータベースに接続する</h2><p>ファイルシステムやキャッシュシステムを介してデータを保管するのが一種の選択肢ですが、より一般的に使用されるのはデータベースです。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="prisma" href="https://www.prisma.io/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">prisma</span><span class="cap link footnote">https://www.prisma.io/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/354210/prisma.svg"></div></div></a></div><h2 id="next-authを使用して認証を行う"><a href="#next-authを使用して認証を行う" class="headerlink" title="next-authを使用して認証を行う"></a>next-authを使用して認証を行う</h2><p>アプリケーションの一般的な機能として、next-authを使用することでログインと登録ページを自分で作成する必要がなくなり、認証ロジックの実現に専念することができます。</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="next-auth" href="https://next-auth.js.org/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">next-auth</span><span class="cap link footnote">https://next-auth.js.org/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><h2 id="tiptapを使用してリッチテキストエディタとする"><a href="#tiptapを使用してリッチテキストエディタとする" class="headerlink" title="tiptapを使用してリッチテキストエディタとする"></a>tiptapを使用してリッチテキストエディタとする</h2><p>tiptapは現代的なヘッドレスリッチテキストエディタであり、私たちは魅力のあるページコンテンツを簡単に書くことができます。</p><blockquote><p>コードを通じてtiptapをカスタマイズする方法は？最新の記事をチェックアウトしてください(todo)</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="tiptap公式ガイド" href="https://tiptap.dev/docs/editor/getting-started/overview" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">tiptap公式ガイド</span><span class="cap link footnote">https://tiptap.dev/docs/editor/getting-started/overview</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div>]]></content>
    
    
    <summary type="html">Next.js 入門 - v13</summary>
    
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/categories/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/categories/nextjs/frontend/"/>
    
    
    <category term="nextjs" scheme="https://malcode-site.github.io/tags/nextjs/"/>
    
    <category term="frontend" scheme="https://malcode-site.github.io/tags/frontend/"/>
    
  </entry>
  
  <entry>
    <title>如何做网站SEO - 面向初学者</title>
    <link href="https://malcode-site.github.io/2024/08/25/seo/how-to-SEO/zh-cn/"/>
    <id>https://malcode-site.github.io/2024/08/25/seo/how-to-SEO/zh-cn/</id>
    <published>2024-08-24T23:07:24.000Z</published>
    <updated>2024-08-25T04:45:20.237Z</updated>
    
    <content type="html"><![CDATA[<h1 id="说在前面"><a href="#说在前面" class="headerlink" title="说在前面"></a>说在前面</h1><p>我正在使用hexos记录我的博客文章, 但是我暂时没有找到如何对我当前的外观主题进行国际化配置, 所以我使用中英混合的方法写作<br>(我也会尝试全英和全中文分开写文章) 如果觉得我的风格不太好, 请在评论区告诉我如何改进</p><h1 id="什么是SEO"><a href="#什么是SEO" class="headerlink" title="什么是SEO"></a>什么是SEO</h1><p>SEO是Search Engine Optimization的简写, 它就是利用各种技术和过程，提高网站在搜索引擎结果页中的自然排名，<br>以增加网站的有针对性的流量, 从而为你的网站或你的产品提高销售额, 带来更多收益</p><p>它不是一种可以简单地直接购买的服务, 或者一种死板不变的技术, 它是一个需要持续性付出有效努力的决策.</p><p>所以, 没有任何一个人可以肯定地说, 我的SEO方案是唯一且有效的, 是绝对通用的. 但是, 我将给予你一些建议, 来为你提供可用的参考.</p><h1 id="SEO策略1-页内SEO"><a href="#SEO策略1-页内SEO" class="headerlink" title="SEO策略1: 页内SEO"></a>SEO策略1: 页内SEO</h1><p>页内SEO指的是针对你的网站的内容进行优化, 以更好地提供服务, 并让搜索引擎能够更好地抓取和检索到你的网站.</p><h2 id="1-优化文案内容"><a href="#1-优化文案内容" class="headerlink" title="1. 优化文案内容"></a>1. 优化文案内容</h2><ul><li><strong>高质量内容</strong>:<br>高质量的内容是很重要的, 当你的内容越优质, 用户越会留存, 并可能查看你的站点的更多信息, 用户停留的时间越长,<br>搜索引擎算法会认为你的网站内容是用户中心和高质量的, 并更多地为其他潜在用户推荐</li><li><strong>相关性</strong><br>搜索引擎会根据内容的搜索相关性来进行分析, 你的网站内容和用户的搜索关键词相关度高的时候, 你的网站排名会提高.</li><li><strong>良好易读结构</strong><br>当我们第一次阅读一篇文章, 最先关注的往往不是密集的文字, 而是显而易见的醒目标题, 如果能提高良好的标题结构, 会利用用户进行查看,<br>而不是被大段的文字吓退</li><li><strong>图片中的alt属性</strong><br>如果你是网站的编程人员, 那么, 为img标签提供alt属性值是有帮助的, 搜索引擎算法会将alt值和图片进行关联, 从而更好地理解图片内容</li><li><strong>链接Link的rel属性</strong><br>如果你是网站的编程人员, 你可以通过a标签的rel属性向谷歌搜索引擎说明您的网站与链接页之间的关系, 防止追踪某些广告链接等可能和内容无关的信息<div class="tag-plugin link dis-select"><a class="link-card plain" title="More_Info" href="https://developers.google.com/search/docs/crawling-indexing/qualify-outbound-links" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">More_Info</span><span class="cap link footnote">https://developers.google.com/search/docs/crawling-indexing/qualify-outbound-links</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/475656/google-color.svg"></div></div></a></div></li></ul><h2 id="2-URL优化"><a href="#2-URL优化" class="headerlink" title="2. URL优化"></a>2. URL优化</h2><p>当我们访问网络上的一个资源, 总是会在网站搜索框中输入对应的URL地址, 试想一下,<br>如果一个图片的地址是site.example&#x2F;?b&#x3D;fksdlfnwejl&amp;a&#x3D;jlfnhwnfgevrnv%dfa%fs%fsa,<br>你会它真实可信吗<br>如果是image.com&#x2F;img&#x2F;nature&#x2F;butterfly.png呢</p><ul><li><strong>让URL具有易读性</strong><br>简化你的URL, 如果你的网站是博客网站, 那么用博客名称作为url的一部分是不错的, 比如site.com&#x2F;blogs&#x2F;how-to-seo&#x2F;</li><li><strong>URL中放入关键词</strong><br>在URL中放入关键词可用方便搜索引擎识别, 也可以让用户明确他将要看到的是什么类型的内容</li></ul><h1 id="SEO策略2-页外SEO"><a href="#SEO策略2-页外SEO" class="headerlink" title="SEO策略2: 页外SEO"></a>SEO策略2: 页外SEO</h1><p>页外SEO就是在你站点之外进行的SEO操作, 比如在他人网站上发布链接&#x2F;在社交平台分享你的网站…, 页外SEO往往需要时间的积累,<br>不是可以简单购买或优化站点内容就能做到的</p><p>我将分享几点页外SEO的可行策略:</p><ul><li><p><strong>分享(Sharing)</strong><br>创造优质的内容固然重要, 但是也需要让用户可以看到, 写下优质的文章, 并且让你的用户可以轻松地分享你的站点<br>(比如在wordpress上使用社交分享插件), 这将增加你的影响力</p></li><li><p><strong>良好的URL(Good URLs)</strong><br>让你的网站的URL易于分享, 如果你的网站URL看起来很奇怪, 外部用户可能不会点开</p></li><li><p><strong>在社交媒体上运营(Social Media Presence)</strong><br>社交媒体是现代人最常使用的网络服务, 天生就可以带来巨大曝光量, 运营好你的网站账号, 分享有价值的站点内容到社交平台上,<br>可以帮助你积累更多客户</p></li><li><p><strong>建立反向链接(Building Backlinks)</strong><br>反向链接是从一个网站上的页面到另一个网站的链接, 如果你的内容够好, 在外部网站中被引用(或者你发布到别的网站上),<br>这将会给你带来额外的流量.</p></li></ul><h1 id="SEO工具"><a href="#SEO工具" class="headerlink" title="SEO工具"></a>SEO工具</h1><ul><li><p><strong>semrush</strong> 关键词挖掘&#x2F;同行网站分析等综合性工具</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="semrush" href="https://www.semrush.com/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">semrush</span><span class="cap link footnote">https://www.semrush.com/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div></li><li><p><strong>moz</strong> 外链分析工具</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="moz" href="https://moz.com/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">moz</span><span class="cap link footnote">https://moz.com/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/153949/moz.svg"></div></div></a></div></li><li><p><strong>Kwfinder</strong> 关键词分析工具</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="kwfinder" href="https://mangools.com/kwfinder" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">kwfinder</span><span class="cap link footnote">https://mangools.com/kwfinder</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div></li><li><p><strong>Spinrewriter</strong> 英文伪原创工具</p></li><li><p><strong>LongTailPro</strong> 长尾关键词分析工具</p></li><li><p><strong>WooRank</strong> 网站SEO优化评估</p></li><li><p><strong>Ubersuggest</strong> 综合SEO工具</p></li><li><p><strong>WordAI</strong> 基于AI生成伪原创内容</p></li><li><p><strong>Indexification</strong> 让你的英文外链更快被收录</p></li><li><p><strong>Spamzilla</strong> 过期域名检索, 寻找并购买带外链的过期域名 .</p></li><li><p><strong>iSpionage</strong> 竞争情报分析, 助力优化SEO</p></li><li><p><strong>StoryBase</strong> 长尾关键词研究工具</p></li></ul><h1 id="更多"><a href="#更多" class="headerlink" title="更多"></a>更多</h1><p>搜索引擎总是在变化的, SEO策略也要与时俱进, 本篇文章或许不久就会过时, 但是你依然可以作为决策的参考.</p><p>本篇文章不可能将所有的知识写出来, 但是提供了一个基本的框架. 为了学习更多更深入的SEO方案, 我推荐你去Google的搜索引擎文档中进一步的学习</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="developers.google.com/search" href="https://developers.google.com/search/docs/fundamentals/seo-starter-guide" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">developers.google.com/search</span><span class="cap link footnote">https://developers.google.com/search/docs/fundamentals/seo-starter-guide</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/475656/google-color.svg"></div></div></a></div><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>感谢你的观看 </p>]]></content>
    
    
    <summary type="html">如何做网站SEO - 面向初学者</summary>
    
    
    
    <category term="SEO" scheme="https://malcode-site.github.io/categories/SEO/"/>
    
    <category term="beginner" scheme="https://malcode-site.github.io/categories/SEO/beginner/"/>
    
    
    <category term="SEO" scheme="https://malcode-site.github.io/tags/SEO/"/>
    
    <category term="beginner" scheme="https://malcode-site.github.io/tags/beginner/"/>
    
  </entry>
  
  <entry>
    <title>How to do SEO - For Beginners (en)</title>
    <link href="https://malcode-site.github.io/2024/08/25/seo/how-to-SEO/en/"/>
    <id>https://malcode-site.github.io/2024/08/25/seo/how-to-SEO/en/</id>
    <published>2024-08-24T23:07:24.000Z</published>
    <updated>2024-08-25T06:33:59.323Z</updated>
    
    <content type="html"><![CDATA[<h1 id="before"><a href="#before" class="headerlink" title="before"></a>before</h1><p>I am using Hexo to document my blog articles, but I haven’t found how to configure the internationalization of my<br>current theme appearance, so I write in a mix of Chinese and English.</p><p>(I will also try to write articles separately in full English and full Chinese). If you think my style is not very good,<br>please tell me how to improve in the comments section.</p><h1 id="What-is-SEO"><a href="#What-is-SEO" class="headerlink" title="What is SEO"></a>What is SEO</h1><p>SEO, which stands for Search Engine Optimization, involves utilizing various techniques and processes to enhance a<br>website’s natural ranking in search engine results pages (SERPs). This, in turn, increases targeted traffic to your site<br>or product, thereby boosting sales and revenue.</p><p>It is not a service that can simply be bought directly, nor is it an unchanging technology; rather, it is a decision<br>that requires continuous and effective effort.</p><p>Therefore, no one can definitively claim that their SEO strategy is the only effective one or absolutely universal.<br>However, I will provide you with some suggestions to offer viable references.</p><h1 id="SEO-Strategy-1-On-Page-SEO"><a href="#SEO-Strategy-1-On-Page-SEO" class="headerlink" title="SEO Strategy 1: On-Page SEO"></a>SEO Strategy 1: On-Page SEO</h1><p>On-page SEO refers to optimizing the content of your website to better serve users and enable search engines to more<br>effectively crawl and index your site.</p><h2 id="1-Optimize-the-Content-of-Copywriting"><a href="#1-Optimize-the-Content-of-Copywriting" class="headerlink" title="1. Optimize the Content of Copywriting"></a>1. Optimize the Content of Copywriting</h2><ul><li><strong>High-Quality Content</strong>:<br>High-quality content is essential. The better your content, the more users will stay and potentially explore more<br>information on your site. The longer users stay, the more search engine algorithms will consider your site’s content<br>to be user-centric and high-quality, thereby recommending it more to other potential users.</li><li><strong>Relevance</strong><br>Search engines analyze content based on its relevance to searches. When your site’s content is highly relevant to<br>users’ search keywords, your site’s ranking will improve.</li><li><strong>Good Readability Structure</strong><br>When we first read an article, our initial focus is often not on dense text but on prominent headlines. If you can<br>enhance the structure of your headlines, it will encourage users to look further instead of being intimidated by large<br>blocks of text.</li><li><strong>Alt Attributes in Images</strong><br>If you are a website programmer, providing alt attribute values for img tags is helpful. Search engine algorithms<br>associate alt values with images to better understand their content.</li><li><strong>Rel Attribute of Links</strong><br>If you are a website programmer, you can use the rel attribute of the a tag to explain to Google’s search engine the<br>relationship between your site and the linked page, preventing the tracking of certain advertisement links or other<br>potentially irrelevant information.<div class="tag-plugin link dis-select"><a class="link-card plain" title="More_Info" href="https://developers.google.com/search/docs/crawling-indexing/qualify-outbound-links" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">More_Info</span><span class="cap link footnote">https://developers.google.com/search/docs/crawling-indexing/qualify-outbound-links</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/475656/google-color.svg"></div></div></a></div></li></ul><h2 id="2-URL-Optimization"><a href="#2-URL-Optimization" class="headerlink" title="2. URL Optimization"></a>2. URL Optimization</h2><p>When we access a resource online, we always enter the corresponding URL into the website’s search bar. Imagine this: if<br>an image’s address is site.example&#x2F;?b&#x3D;fksdlfnwejl&amp;a&#x3D;jlfnhwnfgevrnv%dfa%fs%fsa, would you consider it trustworthy?<br>How about image.com&#x2F;img&#x2F;nature&#x2F;butterfly.png?</p><ul><li><strong>Make URLs Readable</strong><br>Simplify your URLs. If your website is a blog, using the blog name as part of the URL is a good idea, such as<br>site.com&#x2F;blogs&#x2F;how-to-seo&#x2F;</li><li><strong>Include Keywords in URLs</strong><br>Including keywords in the URL can help search engines recognize them and also let users know what type of content they<br>are about to see.</li></ul><h1 id="SEO-Strategy-2-Out-Page-SEO"><a href="#SEO-Strategy-2-Out-Page-SEO" class="headerlink" title="SEO Strategy 2: Out-Page SEO"></a>SEO Strategy 2: Out-Page SEO</h1><p>Off-page SEO refers to the SEO activities conducted outside your own website, such as publishing links on other websites<br>or sharing your site on social media platforms. Off-page SEO often requires time to accumulate and cannot be simply<br>achieved through purchasing or optimizing site content.</p><p>I will share a few viable strategies for off-page SEO:</p><ul><li><p><strong>Sharing</strong><br>Creating high-quality content is important, but it also needs to be seen by users. Write excellent articles and make<br>it<br>easy for your users to share your site (for example, use social sharing plugins on WordPress). This will increase your<br>influence.</p></li><li><p><strong>Good URLs</strong><br>Make your website’s URLs easy to share. If your website URL looks strange, external users may not click on it.</p></li><li><p><strong>Social Media Presence</strong><br>Social media is one of the most frequently used online services by modern people and inherently offers significant<br>exposure. Managing your website’s accounts well and sharing valuable content from your site on social platforms can<br>help you accumulate more customers.</p></li><li><p><strong>Building Backlinks</strong><br>Backlinks are links from one website page to another. If your content is good enough to be cited on external sites (or<br>if you post on other sites), this will bring you additional traffic.</p></li></ul><h1 id="SEO-tools"><a href="#SEO-tools" class="headerlink" title="SEO tools"></a>SEO tools</h1><ul><li><p><strong>semrush</strong> Keywords Mining&#x2F;Comprehensive Tools for Competitor Website Analysis</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="semrush" href="https://www.semrush.com/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">semrush</span><span class="cap link footnote">https://www.semrush.com/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div></li><li><p><strong>moz</strong> Backlink Analysis Tools</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="moz" href="https://moz.com/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">moz</span><span class="cap link footnote">https://moz.com/</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/153949/moz.svg"></div></div></a></div></li><li><p><strong>Kwfinder</strong> Keywords Analysis Tools</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="kwfinder" href="https://mangools.com/kwfinder" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">kwfinder</span><span class="cap link footnote">https://mangools.com/kwfinder</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div></li><li><p><strong>Spinrewriter</strong> Translation English Pseudo-Original Tool</p></li><li><p><strong>LongTailPro</strong> Long Tail Keyword Analysis Tool</p></li><li><p><strong>WooRank</strong> Website SEO Optimization Evaluation</p></li><li><p><strong>Ubersuggest</strong> Comprehensive SEO Tool</p></li><li><p><strong>WordAI</strong> AI-generated pseudo-original content</p></li><li><p><strong>Indexification</strong> Accelerate the indexing of your English backlinks.</p></li><li><p><strong>Spamzilla</strong> Expired domain search, locate and purchase expired domains with existing backlinks.</p></li><li><p><strong>iSpionage</strong> Competitive intelligence analysis to enhance SEO optimization.</p></li><li><p><strong>StoryBase</strong> Long-tail keyword research tool.</p></li></ul><h1 id="more"><a href="#more" class="headerlink" title="more"></a>more</h1><p>Search engines are always evolving, and so must SEO strategies. This article may soon be outdated, but it can still<br>serve as a reference for decision-making.</p><p>This article cannot cover all the knowledge, but it provides a basic framework. For more in-depth SEO strategies, I<br>recommend further study in Google’s search engine documentation.</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="developers.google.com/search" href="https://developers.google.com/search/docs/fundamentals/seo-starter-guide" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">developers.google.com/search</span><span class="cap link footnote">https://developers.google.com/search/docs/fundamentals/seo-starter-guide</span></div><div class="right"><div class="lazy img" data-bg="https://www.svgrepo.com/show/475656/google-color.svg"></div></div></a></div><h1 id="after-all"><a href="#after-all" class="headerlink" title="after all"></a>after all</h1><p>thanks for watch</p>]]></content>
    
    
    <summary type="html">How to do SEO - For Beginners (en)</summary>
    
    
    
    <category term="SEO" scheme="https://malcode-site.github.io/categories/SEO/"/>
    
    <category term="beginner" scheme="https://malcode-site.github.io/categories/SEO/beginner/"/>
    
    
    <category term="SEO" scheme="https://malcode-site.github.io/tags/SEO/"/>
    
    <category term="beginner" scheme="https://malcode-site.github.io/tags/beginner/"/>
    
  </entry>
  
  <entry>
    <title>byd</title>
    <link href="https://malcode-site.github.io/2024/08/24/%E6%B5%8B%E8%AF%95/byd/"/>
    <id>https://malcode-site.github.io/2024/08/24/%E6%B5%8B%E8%AF%95/byd/</id>
    <published>2024-08-24T01:50:28.000Z</published>
    <updated>2024-08-30T13:40:59.183Z</updated>
    
    <content type="html"><![CDATA[<h1 id="byd-test"><a href="#byd-test" class="headerlink" title="byd test"></a>byd test</h1><p>a test</p><h2 id="image"><a href="#image" class="headerlink" title="image"></a>image</h2><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/getqrcode.png" alt="我的公众号" data-fancybox="true"/><a class="image-download blur" style="opacity:0" target="_blank" download="我的公众号" href="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/getqrcode.png"><svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3734"><path d="M561.00682908 685.55838913a111.03077546 111.03077546 0 0 1-106.8895062 0L256.23182837 487.72885783a55.96309219 55.96309219 0 0 1 79.13181253-79.18777574L450.70357448 523.88101491V181.55477937a55.96309219 55.96309219 0 0 1 111.92618438 0v344.06109173l117.07478902-117.07478901a55.96309219 55.96309219 0 0 1 79.13181252 79.18777574zM282.81429711 797.1487951h447.70473912a55.96309219 55.96309219 0 0 1 0 111.92618438H282.81429711a55.96309219 55.96309219 0 0 1 0-111.92618438z" p-id="3735"></path></svg></a></div><div class="image-meta"><span class="image-caption center">我的公众号</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/logo%20(1).png" alt="logo" data-fancybox="true"/><a class="image-download blur" style="opacity:0" target="_blank" download="logo" href="https://raw.githubusercontent.com/malred/malcode-site-photos/master/img/logo%20(1).png"><svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3734"><path d="M561.00682908 685.55838913a111.03077546 111.03077546 0 0 1-106.8895062 0L256.23182837 487.72885783a55.96309219 55.96309219 0 0 1 79.13181253-79.18777574L450.70357448 523.88101491V181.55477937a55.96309219 55.96309219 0 0 1 111.92618438 0v344.06109173l117.07478902-117.07478901a55.96309219 55.96309219 0 0 1 79.13181252 79.18777574zM282.81429711 797.1487951h447.70473912a55.96309219 55.96309219 0 0 1 0 111.92618438H282.81429711a55.96309219 55.96309219 0 0 1 0-111.92618438z" p-id="3735"></path></svg></a></div><div class="image-meta"><span class="image-caption center">logo</span></div></div><p>宽度较小而高度较大的图片，可以设置宽、高、填充间距、背景色等对其布局进行优化，使得它在不同宽度的屏幕下都能获得不错的视觉体验：</p><div class="tag-plugin image"><div class="image-bg" style="background:white;padding:16px;"><img src="/assets/xaoxuu/mirror/apple/documentation/watchkit/06d45110-1dd7-49a4-a413-9f5159ecdd0e.png" data-fancybox="true" style="width:200px;"/></div></div><p>可以设置填充宽度和颜色，支持 bg:var(–card) 动态颜色，能够适配暗黑模式：</p><div class="tag-plugin image"><div class="image-bg" style="background:var(--card);padding:16px;"><img src="/assets/wiki/stellar/icon.svg" data-fancybox="true"/></div></div><h2 id="emoji"><a href="#emoji" class="headerlink" title="emoji"></a>emoji</h2><p><a href="https://gcore.jsdelivr.net/gh/cdn-x/emoji/">more emoji</a></p><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/爱你.gif"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatattentionreverse.png"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/tieba/滑稽.png"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/qq/K歌.gif"/></span><center><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png" style="height:1em"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png" style="height:2em"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png" style="height:3em"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png" style="height:2em"/></span><span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png" style="height:1em"/></span></center><h2 id="icon-图标标签"><a href="#icon-图标标签" class="headerlink" title="icon 图标标签"></a>icon 图标标签</h2><p><a href="https://icon-sets.iconify.design/">more icon</a><br>icons.yml 中的图标：<span class="tag-plugin icon colorful" color="accent"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></span><br>外链图标：<span class="tag-plugin icon colorful" color="accent"><img  src="https://api.iconify.design/solar:link-circle-bold.svg" /></span><br>指定颜色：<span class="tag-plugin icon colorful" color="red"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 256 256"><path fill="currentColor" d="M225.86 102.82c-3.77-3.94-7.67-8-9.14-11.57c-1.36-3.27-1.44-8.69-1.52-13.94c-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52c-3.56-1.47-7.63-5.37-11.57-9.14C146.28 23.51 138.44 16 128 16s-18.27 7.51-25.18 14.14c-3.94 3.77-8 7.67-11.57 9.14c-3.25 1.36-8.69 1.44-13.94 1.52c-9.76.15-20.82.31-28.51 8s-7.8 18.75-8 28.51c-.08 5.25-.16 10.67-1.52 13.94c-1.47 3.56-5.37 7.63-9.14 11.57C23.51 109.72 16 117.56 16 128s7.51 18.27 14.14 25.18c3.77 3.94 7.67 8 9.14 11.57c1.36 3.27 1.44 8.69 1.52 13.94c.15 9.76.31 20.82 8 28.51s18.75 7.85 28.51 8c5.25.08 10.67.16 13.94 1.52c3.56 1.47 7.63 5.37 11.57 9.14c6.9 6.63 14.74 14.14 25.18 14.14s18.27-7.51 25.18-14.14c3.94-3.77 8-7.67 11.57-9.14c3.27-1.36 8.69-1.44 13.94-1.52c9.76-.15 20.82-.31 28.51-8s7.85-18.75 8-28.51c.08-5.25.16-10.67 1.52-13.94c1.47-3.56 5.37-7.63 9.14-11.57c6.63-6.9 14.14-14.74 14.14-25.18s-7.51-18.27-14.14-25.18M128 192a12 12 0 1 1 12-12a12 12 0 0 1-12 12m8-48.72v.72a8 8 0 0 1-16 0v-8a8 8 0 0 1 8-8c13.23 0 24-9 24-20s-10.77-20-24-20s-24 9-24 20v4a8 8 0 0 1-16 0v-4c0-19.85 17.94-36 40-36s40 16.15 40 36c0 17.38-13.76 31.93-32 35.28"/></svg></span></p><h2 id="mark"><a href="#mark" class="headerlink" title="mark"></a>mark</h2><p>支持多彩标记，包括：</p><mark class="tag-plugin colorful mark" color="yellow">默认</mark><mark class="tag-plugin colorful mark" color="red">红</mark><mark class="tag-plugin colorful mark" color="orange">橙</mark><mark class="tag-plugin colorful mark" color="yellow">黄</mark><mark class="tag-plugin colorful mark" color="green">绿</mark><mark class="tag-plugin colorful mark" color="cyan">青</mark><mark class="tag-plugin colorful mark" color="blue">蓝</mark><mark class="tag-plugin colorful mark" color="purple">紫</mark><mark class="tag-plugin colorful mark" color="light">亮</mark><mark class="tag-plugin colorful mark" color="dark">暗</mark><mark class="tag-plugin colorful mark" color="warning">警告</mark><mark class="tag-plugin colorful mark" color="error">错误</mark> 一共 12 种颜色。<h2 id="hashtag-标签"><a href="#hashtag-标签" class="headerlink" title="hashtag 标签"></a>hashtag 标签</h2><p>如果没有指定颜色，且没有设置默认颜色，则随机取一个颜色，快来试试吧～</p><a class="tag-plugin colorful hashtag" color="red" href="https://xaoxuu.com/wiki/stellar/"><svg t="1701408144765" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"></path></svg><span>Stellar</span></a><a class="tag-plugin colorful hashtag" color="orange" href="https://hexo.io/"><svg t="1701408144765" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"></path></svg><span>Hexo</span></a><a class="tag-plugin colorful hashtag" color="yellow" href="https://github.com/xaoxuu/"><svg t="1701408144765" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"></path></svg><span>GitHub</span></a><a class="tag-plugin colorful hashtag" color="green" href="https://git.xaox.cc/"><svg t="1701408144765" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4228" width="200" height="200"><path d="M426.6 64.8c34.8 5.8 58.4 38.8 52.6 73.6l-19.6 117.6h190.2l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6s58.4 38.8 52.6 73.6l-19.4 117.6H896c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-42.6 256H832c35.4 0 64 28.6 64 64s-28.6 64-64 64h-137.8l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.6-117.4h-190.4l-23 138.6c-5.8 34.8-38.8 58.4-73.6 52.6s-58.4-38.8-52.6-73.6l19.4-117.8H128c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l42.6-256H192c-35.4 0-64-28.6-64-64s28.6-64 64-64h137.8l23-138.6c5.8-34.8 38.8-58.4 73.6-52.6z m11.6 319.2l-42.6 256h190.2l42.6-256h-190.2z" p-id="4229"></path></svg><span>Gitea</span></a><h2 id="quote"><a href="#quote" class="headerlink" title="quote"></a>quote</h2><p>适合居中且醒目的引用：<div class="tag-plugin quot"><p class="content" type="text"><span class="empty"></span><span class="text">Stellar 是迄今为止最好用的主题</span><span class="empty"></span></p></div><br>支持自定义引号：<div class="tag-plugin quot"><p class="content" type="icon"><img class="icon prefix" src="https://bu.dusays.com/2022/10/24/63567d3e07da3.png" /><span class="text">热门话题</span><span class="empty"></span></p></div>、<div class="tag-plugin quot"><p class="content" type="icon"><img class="icon prefix" src="https://bu.dusays.com/2022/10/24/63567d3e092ff.png" /><span class="text">特别引用</span><img class="icon prefix" src="https://bu.dusays.com/2022/10/24/63567d3e0ab55.png" /></p></div><br>此外，加上 el:h2&#x2F;h3&#x2F;h4&#x2F;h5&#x2F;h6 可以作为标题使用</p><h3 id="任意图标引用"><a href="#任意图标引用" class="headerlink" title="任意图标引用"></a>任意图标引用</h3><div class="tag-plugin quot"><p class="content" type="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg><span class="text">这是一个 icons.yml 配置的示例</span><span class="empty"></span></p></div><div class="tag-plugin quot"><p class="content" type="icon"><img class="icon prefix" src="https://api.iconify.design/line-md:moon-alt-to-sunny-outline-loop-transition.svg" /><span class="text">这是一个 url 的示例</span><img class="icon prefix" src="https://api.iconify.design/solar:list-heart-minimalistic-line-duotone.svg" /></p></div><h2 id="诗词"><a href="#诗词" class="headerlink" title="诗词"></a>诗词</h2><div class="tag-plugin poetry"><div class="content"><div class="title">游山西村</div><div class="meta"><span>陆游</span></div><div class="body"><p>莫笑农家腊酒浑，丰年留客足鸡豚。<br><strong>山重水复疑无路，柳暗花明又一村。</strong><br>箫鼓追随春社近，衣冠简朴古风存。<br>从今若许闲乘月，拄杖无时夜叩门。</p></div><div class="footer">诗词节选</div></div></div><h2 id="paper-纸张标签"><a href="#paper-纸张标签" class="headerlink" title="paper 纸张标签"></a>paper 纸张标签</h2><div class="tag-plugin paper"><div class="content underline"><div class="title">文言文</div><div class="body"><div class="line"><p>出师表</p></div><div class="paragraph"><p>先帝创业未半而中道崩殂，今天下三分，益州疲弊，此诚危急存亡之秋也。然侍卫之臣不懈于内，忠志之士忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气，不宜妄自菲薄，引喻失义，以塞忠谏之路也。</p></div><div class="line right"><p>后出师表</p></div><div class="paragraph"><p>先帝深虑汉、贼不两立，王业不偏安，故托臣以讨贼也。以先帝之明，量臣之才，固知臣伐贼，才弱敌强也。然不伐贼，王业亦亡。惟坐而待亡，孰与伐之？是故托臣而弗疑也。</p></div></div><div class="footer"><div class="author-date"><span class="author">诸葛亮</span><span class="date">三国</span></div>节选</div></div></div><h2 id="reel-卷轴"><a href="#reel-卷轴" class="headerlink" title="reel 卷轴"></a>reel 卷轴</h2><div class="tag-plugin reel"><div class="content"><div class="title">滕王阁序</div><div class="meta"><span>王勃</span></div><div class="body"><div class="main"><p>时维九月，序属三秋。<br>潦水尽而寒潭清，烟光凝而暮山紫。<br>俨骖騑于上路，访风景于崇阿。<br>临帝子之长洲，得天人之旧馆。<br>层峦耸翠，上出重霄；<br>飞阁流丹，下临无地。<br>鹤汀凫渚，穷岛屿之萦回；<br>桂殿兰宫，即冈峦之体势。</p></div></div><div class="date">重九日</div><div class="footer">节选</div></div></div><p>可选参数<br>title: # 标题<br>author: # 作者<br>date: # 日期<br>footer: # 页脚信息</p><h2 id="note-备注块"><a href="#note-备注块" class="headerlink" title="note 备注块"></a>note 备注块</h2><p>title: 标题（可选）<br>content: 内容<br>color: red&#x2F;orange&#x2F;yellow&#x2F;green&#x2F;cyan&#x2F;blue&#x2F;purple&#x2F;light&#x2F;dark&#x2F;warning&#x2F;error</p><div class="tag-plugin colorful note" ><div class="title">[title]</div><div class="body"><p>content [color:color]</p></div></div><h3 id="具有标题的备注块"><a href="#具有标题的备注块" class="headerlink" title="具有标题的备注块"></a>具有标题的备注块</h3><p>直接写备注内容，默认是和代码块一样的样式，第一个空格前面的是标题，后面的是正文，如果标题中需要显示空格，请使用 &nbsp; 代替。</p><div class="tag-plugin colorful note" ><div class="title">这&nbsp;是标题</div><div class="body"><p>这是正文 哈哈。</p></div></div><h3 id="彩色备注块"><a href="#彩色备注块" class="headerlink" title="彩色备注块"></a>彩色备注块</h3><div class="tag-plugin colorful note" ><div class="title">一共支持12种颜色，可以满足几乎所有的需求了。</div><div class="body"><p>color 可设置 red、orange、amber、yellow、green、cyan、blue、purple、light、dark、warning、error 几种取值。</p></div></div><div class="tag-plugin colorful note" color="cyan"><div class="title">一共支持12种颜色，可以满足几乎所有的需求了。</div><div class="body"><p>color 可设置 red、orange、amber、yellow、green、cyan、blue、purple、light、dark、warning、error 几种取值。</p></div></div><h2 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h2><div class="tag-plugin navbar"><nav><a class="link" href="/">文章</a><a class="link active" href="/wiki/">项目</a><a class="link" href="#comments">留言</a><a class="link" href="https://github.com/xaoxuu/">GitHub</a></nav></div><h2 id="复制行"><a href="#复制行" class="headerlink" title="复制行"></a>复制行</h2><div class="tag-plugin copy"><input class="copy-area" id="copy_1" value="curl -s https://sh.xaox.cc/install | sh"><button class="copy-btn" onclick="util.copy(&quot;copy_1&quot;,&quot;复制成功&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><div class="tag-plugin copy"><span>$</span><input class="copy-area" id="copy_2" value="curl -s https://sh.xaox.cc/install | sh"><button class="copy-btn" onclick="util.copy(&quot;copy_2&quot;,&quot;复制成功&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><div class="tag-plugin copy"><input class="copy-area" id="copy_3" value="https://github.com/xaoxuu.com/hexo-theme-stellar.git"><button class="copy-btn" onclick="util.copy(&quot;copy_3&quot;,&quot;复制成功&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><div class="tag-plugin copy"><input class="copy-area" id="copy_4" value="git@github.com:xaoxuu.com/hexo-theme-stellar.git"><button class="copy-btn" onclick="util.copy(&quot;copy_4&quot;,&quot;复制成功&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><div class="tag-plugin copy"><input class="copy-area" id="copy_5" value="gh repo clone xaoxuu.com/hexo-theme-stellar"><button class="copy-btn" onclick="util.copy(&quot;copy_5&quot;,&quot;复制成功&quot;)"><svg class="icon copy-btn" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg></button></div><h2 id="目标管理"><a href="#目标管理" class="headerlink" title="目标管理"></a>目标管理</h2><div class="tag-plugin colorful okr" >  <div class="okr-item o" id="okr-o1">    <div class="okr-left">      <span class="title">O1</span>    </div>    <div class="okr-center">      <span class="title">2024年的小目标：完成 Volantis 6.0 并发布上线</span>      <div class="note"><p>来自2025年的复盘：已《基本》实现目标 <span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://gcore.jsdelivr.net/gh/cdn-x/emoji/tieba/滑稽.png"/></span></p></div>    </div>    <div class="okr-right colorful" color="blue">      <div class="labels">        <span class="status label">正常</span>        <span class="status percent">44%</span>      </div>      <div class="progress">        <div class="fill" style="width:44%;"></div>      </div>    </div>  </div>    <div class="okr-item kr" id="okr-kr1">    <div class="okr-left">      <span class="title">KR1</span>    </div>    <div class="okr-center">      <span class="title">重构 tag-plugins 和 wiki 系统</span>      <div class="note"><ul><li>当 <mark class="tag-plugin colorful mark" color="yellow">KR</mark> 进度为 100% 时，标签默认显示为 <mark class="tag-plugin colorful mark" color="green">已完成</mark></li><li>当 <mark class="tag-plugin colorful mark" color="yellow">KR</mark> 未设置进度时，默认为 <mark class="tag-plugin colorful mark" color="yellow">0%</mark></li><li>当 <mark class="tag-plugin colorful mark" color="yellow">O</mark> 未设置进度时，则显示所有 <mark class="tag-plugin colorful mark" color="yellow">KR</mark> 进度平均值</li></ul></div>    </div>    <div class="okr-right colorful" color="green">      <div class="labels">        <span class="status label">已完成</span>        <span class="status percent">100%</span>      </div>      <div class="progress">        <div class="fill" style="width:100%;"></div>      </div>    </div>  </div>    <div class="okr-item kr" id="okr-kr2">    <div class="okr-left">      <span class="title">KR2</span>    </div>    <div class="okr-center">      <span class="title">完成主要页面设计稿</span>      <div class="note"><div class="tag-plugin tabs" align="left"id="tab_1"><div class="nav-tabs"><div class="tab active"><a href="#tab_1-1">小提示1</a></div><div class="tab"><a href="#tab_1-2">小提示2</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_1-1"><p>您可以在 _config.yml 文件中修改标签的颜色和文案</p></div><div class="tab-pane" id="tab_1-2"><p>您可以在 _config.yml 文件中增加任意的标签配置</p></div></div></div></div>    </div>    <div class="okr-right colorful" color="orange">      <div class="labels">        <span class="status label">延期</span>        <span class="status percent">90%</span>      </div>      <div class="progress">        <div class="fill" style="width:90%;"></div>      </div>    </div>  </div>    <div class="okr-item kr" id="okr-kr3">    <div class="okr-left">      <span class="title">KR3</span>    </div>    <div class="okr-center">      <span class="title">完成前置准备工作（如果你知道答案，请在留言区帮帮我！🥹）</span>      <div class="note"><div class="tag-plugin colorful checkbox" ><input type="checkbox"/><span>在咸水和海滩之间找一亩地</span></div><div class="tag-plugin colorful checkbox" ><input type="checkbox"/><span>求出圆周率后15位</span></div><div class="tag-plugin colorful checkbox" ><input type="checkbox"/><span>找出宇宙的终极逻辑</span></div><div class="tag-plugin colorful checkbox" ><input type="checkbox"/><span>去地狱里走两步</span></div></div>    </div>    <div class="okr-right colorful" color="red">      <div class="labels">        <span class="status label">未完成</span>        <span class="status percent">-12%</span>      </div>      <div class="progress">        <div class="fill" style="width:-12%;"></div>      </div>    </div>  </div>    <div class="okr-item kr" id="okr-kr-4">    <div class="okr-left">      <span class="title">KR-4</span>    </div>    <div class="okr-center">      <span class="title">开发、测试和发布</span>      <div class="note"><div class="tag-plugin image"><div class="image-bg"><img src="/assets/wiki/stellar/icon.svg" alt="支持嵌套插入图片等其它简单组件" data-fancybox="true" style="height:64px;"/></div><div class="image-meta"><span class="image-caption center">支持嵌套插入图片等其它简单组件</span></div></div></div>    </div>    <div class="okr-right colorful" color="yellow">      <div class="labels">        <span class="status label">风险</span>        <span class="status percent">0%</span>      </div>      <div class="progress">        <div class="fill" style="width:0%;"></div>      </div>    </div>  </div>  </div><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><div class="tag-plugin link dis-select"><a class="link-card plain" title="[title] [icon:src] [desc:true/false]" href="href" cardlink autofill="icon"><div class="left"><span class="title">[title] [icon:src] [desc:true/false]</span><span class="cap link footnote">https://malcode-site.github.io/href</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><p>不带摘要的样式：</p><div class="tag-plugin link dis-select"><a class="link-card plain" title="" href="https://xaoxuu.com/blog/20221029/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon"><div class="left"><span class="title">https://xaoxuu.com/blog/20221029/</span><span class="cap link footnote">https://xaoxuu.com/blog/20221029/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div><p>带摘要的样式：</p><div class="tag-plugin link dis-select"><a class="link-card rich" title="" href="https://xaoxuu.com/blog/20221029/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon,desc"><div class="top"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div><span class="cap link footnote">https://xaoxuu.com/blog/20221029/</span></div><div class="bottom"><span class="title">https://xaoxuu.com/blog/20221029/</span><span class="cap desc footnote"></span></div></a></div><div class="tag-plugin colorful note" ><div class="title">写法</div><div class="body"><p>href: 链接<br> title: 可选，手动设置标题（为空时会自动抓取页面标题）<br> icon: 可选，手动设置图标（为空时会自动抓取页面图标）<br> desc: 可选，是否显示摘要描述，为true时将会显示页面描述</p></div></div><h2 id="按钮"><a href="#按钮" class="headerlink" title="按钮"></a>按钮</h2><a class="tag-plugin colorful button" color="theme" title="探索" href="https://github.com/xaoxuu/hexo-theme-stellar/"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg><span>探索</span></a><h2 id="单选"><a href="#单选" class="headerlink" title="单选"></a>单选</h2><div class="tag-plugin colorful checkbox" ><input type="radio"/><span>没有勾选的单选框</span></div><div class="tag-plugin colorful checkbox" ><input type="radio" checked="true"/><span>已勾选的单选框</span></div><h2 id="多选"><a href="#多选" class="headerlink" title="多选"></a>多选</h2><div class="tag-plugin colorful checkbox" ><input type="checkbox"/><span>普通的没有勾选的复选框</span></div><div class="tag-plugin colorful checkbox" ><input type="checkbox" checked="true"/><span>普通的已勾选的复选框</span></div><div class="tag-plugin colorful checkbox" color="green" symbol="plus"><input type="checkbox" checked="true"/><span>显示为加号的绿色的已勾选的复选框</span></div><div class="tag-plugin colorful checkbox" color="yellow" symbol="minus"><input type="checkbox" checked="true"/><span>显示为减号的黄色的已勾选的复选框</span></div><div class="tag-plugin colorful checkbox" color="red" symbol="times"><input type="checkbox" checked="true"/><span>显示为乘号的红色的已勾选的复选框</span></div><h2 id="音频"><a href="#音频" class="headerlink" title="音频"></a>音频</h2>  <div class="tag-plugin audio">  <audio controls preload>  <source src="https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3" type="audio/mp3">Your browser does not support the audio tag.  </audio>  </div>      <div class="tag-plugin audio">    <iframe src="//music.163.com/outchain/player?type=2&id=1856385686&auto=0&height=32" frameborder="no" border="0" marginwidth="0" marginheight="0" width=288px height=52>    </iframe>    </div>        <div class="tag-plugin audio">    <iframe src="//music.163.com/outchain/player?type=2&id=1856385686&auto=0&height=32" frameborder="no" border="0" marginwidth="0" marginheight="0" width=288px height=52>    </iframe>    </div>    <h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://player.bilibili.com/player.html?bvid=BV1GP4y1d729&autoplay=false" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://player.bilibili.com/player.html?bvid=BV1GP4y1d729&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://www.youtube.com/embed/LB8KwiiUGy0?rel=0&color=white&disablekb=1&playsinline=1&&rel=0&autoplay=0" picture-in-picture="true" allowfullscreen="true" >    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://www.youtube.com/embed/LB8KwiiUGy0?rel=0&color=white&disablekb=1&playsinline=1&&rel=0&autoplay=0" picture-in-picture="true" allowfullscreen="true" >    </iframe>    </div>    <div class="tag-plugin grid"  style="grid-template-columns: repeat(2, 1fr);"><div class="cell" style="">    <div class="tag-plugin video" style="max-width:100%;">  <video controls preload>  <source src="https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov" type="video/mp4">Your browser does not support the video tag.  </video>  </div>      </div>    <div class="cell" style="">    <div class="tag-plugin video" style="max-width:100%;">  <video controls preload>  <source src="https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov" type="video/mp4">Your browser does not support the video tag.  </video>  </div>      </div>    </div><h2 id="文本修饰"><a href="#文本修饰" class="headerlink" title="文本修饰"></a>文本修饰</h2><ul><li>这是 <psw>密码</psw> 标签</li><li>这是 <u>下划线</u> 标签</li><li>这是 <emp>着重号</emp> 标签</li><li>这是 <wavy>波浪线</wavy> 标签</li><li>这是 <del>删除线</del> 标签</li><li>这是 <sup class="tag-plugin colorful sup" color="red">上角标</sup> 标签</li><li>这是 <sub class="tag-plugin colorful sub" >下角标</sub> 标签</li><li>这是 <kbd>键盘样式</kbd> 标签，试一试：<kbd>⌘</kbd> + <kbd>D</kbd></li></ul><h1 id="数据类标签"><a href="#数据类标签" class="headerlink" title="数据类标签"></a>数据类标签</h1><div class="tag-plugin link dis-select"><a class="link-card rich" title="" href="https://xaoxuu.com/wiki/stellar/tag-plugins/data/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon,desc"><div class="top"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div><span class="cap link footnote">https://xaoxuu.com/wiki/stellar/tag-plugins/data/</span></div><div class="bottom"><span class="title">https://xaoxuu.com/wiki/stellar/tag-plugins/data/</span><span class="cap desc footnote"></span></div></a></div><h1 id="容器类标签"><a href="#容器类标签" class="headerlink" title="容器类标签"></a>容器类标签</h1><div class="tag-plugin link dis-select"><a class="link-card rich" title="" href="https://xaoxuu.com/wiki/stellar/tag-plugins/container/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="title,icon,desc"><div class="top"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div><span class="cap link footnote">https://xaoxuu.com/wiki/stellar/tag-plugins/container/</span></div><div class="bottom"><span class="title">https://xaoxuu.com/wiki/stellar/tag-plugins/container/</span><span class="cap desc footnote"></span></div></a></div><h1 id=""><a href="#" class="headerlink" title=""></a></h1><div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://player.bilibili.com/player.html?bvid=BV1GP4y1d729&autoplay=false" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://player.bilibili.com/player.html?bvid=BV1GP4y1d729&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true">    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://www.youtube.com/embed/LB8KwiiUGy0?rel=0&color=white&disablekb=1&playsinline=1&&rel=0&autoplay=0" picture-in-picture="true" allowfullscreen="true" >    </iframe>    </div>    <div class="tag-plugin video" style="aspect-ratio:1.7777777777777777;max-width:100%;">    <iframe src="https://www.youtube.com/embed/LB8KwiiUGy0?rel=0&color=white&disablekb=1&playsinline=1&&rel=0&autoplay=0" picture-in-picture="true" allowfullscreen="true" >    </iframe>    </div>    <div class="tag-plugin grid"  style="grid-template-columns: repeat(2, 1fr);"><div class="cell" style="">    <div class="tag-plugin video" style="max-width:100%;">  <video controls preload>  <source src="https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov" type="video/mp4">Your browser does not support the video tag.  </video>  </div>      </div>    <div class="cell" style="">    <div class="tag-plugin video" style="max-width:100%;">  <video controls preload>  <source src="https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov" type="video/mp4">Your browser does not support the video tag.  </video>  </div>      </div>    </div>]]></content>
    
    
    <summary type="html">test1</summary>
    
    
    
    <category term="test" scheme="https://malcode-site.github.io/categories/test/"/>
    
    
    <category term="test" scheme="https://malcode-site.github.io/tags/test/"/>
    
  </entry>
  
</feed>
